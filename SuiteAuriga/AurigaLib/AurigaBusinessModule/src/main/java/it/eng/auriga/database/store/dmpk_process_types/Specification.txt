1        PACKAGE DMPK_PROCESS_TYPES AUTHID CURRENT_USER IS
2        
3        	/****************************************************		INFORMAZIONI GENERALI		*******************************************************/
4        	/************** Argomenti delle stored per il controllo della transazione:											*******/
5        	/************** FlgRollBckFullIn -> se 1 in caso di errore viene fatta la rollback completa (non a savepoint), 					*******/
6        	/************** 				altrimenti la rollback delle sole modifiche effettuate nella stored						*******/
7        	/************** 				ATTENZIONE: la rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log			*******/
8        	/************** FlgAutoCommitIn  -> se vale 1, dopo la rollback e qualunque sia l'esito (positivo o no), la stored esegue una commit finale *****/
9        	/************** Tutte le funzioni/procedure che NON hanno gli argomenti in input FlgRollBckFullIn e FlgAutoCommitIn 				*******/
10        	/************** NON ESEGUONO AL LORO INTERNO ALCUNA COMMIT nè ROLLBACK 												*******/
11        
12        	/************** Tutte le funzioni, tranne quelle da utilizzarsi nelle select, restituiscono 1 in caso di successo, altrimenti 0		*******/
13        	/************** Tali funzioni restituiscono, in caso di result 0, un n.ro, un contesto e un messaggio di errore:					*******/
14        	/************** il n.ro è: <0 se errore ORACLE non specificamente gestito 											*******/
15        	/**************		   da 1->1000 errore "grave" (SEVERE_ERROR) gestito											*******/
16        	/**************		   >1000 errore non grave gestito														*******/
17        	/************** il contesto indica il package e/o funzione/procedura in cui si è verificato l'errore							*******/
18        
19        	DEF_ID_PROC_AMM		CONSTANT	INTEGER:=0;											-- Id. (ID_PROCESS_TYPE) del tipo processo che corrisponde al procedimento amministrativo
20        	DEF_ID_PROCESS_ATTO	CONSTANT	INTEGER:=10;										-- Id. del processo che rappresenta un atto
21        	DEF_RUOLO_RESP_PROC	CONSTANT	DMT_PROCESS_TYPE_SOGG.RUOLO_SOGG_IN_PROC%TYPE:='RESPONSABILE';		-- Nome che identifica il ruolo di "responsabile" di un qualsiasi procedimento amministrativo
22        	DEF_RUOLO_UO_COMPETENTE	CONSTANT	DMT_PROCESS_TYPE_SOGG.RUOLO_SOGG_IN_PROC%TYPE:='U.O. COMPETENTE';		-- Nome che identifica il ruolo di "U.O competente" di un qualsiasi procedimento amministrativo	
23        	DEF_RUOLO_RICH_PROC	CONSTANT	DMT_PROCESS_TYPE_SOGG.RUOLO_SOGG_IN_PROC%TYPE:='RICHIEDENTE';		-- Nome che identifica il ruolo di "richiedente" (ovvero colui a nome di cui è l'istanza) di un qualsiasi procedimento amministrativo su istanza di parte
24        	DEF_RUOLO_DELEG_RAPPR	CONSTANT	DMT_PROCESS_TYPE_SOGG.RUOLO_SOGG_IN_PROC%TYPE:='DELEGATO';		-- Nome che identifica il ruolo del delegato/rappresentante legale che presenta l'istanza di procedimento a nome del richiedente
25        
26        	----tipi eventi della trasparenza
27        	DEF_ID_SOSPENSIONE	CONSTANT	DMT_EVENT_TYPES.ID_EVENT_TYPE%type:=1;
28        	DEF_ID_INTERRUZIONE	CONSTANT	DMT_EVENT_TYPES.ID_EVENT_TYPE%type:=2;
29        	DEF_ID_CAMBIO_RESP	CONSTANT	DMT_EVENT_TYPES.ID_EVENT_TYPE%type:=3;
30        	DEF_ID_CHIUSURA_POS	CONSTANT	DMT_EVENT_TYPES.ID_EVENT_TYPE%type:=4;
31        	DEF_ID_CHIUSURA_NEG	CONSTANT	DMT_EVENT_TYPES.ID_EVENT_TYPE%type:=5;
32        	DEF_ID_CHIUSURA_ARCH	CONSTANT	DMT_EVENT_TYPES.ID_EVENT_TYPE%type:=6;
33        	DEF_ID_CHIUSURA_ANN	CONSTANT	DMT_EVENT_TYPES.ID_EVENT_TYPE%type:=7;
34        	DEF_ID_RIAPERTURA		CONSTANT	DMT_EVENT_TYPES.ID_EVENT_TYPE%type:=8;
35        	DEF_ID_FASE_EST		CONSTANT	DMT_EVENT_TYPES.ID_EVENT_TYPE%type:=9;
36        
37        	/**** Funzione per ricercare i tipi di processi ****/
38        	FUNCTION TrovaProcessTypes(
39        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
40        																	-- (obblig). Codice identificativo del token di connessione
41        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
42        			FlgPreimpostaFiltroIn		IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1 i filtri e l'ordinamento vengono settati secondo le impostazioni dell'utente di lavoro, altrimenti restano come passati in input
43        			--------------- inizio filtri di ricerca-------------------
44        			IdProcessTypeIO			IN OUT	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type,	-- 1° filtro di ricerca: id. del tipo di processo da ricercare
45        			NomeIO				IN OUT	DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type, -- 2° filtro di ricerca: stringa contenuta nel nome del tipo di processo (ricerca case-insensitive in like)
46        			DescrizioneIO			IN OUT	DMT_PROCESS_TYPES.DES_PROCESS_TYPE%type,	-- 3° filtro di ricerca: stringa contenuta la descrizione del tipo di processo (ricerca case-insensitive in like)
47        			FlgProcAmmIO			IN OUT	PLS_INTEGER,					-- (valori 1/0/NULL) 4° filtro di ricerca: 1 = Solo procedimenti amministrativi; 0 = Solo processi che non sono procedimenti amministrativi; NULL = nessun filtro
48        			IdProcessTypeGenIO		IN OUT	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type,	-- 5° filtro di ricerca: id. del tipo di processo più generale in cui ricade. Viene considerato e gestito solo se è valorizzato l'argomento successivo. Se i due non sono congruenti l'id. viene ignorato
49        			NomeProcessTypeGenIO		IN OUT	DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type, -- 6° filtro di ricerca: Nome del tipo di processo più generale in cui ricade (ricerca case-insensitive in like)
50        			FlgTipoIniziativaIO		IN OUT	DMT_PROCESS_TYPES.FLG_TIPO_INIZIATIVA%type,
51        																	-- 7° filtro di ricerca: Tipo di iniziativa del procedimento. Valori ammessi: P=di Parte; U=d'Ufficio
52        			CIProvProcessTypeIO		IN OUT	DMT_PROCESS_TYPES.PROV_CI_PROCESS_TYPE%TYPE,	
53        																	-- 8° filtro di ricerca: Codice identificativo del tipo di processo nel sistema di provenienza: ricerca esatta case-sensitive  
54        			IdUORespIO				IN OUT	DMT_STRUTTURA_ORG.ID_UO%type,			-- 9° filtro di ricerca: Identificativo della UO attuale responsabile (per il sogg. prod/AOO di lavoro)
55        																	-- Viene considerato e gestito solo se è valorizzato uno dei 2 argomenti successivo; se non congruenti con questi l'id. viene ignorato
56        			LivelliUORespIO			IN OUT	VARCHAR2,						-- 10° filtro di ricerca: Stringa con i n.ri livello della UO attuale responsabile (per il sogg. prod/AOO di lavoro)
57        																	-- 	(tutti o solo alcuni; però se si specifica un livello è obbligatorio indicare tutti i livelli superiori; vanno indicati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; vanno separati dal separatore dei livelli di UO valido per il soggetto produttore/AOO di appartenenza della UO)
58        			DesUORespIO				IN OUT	VARCHAR2,						-- 11° filtro di ricerca: Denominazione della UO attuale responsabile (per il sogg. prod/AOO di lavoro)(ricerca case insensitive in like). Può essere quella semplice o la concatenazione con separatore "|" delle denominazioni delle UO superiori + quella della UO
59        																	-- 	ATTENZIONE: mentre la ricerca sulla denominazione semplice intende sempre che il valore in input sia un possibile inizio (aggiunge in automatico un % finale al valore quando fa la ricerca in like), quella sulla concatenzione no (il % finale non viene aggiunto in automatico, altrimenti le UO con sotto-UO non sarebbero mai individuabili univocamente attraverso il solo filtro sulla denominazione)
60        			IdUserRespIO			IN OUT	DMT_USERS.ID_USER%type,				-- 12° filtro di ricerca: id. dell'utente attuale responsabile (per il sogg. prod/AOO di lavoro)
61        																	-- Viene considerato e gestito solo se è valorizzato l'argomento successivo; se non congruente con questo l'id. viene ignorato
62        			DesUserRespIO			IN OUT      DMT_USERS.DES_USER%type,			-- 13° filtro di ricerca: descrizione dell'utente attuale responsabile (per il sogg. prod/AOO di lavoro) (ricerca case-insensitive in like)
63        			FlgSoloVldIO 			IN OUT 	INTEGER, 						-- (valori 1/0/NULL) 14° filtro di ricerca: Se 1 indica se si devono estrarre solo i tipi di processi attivi alla data odierna
64        			TsVldIO				IN OUT	VARCHAR2,						-- 15° filtro di ricerca: Stinga con il timestamp (nel formato GG/MM/AAAA HH24:MI:SS) a cui devono essere attivi i tipi di processi da estrarre
65        			CodApplicazioneIO			IN OUT	VARCHAR2,						-- 16° filtro di ricerca: Codice dell'applicazione che si occupa dei tipi di procedimenti da ricercare. Se valorizzata pari a #BY_CONN_TKN e si è connessi da un'applicazione esterna si ricercano solo i tipi di processi di cui si occupa quell'applicazione
66        			CodIstApplicazioneIO		IN OUT	VARCHAR2,						-- 17° filtro di ricerca: Codice dell'istanza di applicazione che si occupa dei tipi di procedimenti da ricercare. Se valorizzata pari a #BY_CONN_TKN e si è connessi da un'applicazione esterna si ricercano solo i tipi di processi di cui si occupa l'istanza di applicazione esterna da cui si è connessi
67        			FlgInclAnnullatiIO		IN OUT	INTEGER,						-- (valori 1/0/NULL) 18° filtro di ricerca: se 1 vengono estratti anche i tipi di processi logicamente annullati, altrimenti no	
68        			GGDurataDaIO			IN OUT	DMT_PROCESS_TYPES.GG_DURATA_PREVISTA%type,-- 18° filtro di ricerca: estremo inferiore dell'intervallo di ricerca sui giorni di durata 
69        			GGDurataAIO				IN OUT	DMT_PROCESS_TYPES.GG_DURATA_PREVISTA%type,-- 19° filtro di ricerca: estremo superiore dell'intervallo di ricerca sui giorni di durata 
70        			AltriCriteriIO			IN OUT 	NOCOPY CLOB,					-- Altri criteri di ricerca sugli attributi addizionali (XML conforme a schema LISTA_STD.xsd). Se più di uno vengono applicati in AND.
71        																	-- Ogni criterio è un tag Riga che può contenere le seguenti colonne:
72        																	--	1) Nome (ATTR_NAME) dell'attributo cui è relativo il criterio
73        																	--	2) (obblig.) Operatore logico. Valori possibili:
74        																	--		"uguale" (ricerca esatta) 
75        																	--		"simile a (case-sensitive)" (ricerca case-sensitive in like)
76        																	--		"simile a (case-insensitive)" (ricerca case-insensitive in like e che ignora i caratteri quali spazi, ., ecc)
77        																	--		"maggiore" (se attributo numerico o data)
78        																	--		"maggiore o uguale" (se attributo numerico o data)
79        																	--		"minore" (se attributo numerico o data)
80        																	--		"minore o uguale" (se attributo numerico o data)
81        																	--		"tra" (se attributo numerico o data)
82        																	--		"non valorizzato"
83        																	--		"valorizzato"
84        																	--		"spuntato" (se attributo di tipo casella di spunta)
85        																	--		"non spuntato" (se attributo di tipo casella di spunta)
86        																	--	3) 1° valore di confronto (obblig. e gestito solo se l'operatore non ha uno dei seguenti valori: valorizzato, non valorizzato, spuntato, non spuntato) (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
87        																	--	4) 2° valore di confronto (obblig. e gestito solo se l'operatore è "tra") (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
88        																	--	5) Label dell''attributo cui è relativo il criterio (se sotto-attributo di complesso <label del complesso> - <label del sotto-attributo>
89        			------------- inizio argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
90        			ColOrderByIO			IN OUT	VARCHAR2,						-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso (si può ordinare solo per le colonne da 1 a 8). Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
91        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
92        																	-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
93        			FlgDescOrderByIO  		IN OUT	VARCHAR2,						-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
94        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.			
95        			FlgSenzaPaginazioneIn 		IN 		PLS_INTEGER DEFAULT NULL,            	-- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
96        			NroPaginaIO      			IN OUT	PLS_INTEGER,                  		-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
97           			BachSizeIO				IN OUT	PLS_INTEGER,					-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)  
98        																	-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro				
99        			OverFlowLimitIn			IN		PLS_INTEGER DEFAULT NULL,			-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow
100        			FlgSenzaTotIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
101        			NroTotRecOut			OUT		PLS_INTEGER,					-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina)
102             			NroRecInPaginaOut 		OUT   	PLS_INTEGER,                     		-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
103        			------------- fine argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
104        			ListaXMLOut				OUT		NOCOPY CLOB,					-- Lista dei tipi di processi trovati (XML conforme a schema LISTA_STD.xsd)
105        																	-- Ogni tipo di processo è un tag Riga che può contenere le seguenti colonne: 
106        																	-- 1:  Identificativo del tipo di processo
107        																	-- 2:  Nome del tipo di processo
108        																	-- 3:  Descrizione dettagliata del tipo di processo
109        																	-- 4:  Descrizione del tipo di processo più generale in cui ricade
110        																	-- 5:  Identificativo del tipo di processo più generale in cui ricade
111        																	-- 6:  Data di inizio validità (nel formato dato dal parametro FMT_STD_DATA)
112        																	-- 7:  Data di fine validità (nel formato dato dal parametro FMT_STD_DATA)
113        																	-- 8:  Giorni di durata prevista
114        																	-- 9:  Id. della UO attuale responsabile per il sogg. prod./AOO di lavoro
115        																	-- 10: Livelli e descrizione della UO attuale responsabile per il sogg. prod./AOO di lavoro
116        																	-- 11: Id. dell'utente attuale responsabile per il sogg. prod./AOO di lavoro
117        																	-- 12: Descrizione dell'utente attuale responsabile per il sogg. prod./AOO di lavoro
118        																	-- 13: (valori 1/0) Se 1 si tratta di un procedimento amministrativo, altrimenti no
119        																	-- 14: Tipo di iniziativa (d'ufficio o di parte)
120        																	-- 15: Base normativa
121        																	-- 16: (valori 1/0) Se 1 è un tipo di procedimento sospendibile
122        																	-- 17: N.ro massimo di sospensioni consentite
123        																	-- 18: (valori 1/0) Se 1 è un tipo di procedimento i cui termini si possono interrompere
124        																	-- 19: Massimo numero di giorni dall'avvio di procedimento amministrativo del dato tipo entro cui il procedimento si può ancora interrompere
125        																	-- 20: (valori 1/0) Se 1 è un tipo di procedimento che in parte si può svolgere all'esterno del soggetto produttore/AOO che lo avvia
126        																	-- 21: (valori 1/0) Se 1 è un tipo di procedimento soggetto a silenzio-assenso
127        																	-- 22: N.ro di giorni trascorsi i quali vale il silenzio-assenso
128        																	-- 23: (valori F/S/NULL) Indica se i procedimenti del dato tipo in genere danno luogo ad uno nuovo fascicolo di titolario (F) o piuttosto ad un sottofascicolo (S)
129        																	-- 24: Livelli e descrizione dell'eventuale classificazione in cui ricadono tutti i procedimenti del dato tipo
130        																	-- 25: Descrizione dell'eventuale tipo di fascicolo che corrisponde a tutti i procedimenti del dato tipo
131        																	-- 26: Periodo di conservazione ("Illimitato" o espresso come n.ro di anni) dei fascicoli e delle unità documentarie afferenti al dato tipo di procedimento
132        																	-- 27: Descrizione del supporto di conservazione previsto per i fascicoli e le unità documentarie afferenti al dato tipo di procedimento
133        																	-- 28: Annotazioni sul tipo di processo/procedimento
134        																	-- 29: Flag di annullamento logico (valori 1/0)
135        																	-- 30: Flag che indica che il tipo di processo è trattato dall'applicazione CodApplicazioneIO ed eventuale istanza CodIstApplicazioneIO
136        																	-- 31: Descrizione dell'applicazione (ed eventuale istanza) che si occupa del tipo di processo
137        																	-- 32: Cod. identificativo del tipo di processo nel sistema di provenienza
138        																	-- 33: Timestamp di creazione del tipo di processo (nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
139        																	-- 34: Descrizione dell'utente di creazione del tipo di processo
140        																	-- 35: Timestamp di ultima modifica dei dati del tipo di processo (nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
141        																	-- 36: Descrizione dell'utente di ultima modifica dei dati del tipo di processo																						
142        																	-- 37: (valori 1/0) Indicatore di tipo di processo riservato dal sistema e non modificabile da applicativo
143        																	-- 38: (valori 1/0) Indicatore di tipo di processo attivo e non annullato
144        																	-- 39: (valori 1/0): se 1 è richiesta abilitazione esplicita per visualizzare processi del dato tipo  
145        																	-- 40: (valori 1/0): se 1 è richiesta abilitazione esplicita per gestire (modificare, cancellare) processi del dato tipo  
146        																	-- 41: (valori 1/0): se 1 è richiesta abilitazione esplicita per assegnare il dato tipo ad un processo 
147        			FlgAbilInsOut	 		OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se 1 si ha abilitazione a inserimento di tipo di processo/proced.
148        			FlgAbilUpdOut 			OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se 1 si ha abilitazione a modifica di tipo di processo/proced.
149        			FlgAbilDelOut 			OUT 		PLS_INTEGER,            			-- (valori 1/0) Se 1 si ha abilitazione a cancellazione di tipo di processo/proced.
150        			FlgMostraAltriAttrOut		OUT		PLS_INTEGER,					-- (valori 1/0) Se 1 nella GUI vanno mostrati gli attributi addizionali per un nuovo di tipo di processo/proced. (ce ne sono di visibile all'utente), se 0 no
151        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
152        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
153        			ErrMsgOut				OUT 		VARCHAR2,						-- Messaggio d'errore
154        			FlgRichAbilXVisualizzIn		IN		PLS_INTEGER default NULL,			-- (valori 1/0/NULL): filtro di ricerca per restringere la ricerca ai soli tipi per cui è richiesta abilitazione esplicita per visualizzare processi del dato tipo (=1) o per cui non è richiesta abilitazione esplicita per visualizzare processi del dato tipo (=0)
155        			FlgRichAbilXGestIn		IN		PLS_INTEGER default NULL,			-- (valori 1/0/NULL): filtro di ricerca per restringere la ricerca ai soli tipi per cui è richiesta abilitazione esplicita per gestire (modificare, cancellare) processi del dato tipo (=1) o per cui non è richiesta abilitazione esplicita per gestire processi del dato tipo (=0)
156        			FlgRichAbilXAssegnIn		IN		PLS_INTEGER default NULL,			-- (valori 1/0/NULL): filtro di ricerca per restringere la ricerca ai soli tipi per cui è richiesta abilitazione esplicita per assegnarli ad un processo (=1) o per cui non è richiesta abilitazione esplicita per assegnarli ad un processo (=0)
157        			FlgStatoAbilIn			IN		PLS_INTEGER default NULL,			-- (valori 1/0/NULL): filtro di ricerca per restringere la ricerca ai soli tipi cui l'utente/UO/scrivania/profilo ecc specificato nell'argomento IdDestAbilIn ha (= 1) o non ha (=0) abilitazione (con le opzioni eventualmente specificate nell'argomento OpzioniAbilIn)
158        			FlgTpDestAbilIn			IN		VARCHAR2 default NULL,				-- (obblig. e gestito solo se FlgStatoAbilIn è valorizzato) Indica il tipo di chi (utente o UO ecc) deve avere o non avere abilitazione - con tutte le opzioni specificate in OpzioniAbilIn - verso i tipi da ricercare
159        																	-- Valori ammessi: 
160        																	--	UO	=	U.O. 
161        																	-- 	SV	=	Scrivania virtuale
162        																	--	UT	=	Utente
163        																	--	PR	=	Profilo
164        																	--	GP	=	Gruppo di privilegi
165        			IdDestAbilIn			IN		INTEGER default NULL,				-- (obblig. e gestito solo se FlgStatoAbilIn è valorizzato) Identificativo (ID_UO o ID_SCRIVANIA o ID_USER o ID_PROFILO o ID_GRUPPO_PRIV) di chi deve avere o non avere abilitazione - con tutte le opzioni specificate in OpzioniAbilIn - verso i tipi da ricercare
166        			OpzioniAbilIn			IN		VARCHAR2 DEFAULT NULL,				-- Indica la/le opzione (se più di una separate da ;) con cui IdDestAbilIn deve essere abilitato o meno (a seconda che FlgStatoAbilIn sia 1 o 0) ai tipi da ricercare
167        																	-- Opzioni possibili:
168        																	--	M	=	a Modificare/gestire
169        																	--	A	=	ad Assegnare 
170        			NomeTagRigaIn			IN		VARCHAR2 default null,				--se valorizzato è il nome del tag riga che deve avere l'xml in output
171        			NomeTagColonnaIn			IN		DMVA_STRING default null   			--se valorizzatorappresenta i nomi dei tag colonne dell'xml di output
172        			)return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
173        
174        	/***** Funzione per trovare l'id. del tipo di processo più generale (quello non ricompreso a sua volta in altro tipo) in cui ricade un dato tipo di processo ******/
175        	function GetIdProcessTypeGen(
176        			IdProcessTypeIn		IN		DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type			-- Id. del tipo di processo per cui trovare il tipo più generale
177        			) return DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type;							-- Identificativo del tipo di processo più generale (cioè un tipo senza tipo + generale) in cui ricade IdProcessTypeIn
178        
179        	/***** Table function che restituisce gli id. dei tipi di processi/procedimenti in cui ricade un dato processo/procedimento 	*****/
180        	/***** In caso di errore l'errore non viene gestito ed è restituito al chimante								*****/ 
181        	function GetIdProcessTypesSup(
182        			IdProcessTypeIn		IN		DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type			-- Id. del tipo di processo di cui trovare i tipi di processi/procedimenti in cui ricade 
183        			) return DMTO_ID;													-- Lista con gli id. dei tipi di processi in cui ricade
184        
185        	/***** Funzione per inserire o aggiornare un tipo di processo/procedimento *****/
186        	function IUProcessType(	
187        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
188        																	-- (obblig). Codice identificativo del token di connessione
189        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
190        			IdProcessTypeIO   		IN OUT   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type, 	-- Identificativo del tipo di processo da modificare. Se non valorizzato il tipo di processo è da inserire ex-novo
191        																	-- In output, salvo in caso di errore, è sempre valorizzato	
192        			NomeIn				IN		DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
193        																	-- (obblig.) Nome del tipo di processo/procedimento
194        			DescrizioneIn			IN		DMT_PROCESS_TYPES.DES_PROCESS_TYPE%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
195        																	-- Descrizione dettagliata del tipo di processo/procedimento
196        			DtInizioVldIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
197        																	-- Data di inizio validità (nel formato dato dal parametro di conf. FMT_STD_DATA).
198        			DtFineVldIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
199        																	-- Data di fine validità (nel formato dato dal parametro di conf. FMT_STD_DATA).
200        			IdProcessTypeGenIn		IN		DMT_PROCESS_TYPES.ID_PROCESS_TYPE_GEN%TYPE DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
201        																	-- Identificativo del tipo di processo/procedimento in cui ricade (viene considerato solo se è valorizzato anche l'argomento successivo)
202        			NomeProcessTypeGenIn		IN		DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
203        																	-- Nome del tipo di processo/procedimento in cui ricade
204        			FlgProcAmmIn			IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
205        																	-- (valori 1/NULL) Il valore 1 indica che è un procedimento amministrativo. Serve valorizzarlo solo se non si è specificato un tipo di processo/procedimento in cui ricade
206        			FlgTipoIniziativaIn		IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
207        																	-- (valori P/U) Flag che indica il tipo di iniziativa: P=di Parte; U=d'Ufficio. Va specificato solo se si tratta di un procedimento amministrativo
208        			GGDurataPrevistaIn		IN		DMT_PROCESS_TYPES.GG_DURATA_PREVISTA%type DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
209        																	-- Durata del procedimento (in giorni)
210        			BaseNormativaIn			IN		DMT_PROCESS_TYPES.BASE_NORMATIVA%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
211        																	-- Base normativa del tipo di processo/procedimento			
212        			FlgSospendibileIn			IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
213        																	-- (valori 1/0/NULL) 1 indica che i termini possono essere sospesi
214        			NroMaxSospensioniIn		IN		DMT_PROCESS_TYPES.NRO_MAX_SOSPENSIONI%type DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
215        																	-- Massimo numero di sospensioni dei termini consentite
216        			FlgInterrompibileIn		IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
217        																	-- (valori 1/0/NULL) 1 indica che i termini possono essere interrotti e poi riprendere da zero
218        			NroMaxGGXInterrIn			IN		DMT_PROCESS_TYPES.NRO_MAX_GG_X_INTERR%type DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
219        																	-- Massimo numero di giorni dall'avvio di procedimento amministrativo del dato tipo entro cui il procedimento si può ancora interrompere
220        			FlgPartiEsterneIn			IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
221        																	-- (valori 1/0/NULL) 1 indica che parti del procedimento possono svolgersi all'esterno del soggetto produttore/AOO
222        			FlgSilenzioAssensoIn		IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
223        																	-- (valori 1/0/NULL) 1 indica che il procedimento è soggetto a silenzio-assenso
224        			GGSilenzioAssensoIn		IN		DMT_PROCESS_TYPES.GG_SILENZIO_ASSENSO%type DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
225        																	-- Giorni dall'avvio del procedimento trascorsi i quali decorre il silenzio-assenso
226        			FlgFascSFIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
227        																	-- (valori F/S) Indica se in genere a un procedimento del dato tipo corrisponde un fascicolo (F) o un sottofascicolo (S)
228        			IdClassificazioneIn		IN		DMT_PROCESS_TYPES.ID_CLASSIFICAZIONE%type DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
229        																	-- Id. della classificazione di fascicoli e/o unità documentarie afferenti a procedimenti del dato tipo.
230        																	-- Viene considerato solo se almeno uno dei due argomenti successivi è valorizzato
231        			LivelliClassificazioneIn	IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
232        																	-- Stringa con i n.ri livello della classificazione di fascicoli e/o unità documentarie afferenti  a procedimenti del dato tipo (tutti o solo alcuni; però se si specifica un livello è obbligatorio indicare tutti i livelli superiori; vanno indicati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; vanno separati dal separatore dei livelli di classificazione valido per il soggetto produttore/AOO)
233        			DesClassificazioneIn		IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
234        																	-- Descrizione della classificazione di fascicoli e/o unità documentarie afferenti  procedimenti del dato tipo (o suo inizio; ricerca case insensitive in like).
235        			IdFolderTypeIn			IN		DMT_PROCESS_TYPES.ID_CLASSIFICAZIONE%type DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
236        																	-- Id. del tipo dei fascicoli associati a procedimenti del dato tipo.
237        																	-- Viene considerato solo se l'argomento successivo è valorizzato
238        			NomeFolderTypeIn			IN		DMT_FOLDER_TYPES.NOME_FOLDER_TYPE%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
239        																	-- Nome del tipo dei fascicoli associati a procedimenti del dato tipo (o suo inizio; ricerca case insensitive in like).
240        			FlgConservPermIn			IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
241        																	-- (valori 1/0/NULL) 1 indica fascicoli e unità documentarie afferenti  a procedimenti del dato tipo vanno conservati per tempo illimitato
242        			PeriodoConservIn			IN		DMT_PROCESS_TYPES.PERIODO_CONSERV%type DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
243        																	-- Periodo minimo di conservazione (espresso in anni) delle unità documentarie e archivistiche relative a procedimenti del dato tipo.
244        			CodSupportoConservIn		IN		DMT_PROCESS_TYPES.COD_SUPPORTO_CONSERV%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
245        																	-- Codice del supporto di conservazione delle unità documentarie e archivistiche relative a processi del dato tipo (valori da dizionario)
246        			AnnotazioniIn			IN		DMT_PROCESS_TYPES.NOTE%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
247        																	-- Annotazioni sul tipo
248        			FlgRichAbilXVisualizzIn		IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
249        																	-- (valori 1/0/NULL): se 1 è richiesta abilitazione esplicita per visualizzare processi del dato tipo  
250        			FlgRichAbilXGestIn		IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
251        																	-- (valori 1/0/NULL): se 1 è richiesta abilitazione esplicita per gestire (modificare, cancellare) processi del dato tipo  
252        			FlgRichAbilXAssegnIn		IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
253        																	-- (valori 1/0/NULL): se 1 è richiesta abilitazione esplicita per assegnare il dato tipo ad un processo 
254        			CIProvProcessTypeIn		IN 		DMT_PROCESS_TYPES.PROV_CI_PROCESS_TYPE%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
255        																	-- Codice identificativo del tipo di procedimento nel sistema di provenienza   
256        			FlgLockedIn				IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
257        																	-- (valori 1/0/NULL) Indicatore di tipo di processo riservato dal sistema e non modificabile/cancellabile da GUI
258        			FlgModFlussiWFIn			IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se i flussi workflow indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelle da inserire/modificare/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già specificati (e relativi al dominio di lavoro) in caso di tipo di processo da aggiornare
259        			XMLFlussiWFIn			IN		CLOB DEFAULT NULL,				-- Lista con i flussi workflow associati al tipo di processo (XML conforme a schema LISTA_STD.xsd)					
260        																	-- Ogni associazione a flusso è un tag "Riga" che può contenere le seguenti colonne:
261        																	-- 1: Identificativo (ROWID) con cui la relazione tipo processo - flusso è già stata registrata in banca dati
262        																	-- 2: Identificativo del flusso nel sistema di workflow (se Oracle WF è l'ITEM_TYPE)
263        																	-- 3: Nome del flusso nel sistema di workflow (ricerca case insesnsitive in like)
264        																	-- 4: Data di inizio validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità decorre da sempre.
265        																	-- 5: Data di fine validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità è illimitata.
266        																	-- 6: Id. del dominio in cui vale la relazione (un dominio ricompreso o coincidente con quello di lavoro). 
267        																	-- 	Se non specificato è il dominio di lavoro stesso e se questo è lo schema allora la relazione vale per tutti i sogg. prod./AOO dello schema
268        																	-- 7: (valori 1/0/NULL) Flag di record da eliminare
269        			IdUserRespIn			IN		INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
270        																	-- Identificativo(ID_USER) dell'attuale responsabile dei procedimenti del dato tipo (nel dominio Ente/AOO di lavoro)
271        																	-- viene ignorato se DesUserRespIn non è valorizzato	
272        			DesUserRespIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
273        																	-- Cognome e nome (DES_USER) dell'attuale responsabile dei procedimenti del dato tipo (nel dominio Ente/AOO di lavoro)
274        			IdUOCompetenteIn			IN		INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
275        																	-- Identificativo (ID_UO) della UO attualmente competente per i procedimenti del dato tipo (nel dominio Ente/AOO di lavoro)
276        																	-- viene ignorato se nessuno dei 2 argomenti successivi è valorizzato
277        			LivelliUOCompetenteIn		IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
278        																	-- Nri livello della UO della UO attualmente competente per i procedimenti del dato tipo (nel dominio Ente/AOO di lavoro) (tutti o alcuni; però se si specifica un livello è obbligatorio indicare tutti i livelli superiori; vanno specificati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; sono separati dal separatore dei livelli valido per il soggetto produttore/AOO di appartenenza della UO)
279        			DesUOCompetenteIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
280        																	-- Denominazione della UO attualmente competente per i procedimenti del dato tipo (nel dominio Ente/AOO di lavoro) (può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
281        			AttributiAddIn			IN		CLOB DEFAULT NULL,				-- XML contenente nomi e valori degli attributi dinamici da aggiornare (conforme allo schema SezioneCache.xsd) 
282        																	-- Gli attributi già presenti in DB e per i quali non c'è corrispondente nell'XML restano invariati
283        																	-- Per tutti gli attributi vale quanto segue:
284        																	-- Un attributo da settare è un tag "Variabile" dell'XML il cui tag "Nome" contiene il nome identificativo dell'attributo (ATTR_NAME di DMT_ATTRIBUTES_DEF)
285        																	-- Un attributo da settare è una variabile con tag "ValoreSemplice" se è un attributo a singolo valore e non strutturato (cioè con tipo diverso da COMPLEX)
286        																	-- altrimenti è una variabile con tag "Lista" che ha un'unica colonna con "Nro" pari a 1 se l'attributo non è strutturato, che ha invece tante colonne quanti gli attributi componenti (ordinate in base al loro NRO_ORD_IN_SUP) se l'attributo è complesso 
287        																	-- Nel caso di variabili con tag "Lista" i valori specificati nell'XML si aggiungono o sostituiscono quelli già presenti in DB a seconda che nell'XML sia presente o meno una variabile con tag "Nome" pari a #Append_<Nome attributo> e tag "ValoreSemplice" pari a 1  
288        																	-- In particolare se non sono specificati valori nell'XML (tag Lista vuoto) e se i valori non sono da aggiungere significa che tutti i valori dell'attributo già presenti in DB vanno rimossi
289        			FlgIgnoreWarningIn 		IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 0 o NULL significa che in presenza di WARNING la stored si comporta come in caso di errore; se 1 gli WARNING vengono ignorati
290        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
291        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
292        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
293        			WarningMsgOut			OUT		VARCHAR2,						-- Messaggio di warning (valorizzato solo se non c'è errore)
294        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
295        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
296        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
297        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
298        
299        	/*** Funzione di eliminazione di un tipo di processo/procedimento						***/	
300        	/*** Si può specificare se l'eliminazione deve essere fisica o solo logica (annullamento)		***/
301        	/*** Se non lo si specifica il sistema fa quella fisica se possibile, se no quella logica		***/
302        	function DProcessType(
303        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
304        																	-- (obblig). Codice identificativo del token di connessione
305        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
306        			IdProcessTypeIn   		IN 		DMT_PROCESS_TYPES.ID_PROCESS_TYPE%TYPE,	-- (obblig.)Identificativo del tipo di processo/procedimento 	
307        			FlgCancFisicaIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL): Se 1 si richiede la cancellazione fisica; se 0 l'annullamento logico; se non è valorizzato quella possibile delle 2. 		
308        			MotiviIn				IN		DMT_PROCESS_TYPES.MOTIVI_ANN%type,		-- Motivi della cancellazione/annullamento
309        			FlgIgnoreWarningIn 		IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 0 o NULL significa che in presenza di WARNING la stored si comporta come in caso di errore; se 1 gli WARNING vengono ignorati
310        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
311        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
312        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
313        			WarningMsgOut			OUT		VARCHAR2,						-- Messaggio di warning (valorizzato solo se non c'è errore)
314        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
315        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
316        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
317        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
318        
319        	/**** Funzione per estrarre i dati di un tipo di processo (tranne tipi di documenti, soggetti collegati e attributi) ****/
320        	FUNCTION LoadDettProcessType(
321        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
322        																	-- (obblig). Codice identificativo del token di connessione
323        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
324        			IdProcessTypeIO   		IN OUT   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type, 	-- (obblig) Identificativo del tipo di processo di cui caricare il dettaglio
325        			NomeOut				OUT		DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type,	-- Nome del tipo di processo/procedimento
326        			DescrizioneOut			OUT		DMT_PROCESS_TYPES.DES_PROCESS_TYPE%TYPE,	-- Descrizione dettagliata del tipo di processo/procedimento
327        			DtInizioVldOut			OUT		VARCHAR2,						-- Data di inizio validità (nel formato dato dal parametro di conf. FMT_STD_DATA).
328        			DtFineVldOut			OUT		VARCHAR2,						-- Data di fine validità (nel formato dato dal parametro di conf. FMT_STD_DATA).
329        			IdProcessTypeGenOut		OUT		DMT_PROCESS_TYPES.ID_PROCESS_TYPE_GEN%TYPE,
330        																	-- Identificativo del tipo di processo/procedimento in cui ricade
331        			NomeProcessTypeGenOut		OUT		DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%TYPE,	-- Nome del tipo di processo/procedimento in cui ricade
332        			FlgProcAmmOut			OUT		PLS_INTEGER,					-- (valori 1/0) Il valore 1 indica che è un procedimento amministrativo.
333        			FlgTipoIniziativaOut		OUT		VARCHAR2,						-- (valori P/U) Flag che indica il tipo di iniziativa: P=di Parte; U=d'Ufficio. 
334        			GGDurataPrevistaOut		OUT		DMT_PROCESS_TYPES.GG_DURATA_PREVISTA%type,-- Durata del procedimento (in giorni)
335        			BaseNormativaOut			OUT		DMT_PROCESS_TYPES.BASE_NORMATIVA%TYPE,	-- Base normativa del tipo di processo/procedimento			
336        			FlgSospendibileOut		OUT		PLS_INTEGER,					-- (valori 1/0) 1 indica che i termini possono essere sospesi
337        			NroMaxSospensioniOut		OUT		DMT_PROCESS_TYPES.NRO_MAX_SOSPENSIONI%type,
338        																	-- Massimo numero di sospensioni dei termini consentite
339        			FlgInterrompibileOut		OUT		PLS_INTEGER,					-- (valori 1/0) 1 indica che i termini possono essere interrotti e poi riprendere da zero
340        			NroMaxGGXInterrOut		OUT		DMT_PROCESS_TYPES.NRO_MAX_GG_X_INTERR%type,
341        																	-- Massimo numero di giorni dall'avvio di procedimento amministrativo del dato tipo entro cui il procedimento si può ancora interrompere
342        			FlgPartiEsterneOut		OUT		PLS_INTEGER,					-- (valori 1/0) 1 indica che parti del procedimento possono svolgersi all'esterno del soggetto produttore/AOO
343        			FlgSilenzioAssensoOut		OUT		PLS_INTEGER,					-- (valori 1/0) 1 indica che il procedimento è soggetto a silenzio-assenso
344        			GGSilenzioAssensoOut		OUT		DMT_PROCESS_TYPES.GG_SILENZIO_ASSENSO%type,
345        																	-- Giorni dall'avvio del procedimento trascorsi i quali decorre il silenzio-assenso
346        			FlgFascSFOut			OUT		VARCHAR2,						-- (valori F/S) Indica se in genere a un procedimento del dato tipo corrisponde un fascicolo (F) o un sottofascicolo (S)
347        			IdClassificazioneOut		OUT		DMT_PROCESS_TYPES.ID_CLASSIFICAZIONE%type,-- Id. della classificazione di fascicoli e/o unità documentarie afferenti a procedimenti del dato tipo.
348        			LivelliClassificazioneOut	OUT		VARCHAR2,						-- Stringa con i n.ri livello della classificazione di fascicoli e/o unità documentarie afferenti a procedimenti del dato tipo (separati dal separatore dei livelli di classificazione valido per il soggetto produttore/AOO)
349        			DesClassificazioneOut		OUT		VARCHAR2,						-- Descrizione della classificazione di fascicoli e/o unità documentarie afferenti  procedimenti del dato tipo 
350        			IdFolderTypeOut			OUT		DMT_PROCESS_TYPES.ID_CLASSIFICAZIONE%type,-- Id. del tipo dei fascicoli associati a procedimenti del dato tipo.
351        			NomeFolderTypeOut			OUT		DMT_FOLDER_TYPES.NOME_FOLDER_TYPE%type,	-- Nome del tipo dei fascicoli associati a procedimenti del dato tipo
352        			FlgConservPermOut			OUT		PLS_INTEGER,					-- (valori 1/0) 1 indica fascicoli e unità documentarie afferenti  a procedimenti del dato tipo vanno conservati per tempo illimitato
353        			PeriodoConservOut			OUT		DMT_PROCESS_TYPES.PERIODO_CONSERV%type,	-- Periodo minimo di conservazione (espresso in anni) delle unità documentarie e archivistiche relative a procedimenti del dato tipo.
354        			CodSupportoConservOut		OUT		DMT_PROCESS_TYPES.COD_SUPPORTO_CONSERV%type,
355        																	-- Codice del supporto di conservazione delle unità documentarie e archivistiche relative a processi del dato tipo
356        			AnnotazioniOut			OUT		DMT_PROCESS_TYPES.NOTE%TYPE,			-- Annotazioni sul tipo
357        			FlgRichAbilXVisualizzOut	OUT		PLS_INTEGER,					-- (valori 1/0): se 1 è richiesta abilitazione esplicita per visualizzare processi del dato tipo  
358        			FlgRichAbilXGestOut		OUT		PLS_INTEGER,					-- (valori 1/0): se 1 è richiesta abilitazione esplicita per gestire (modificare, cancellare) processi del dato tipo  
359        			FlgRichAbilXAssegnOut		OUT		PLS_INTEGER,					-- (valori 1/0): se 1 è richiesta abilitazione esplicita per assegnare il dato tipo ad un processo 
360        			CIProvProcessTypeOUT		OUT 		DMT_PROCESS_TYPES.PROV_CI_PROCESS_TYPE%TYPE,
361        																	-- Codice identificativo del tipo di procedimento nel sistema di provenienza   
362        			FlgLockedOut			OUT		PLS_INTEGER,					-- (valori 1/0) Indicatore di tipo di processo riservato dal sistema e non modificabile/cancellabile da GUI
363        			RowidOut				OUT		VARCHAR2,						-- Rowid del record del tipo di processo
364        			XMLFlussiWFOut			OUT		NOCOPY CLOB,					-- Lista con i flussi workflow associati al tipo di processo (XML conforme a schema LISTA_STD.xsd)					
365        																	-- Contiene solo i flussi associati nel dominio connesso o suoi domini ricompresi e non relativi ad altra applicazione (o sua istanza)					
366        																	-- Ogni associazione a flusso è un tag "Riga" che contiene le seguenti colonne:
367        																	-- 1: Identificativo (ROWID) con cui la relazione tipo processo - flusso è già stata registrata in banca dati
368        																	-- 2: Identificativo del flusso nel sistema di workflow (se Oracle WF è l'ITEM_TYPE)
369        																	-- 3: Nome del flusso nel sistema di workflow (ricerca case insesnsitive in like)
370        																	-- 4: Data di inizio validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità decorre da sempre.
371        																	-- 5: Data di fine validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità è illimitata.
372        																	-- 6: Id. del dominio in cui vale la relazione (se NULL la relazione vale per tutti i sogg. prod./AOO dello schema)
373        			IdUserRespOut			OUT		INTEGER,						-- Identificativo(ID_USER) dell'attuale responsabile dei procedimenti del dato tipo (nel dominio Ente/AOO di lavoro)	
374        			DesUserRespOut			OUT		VARCHAR2,						-- Cognome e nome (DES_USER) dell'attuale responsabile dei procedimenti del dato tipo (nel dominio Ente/AOO di lavoro)
375        			IdUOCompetenteOut			OUT		INTEGER,						-- Identificativo (ID_UO) della UO attualmente competente per i procedimenti del dato tipo (nel dominio Ente/AOO di lavoro)
376        			LivelliUOCompetenteOut		OUT		VARCHAR2,						-- Nri livello della UO della UO attualmente competente per i procedimenti del dato tipo (nel dominio Ente/AOO di lavoro) (tutti o alcuni; però se si specifica un livello è obbligatorio indicare tutti i livelli superiori; vanno specificati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; sono separati dal separatore dei livelli valido per il soggetto produttore/AOO di appartenenza della UO)
377        			DesUOCompetenteOut		OUT		VARCHAR2,						-- Denominazione della UO attualmente competente per i procedimenti del dato tipo (nel dominio Ente/AOO di lavoro)
378        			AttributiAddOut			OUT		NOCOPY CLOB,					-- Lista degli eventuali ulteriori attributi con cui caratterizzare il tipo procedimento/processo (XML conforme a schema LISTA_STD.xsd)
379        																	-- Ogni attributo è un tag "Riga" che contiene le seguenti colonne:
380        																	-- 1: N.ro (valori da 1 a n) del riquadro (fieldset) in cui mostrare l'attributo
381        																	-- 2: Nome identificativo dell'attributo (ATTR_NAME)
382        																	-- 3: Label del campo con cui rappresentare l'attributo 
383        																	-- 4: Tipo di attributo. Valori: DATE, DATETIME, TEXT, TEXT-AREA, CHECK, INTEGER, EURO, DECIMAL, COMBO-BOX, LISTA
384        																	-- 5: N.ro massimo di caratteri/cifre
385        																	-- 6: Larghezza del campo con cui rappresentare l'attributo (size)
386        																	-- 7: Valore dell'attributo
387        																	-- 8: Label del riquadro (fieldset) in cui mostrare l'attributo
388        																	-- 9: (valori 1/0) 1 indica che l'attributo è obbligatorio, 0 che è facoltativo
389        																	-- 10: Altezza (in nro righe) del campo con cui rappresentare l'attributo (se TEXT-AREA)
390        																	-- 11:(valori 1/0) 1 indica se l'attributo è modificabile, 0 che è in sola visualizzazione   
391        			BachSizeOut				OUT		PLS_INTEGER,					-- Indica il massimo n.ro di record per ogni pagina da mostrare nelle liste dei flussi e dei responsabili
392        			FlgMostraAltriAttrOut		OUT		PLS_INTEGER,					-- (valori 1/0) Se 1 nella GUI vanno mostrati gli attributi addizionali (ce ne sono di visibile all'utente), se 0 no
393        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
394        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
395        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
396        			return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
397        
398        	/**** Funzione per ottenere la lista dei possibili "attori" di un dato tipo di processo/procedimento 						****/
399        	FUNCTION TrovaAttoriProcType(
400        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
401        																	-- (obblig). Codice identificativo del token di connessione
402        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
403        			IdProcessTypeIO   		IN OUT   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type,	-- Identificativo del tipo di processo/procedimento di cui estrarre gli attori. 	
404        																	-- In output, salvo in caso di errore, è sempre valorizzato	
405        			NomeProcessTypeIO			IN OUT	DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type, -- Nome del tipo di processo/procedimento di cui estrarre gli attori (o suo inizio; ricerca case-insensitive in like).
406        																	-- In output, salvo in caso di errore, è sempre valorizzato
407        			FlgNaturaAttoreIn			IN		VARCHAR2 DEFAULT NULL,				-- 1° filtro di ricerca: se valorizzato gli attori da estrarre sono solo quelli che  possono essere specificati come: 
408        																	-- E	=	Soggetti esterni
409        																	-- I	=	Soggetti interni (qualsiasi)
410        																	-- UT	=	Utenti del sistema
411        																	-- SV	=	Scrivanie virtuali	
412        																	-- UO	=	Unità organizzative
413        																	-- G	=	Gruppi 
414        																	-- R	=	Ruoli amministrativi
415        			FlgSoloVldIn 			IN 		INTEGER DEFAULT 1, 				-- (valori 1/0/NULL) 2° filtro di ricerca: Se 1 indica se si devono estrarre solo gli attori validi alla data odierna
416        			TsVldIn				IN 		VARCHAR2 DEFAULT NULL,				-- 3° filtro di ricerca: Stinga con il timestamp (nel formato GG/MM/AAAA HH24:MI:SS) a cui devono essere validi gli attori 
417        			NomeAttoreIn			IN		VARCHAR2 DEFAULT NULL,				-- 4° filtro di ricerca: nome dell'attore (ricerca case insensitive in like; il % finale non viene forzato)
418        			------------- inizio argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
419        			ColOrderByIO			IN OUT	VARCHAR2,						-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso (si può ordinare per tutte le colonne tranne la 1, 4 , 7). Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
420        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
421        																	-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
422        			FlgDescOrderByIO  		IN OUT	VARCHAR2,						-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
423        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.			
424        			FlgSenzaPaginazioneIn 		IN 		PLS_INTEGER DEFAULT NULL,            	-- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
425        			NroPaginaIO      			IN OUT	PLS_INTEGER,                  		-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
426           			BachSizeIO				IN OUT	PLS_INTEGER,					-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)  
427        																	-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro				
428        			OverFlowLimitIn			IN		PLS_INTEGER DEFAULT NULL,			-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow
429        			FlgSenzaTotIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
430        			NroTotRecOut			OUT		PLS_INTEGER,					-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina)
431             			NroRecInPaginaOut 		OUT   	PLS_INTEGER,                     		-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
432        			------------- fine argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
433        			ListaXMLOut				OUT		NOCOPY CLOB,					-- Lista degli attributi trovati (XML conforme a schema LISTA_STD.xsd)
434        																	-- Ogni attributo è un tag Riga che può contenere le seguenti colonne: 
435        																	-- 1: Identificativo dell'attore (rowid del record in DB)
436        																	-- 2: Nome dell'attore 
437        																	-- 3: N.ro d'ordine dell'attore tra tutti quelli del dato tipo di procedimento/processo	
438        																	-- 4: Chi/cosa può essere un attore del dato tipo (soggetto esterno/interno ecc.) 
439        																	-- 5: (valori 1/0) Se 1 è un attore che c'è obbligatoriamente nei processi del dato tipo
440        																	-- 6: Massimo numero di attori del dato tipo che possono esserci nei processi del dato tipo 
441        																	-- 7: (valori 1/0) Se 1 è un attore valido alla data odierna
442        																	-- 8: Data di inzio validità dell'attore (nel formato dato dal parametro di conf. FMT_STD_DATA)
443        																	-- 9: Data di fine validità dell'attore (nel formato dato dal parametro di conf. FMT_STD_DATA)
444        																	-- 10: (valori 1/0) Se 1 è un attore riservato dal sistema e non modificabile/cancellabile da applicativo
445        			FlgAbilInsOut	 		OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se 1 si ha abilitazione a inserimento di attori
446        			FlgAbilUpdOut 			OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se 1 si ha abilitazione a modifica di attori
447        			FlgAbilDelOut 			OUT 		PLS_INTEGER,            			-- (valori 1/0) Se 1 si ha abilitazione a cancellazione di attori
448        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
449        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
450        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
451        			return PLS_INTEGER;
452        
453        
454        	/****** Estrae i dati di un attore di un dato tipo di processo/procedimento *****/
455        	function LoadDettAttoreProcType(
456        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
457        																	-- (obblig). Codice identificativo del token di connessione
458        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
459        			RowidIO				IN OUT	VARCHAR2,						-- Rowid del record-attore di cui estrarre i dati
460        			IdProcessTypeIO   		IN OUT   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type, 	-- Identificativo del tipo di processo cui è relativo l'attore
461        			NomeProcessTypeOut		OUT		DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type,	-- Nome del tipo di processo/procedimento
462        			AttoreIO				IN OUT	DMT_PROCESS_TYPE_SOGG.RUOLO_SOGG_IN_PROC%type,	
463        																	-- Nome dell'attore (ricerca case-insensitive)
464        			FlgIntEstOUT			OUT		VARCHAR2,						-- Indica se l'attore può essere: E = Solo un soggetto esterno; I = Solo un soggetto interno; NULL = Sia un soggetto interno che esterno
465        			FlgUserOut				OUT		PLS_INTEGER,					-- (valori 1/0) Se 1 l'attore può essere un utente del sistema
466        			FlgUOOut				OUT		PLS_INTEGER,					-- (valori 1/0) Se 1 l'attore può essere una UO		
467        			FlgScrivVirtOut			OUT		PLS_INTEGER,					-- (valori 1/0) Se 1 l'attore può essere una scrivania virtuale				
468        			FlgGruppoOut			OUT		PLS_INTEGER,					-- (valori 1/0) Se 1 l'attore può essere una gruppo di soggetti interni				
469        			FlgRuoloOut				OUT		PLS_INTEGER,					-- (valori 1/0) Se 1 l'attore può essere un ruolo amministrativo contestualizzato				
470        			NroPosizioneOut			OUT		DMT_PROCESS_TYPE_SOGG.NRO_POSIZIONE%type,	-- N.ro d'ordine dell'attore tra quelli del dato tipo di processo/procedimento		
471        			FlgObbligatorioOut		OUT		PLS_INTEGER,					-- (valori 1/0) Se 1 è un attore che deve esserci sempre nei processi/procedimenti del dato tipo
472        			FlgPrincipaleOut			OUT		PLS_INTEGER, 					-- (valori 1/0) Se 1 è un attore principale
473        			MaxNroOccorrenzeOut		OUT		DMT_PROCESS_TYPE_SOGG.MAX_NUM_OCC%type,	-- Massimo n.ro di attori del dato tipo che ci possono essere nei processi/procedimenti del dato tipo 
474        			DtInizioVldOut			OUT		VARCHAR2,						-- Data di inizio validità (nel formato dato dal parametro di conf. FMT_STD_DATA).
475        			DtFineVldOut			OUT		VARCHAR2,						-- Data di fine validità (nel formato dato dal parametro di conf. FMT_STD_DATA).
476        			FlgLockedOut			OUT		PLS_INTEGER,					-- (valori 1/0) Indicatore di attore riservato dal sistema e non modificabile/cancellabile da GUI
477        			XMLControlliOut			OUT		NOCOPY CLOB,					-- Lista con i controlli di presenza dell'attore da fare prima o dopo una certa attività WF (XML conforme a schema LISTA_STD.xsd)					
478        																	-- Ogni controllo è un tag "Riga" che contiene le seguenti colonne:
479        																	-- 1: Identificativo del flusso WF in cui si applica il controllo (se Oracle WF è l'ITEM_TYPE)
480        																	-- 2: Nome del flusso WF in cui si applica il controllo (ricerca case insensitive in like)
481        																	-- 3: Internal name dell'attività WF prima/dopo cui si applica il controllo (se Oracle WF è l'ACTIVITY_NAME)
482        																	-- 4: Display name dell'attività WF prima/dopo cui si applica il controllo (ricerca case insensitive in like)
483        																	-- 5: (obblig) (valori B/A) Indica se il controllo deve scattare prima (B) o dopo (A) l'attività
484        																	-- 6: (valori 1/0/NULL) Se 1 il controllo non deve essere bloccante ma solo uno warning
485        																	-- 7: Lista degli esiti dell'attività (i loro meaning, nel caso di Oracle WF) - separati da ; - per cui vale il controllo se di tipo "after" (il valore <Qualsiasi esito> indica qualsiasi esito)
486        																	-- 8:  Minimo numero di attori del dato tipo di cui si deve controllare la presenza (se NULL si intende 1)
487        																	-- 9: Id. del dominio in cui vale il controllo
488        																	-- 	 Se NULL il controllo vale per tutti i sogg. prod./AOO dello schema
489        			BachSizeOut				OUT		PLS_INTEGER,					-- Indica il massimo n.ro di record per ogni pagina da mostrare nella lista dei controlli
490        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
491        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
492        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
493        			return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
494        
495        	/***** funzione per creare o modificare un attore di un dato tipo di processo/procedimento *****/ 
496        	function IUAttoreProcType(
497        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
498        																	-- (obblig). Codice identificativo del token di connessione
499        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
500        			CIAttoreIO				IN OUT	VARCHAR2,						-- Codice (è il rowid del record di DB ) che identifica l'attore da modificare.
501        																	-- Se in input non è valorizzato si intende che l'attore è da creare ex-novo
502        																	-- In output, salvo in caso di errore, è sempre valorizzato
503        			IdProcessTypeIO   		IN OUT   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type, 	-- Identificativo del tipo di processo cui è relativo l'attore. E' obbligatorio se CIAttoreIO è NULL in input (attore da inserire)
504        																	-- In output, salvo in caso di errore, è sempre valorizzato	
505        			AttoreIn				IN		DMT_PROCESS_TYPE_SOGG.RUOLO_SOGG_IN_PROC%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
506        																	-- (obblig.) Nome dell'attore
507        			FlgIntEstIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
508        																	-- Indica se l'attore può essere: E = Solo un soggetto esterno; I = Solo un soggetto interno; NULL = Sia un soggetto interno che esterno
509        			FlgUserIn				IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
510        																	-- (valori 1/0/NULL) Se 1 l'attore può essere un utente del sistema
511        			FlgUOIn				IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
512        																	-- (valori 1/0/NULL) Se 1 l'attore può essere una UO		
513        			FlgScrivVirtIn			IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
514        																	-- (valori 1/0/NULL) Se 1 l'attore può essere una scrivania virtuale				
515        			FlgGruppoIn				IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
516        																	-- (valori 1/0/NULL) Se 1 l'attore può essere una gruppo di soggetti interni				
517        			FlgRuoloIn				IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
518        																	-- (valori 1/0/NULL) Se 1 l'attore può essere un ruolo amministrativo contestualizzato				
519        			NroPosizioneIn			IN		DMT_PROCESS_TYPE_SOGG.NRO_POSIZIONE%type DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
520        																	--  N.ro d'ordine dell'attore tra quelli del dato tipo di processo/procedimento (se NULL e se l'attore è da creare ex-novo viene messo per ultimo tra quelli del dato tipo processo/procedimento)		
521        			FlgObbligatorioIn			IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
522        																	-- (valori 1/0/NULL) Se 1 è un attore che deve esserci sempre nei processi/procedimenti del dato tipo
523        			FlgPrincipaleIn			IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
524        																	-- (valori 1/0/NULL) Se 1 è un attore principale
525        			MaxNroOccorrenzeIn		IN		DMT_PROCESS_TYPE_SOGG.MAX_NUM_OCC%type DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
526        																	-- Massimo n.ro di attori del dato tipo che ci possono essere nei processi/procedimenti del dato tipo 
527        			DtInizioVldIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
528        																	-- Data di inizio validità (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende attore valido da sempre
529        			DtFineVldIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
530        																	-- Data di fine validità (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende attore valido illimitatamente
531        			FlgLockedIn				IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
532        																	-- (valori 1/0/NULL) Indicatore di attore riservato dal sistema e non modificabile/cancellabile da GUI
533        			FlgModControlliIn			IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se i controlli sulla presenza dell'attore indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da aggiungere) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già specificati (e relativi al dominio di lavoro) in caso di attore da aggiornare
534        			XMLControlliIn			IN		CLOB  DEFAULT NULL,				-- Lista con i controlli di presenza dell'attore da fare prima o dopo una certa attività WF (XML conforme a schema LISTA_STD.xsd)					
535        																	-- Ogni controllo è un tag "Riga" che contiene le seguenti colonne:
536        																	-- 1: Identificativo del flusso WF in cui si applica il controllo (se Oracle WF è l'ITEM_TYPE)
537        																	-- 2: Nome del flusso WF in cui si applica il controllo (ricerca case insensitive in like)
538        																	-- 3: Internal name dell'attività WF prima/dopo cui si applica il controllo (se Oracle WF è l'ACTIVITY_NAME)
539        																	-- 4: Display name dell'attività WF prima/dopo cui si applica il controllo (ricerca case insensitive in like)
540        																	-- 5: (obblig) (valori B/A) Indica se il controllo deve scattare prima (B) o dopo (A) l'attività
541        																	-- 6: (valori 1/0/NULL) Se 1 il controllo non deve essere bloccante ma solo uno warning
542        																	-- 7: Lista degli esiti dell'attività (i loro meaning, nel caso di Oracle WF) - separati da ; - per cui vale il controllo se di tipo "after" (il valore <Qulsiasi esito> indica qualsiasi esito)
543        																	--     Se nessun esito è specificato il controllo "after" vale per tutti gli eventuali esiti.
544        																	-- 8:  Minimo numero di attori del dato tipo di cui si deve controllare la presenza (se NULL si intende 1)
545        																	-- 9: Id. del dominio in cui vale il controllo
546        																	-- 	 Se non specificato è il dominio di lavoro stesso e se questo è lo schema allora il controllo vale per tutti i sogg. prod./AOO dello schema
547        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
548        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
549        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
550        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
551        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
552        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
553        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
554        
555        	/****** funzione per creare un attore in un set di tipi di processi / procedimenti								******/	
556        	/*****  se in uno o più dei processi l'attore già esiste non viene dato errore e viene aggiornata l'attore già esistente 	******/
557        	function AddAttore_ProcTy(	
558        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
559        																	-- (obblig). Codice identificativo del token di connessione
560        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
561        			AttoreIn				IN		DMT_PROCESS_TYPE_SOGG.RUOLO_SOGG_IN_PROC%type,
562        																	-- (obblig.) Nome dell'attore
563        			ProcessTypesXMLIn			IN		CLOB,							-- Lista dei tipi di processi/procedimenti in cui aggiungere/modificare l'attore(XML conforme a schema LISTA_STD.xsd)					
564        																	-- Ogni tipo di procedimento/processo è tag "Riga" che può contenere le seguenti colonne:
565        																	-- 1: Identificativo del tipo di processo/procedimento
566        																	-- 2: Nome del tipo di processo/procedimento (o suo inizio: ricerca case-insensitive in like)
567        			FlgIntEstIn				IN		VARCHAR2 DEFAULT NULL,				-- Indica se l'attore può essere: E = Solo un soggetto esterno; I = Solo un soggetto interno; NULL = Sia un soggetto interno che esterno
568        			FlgUserIn				IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 l'attore può essere un utente del sistema
569        			FlgUOIn				IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 l'attore può essere una UO		
570        			FlgScrivVirtIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 l'attore può essere una scrivania virtuale				
571        			FlgGruppoIn				IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 l'attore può essere una gruppo di soggetti interni				
572        			FlgRuoloIn				IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 l'attore può essere un ruolo amministrativo contestualizzato				
573        			NroPosizioneIn			IN		DMT_PROCESS_TYPE_SOGG.NRO_POSIZIONE%type DEFAULT NULL,
574        																	--  N.ro d'ordine dell'attore tra quelli dei dati tipi di processo/procedimento (se NULL e se l'attore è da aggiungere viene messo per ultimo tra quelli dei dato tipo processo/procedimento)		
575        			FlgObbligatorioIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 è un attore che deve esserci sempre nei processi/procedimenti dei dati tipi
576        			FlgPrincipaleIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 è un attore principale
577        			MaxNroOccorrenzeIn		IN		DMT_PROCESS_TYPE_SOGG.MAX_NUM_OCC%type DEFAULT NULL,
578        																	-- Massimo n.ro di attori del dato tipo che ci possono essere nei processi/procedimenti dei dati tipi 
579        			DtInizioVldIn			IN		VARCHAR2 DEFAULT NULL,				-- Data di inizio validità (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende attore valido da sempre
580        			DtFineVldIn				IN		VARCHAR2 DEFAULT NULL,				-- Data di fine validità (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende attore valido illimitatamente
581        			FlgLockedIn				IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Indicatore di attore riservato dal sistema e non modificabile/cancellabile da GUI
582        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
583        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
584        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
585        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
586        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
587        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
588        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
589        
590        
591        	/****** Funzione di eliminazione di un attore di un dato tipo di processo/procedimento ******/	
592        	function DAttoreProcType(
593        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
594        																	-- (obblig). Codice identificativo del token di connessione
595        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
596        			RowidIn				IN 		VARCHAR2 DEFAULT NULL,				-- Rowid del record-attore da cancellare
597        			IdProcessTypeIn   		IN	   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type DEFAULT NULL, 
598        																	-- Identificativo del tipo di processo cui è relativo l'attore
599        			AttoreIn				IN 		DMT_PROCESS_TYPE_SOGG.RUOLO_SOGG_IN_PROC%type DEFAULT NULL, 
600        																	-- Nome dell'attore (ricerca case insensitive)
601        			MotiviIn				IN		DMT_ACTIVITIES.NOTE%type,			-- Motivi della cancellazione
602        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
603        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
604        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
605        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
606        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
607        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
608        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
609        
610        
611        	/**** Funzione per ottenere la lista degli attributi di un dato tipo di processo/procedimento 							****/
612        	FUNCTION TrovaAttributiProcType(
613        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
614        																	-- (obblig). Codice identificativo del token di connessione
615        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
616        			IdProcessTypeIO   		IN OUT   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type,	-- Identificativo del tipo di processo/procedimento di cui estrarre gli attributi custom. 	
617        																	-- In output, salvo in caso di errore, è sempre valorizzato	
618        			NomeProcessTypeIO			IN OUT	DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type, 	-- Nome del tipo di processo/procedimento di cui estrarre gli attributi custom (o suo inizio; ricerca case-insensitive in like).
619        																	-- In output, salvo in caso di errore, è sempre valorizzato
620        			FlgSoloVldIn 			IN 		INTEGER DEFAULT 1, 				-- (valori 1/0/NULL) 1° filtro di ricerca: Se 1 indica se si devono estrarre solo gli attributi validi alla data odierna
621        			TsVldIn				IN 		VARCHAR2 DEFAULT NULL,				-- 2° filtro di ricerca: Stinga con il timestamp (nel formato GG/MM/AAAA HH24:MI:SS) a cui devono essere validi gli attributi 
622        			AttrLabelIn				IN		VARCHAR2 DEFAULT NULL,				-- 3° filtro di ricerca: etichetta dell'attributo (ricerca case insensitive in like; il % finale non viene forzato)
623        			------------- inizio argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
624        			ColOrderByIO			IN OUT	VARCHAR2,						-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso (si può ordinare per tutte le colonne tranne la 1, 7). Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
625        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
626        																	-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
627        			FlgDescOrderByIO  		IN OUT	VARCHAR2,						-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
628        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.			
629        			FlgSenzaPaginazioneIn 		IN 		PLS_INTEGER DEFAULT NULL,            	-- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
630        			NroPaginaIO      			IN OUT	PLS_INTEGER,                  		-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
631           			BachSizeIO				IN OUT	PLS_INTEGER,					-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)  
632        																	-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro				
633        			OverFlowLimitIn			IN		PLS_INTEGER DEFAULT NULL,			-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow
634        			FlgSenzaTotIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
635        			NroTotRecOut			OUT		PLS_INTEGER,					-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina)
636             			NroRecInPaginaOut 		OUT   	PLS_INTEGER,                     		-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
637        			------------- fine argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
638        			ListaXMLOut				OUT		NOCOPY CLOB,					-- Lista degli attributi trovati (XML conforme a schema LISTA_STD.xsd)
639        																	-- Ogni attributo è un tag Riga che può contenere le seguenti colonne: 
640        																	-- 1: Identificativo del record dell'attributo se già registrato in DB (rowid del record in DB)
641        																	-- 2: Nome identificativo dell'attributo (internal name)
642        																	-- 3: Label con cui l'attributo viene mostrato nella GUI (display name)
643        																	-- 4: N.ro d'ordine dell'attributo tra tutti quelli del dato tipo di procedimento/processo	
644        																	-- 5: (valori 1/0) Se 1 è un attributo che deve essere obbligatoriamente valorizzato nei processi del dato tipo
645        																	-- 6: Massimo numero di valori del dato attributo che possono esserci nei processi del dato tipo 
646        																	-- 7: (valori 1/0) Se 1 è un attributo valido alla data odierna
647        																	-- 8: Data di inzio validità dell'attributo (nel formato dato dal parametro di conf. FMT_STD_DATA)
648        																	-- 9: Data di fine validità dell'attributo (nel formato dato dal parametro di conf. FMT_STD_DATA)
649        																	-- 10: (valori 1/0) Se 1 è un attributo riservato dal sistema e non modificabile/cancellabile da applicativo
650        			FlgAbilInsOut	 		OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se 1 si ha abilitazione a inserimento di attributi
651        			FlgAbilUpdOut 			OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se 1 si ha abilitazione a modifica di attributi
652        			FlgAbilDelOut 			OUT 		PLS_INTEGER,            			-- (valori 1/0) Se 1 si ha abilitazione a cancellazione di attributi
653        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
654        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
655        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
656        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
657        
658        	/********* funzione per mostrare i dati di un'associazione di attributo dinamico ad un dato tipo di processo/procedimento **********/
659        	function LoadDettAttributoProcType(
660        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
661        																	-- (obblig). Codice identificativo del token di connessione
662        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
663        			RowidIO				IN OUT	VARCHAR2,						-- Rowid del record-associazione di cui ricavare i dati
664        			IdProcessTypeIO   		IN OUT   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type, 	-- Identificativo del tipo di processo cui è relativo l'attributo
665        			NomeProcessTypeOut		OUT		DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type,	-- Nome del tipo di processo/procedimento
666        			NomeIO				IN OUT	DMT_ATTRIBUTES_DEF.ATTR_NAME%type,		-- Nome identificativo dell'attributo associato (ricerca case-insensitive)
667        			LabelOut				OUT		DMT_ATTRIBUTES_DEF.ATTR_LABEL%type,		-- Label con cui l'attributo associato appare nella GUI. 
668        			NroPosizioneOut			OUT		PLS_INTEGER,					-- N.ro (valori da 1 a n) che indica la posizione dell'attributo tra tutti quelli associati al dato tipo proc.
669        			FlgObbligOut			OUT		PLS_INTEGER,					-- (valori 1/0) 1 indica che è un attributo obbligatorio per i processi del dato tipo
670        			MaxNumValuesOut			OUT		INTEGER,						-- Massimo numero di valori possibili per l'attributo
671        			DtInizioVldOut			OUT		VARCHAR2,						-- Data di inizio validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA).
672        			DtFineVldOut			OUT		VARCHAR2,						-- Data di fine validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA).
673        			FlgLockedOut			OUT		PLS_INTEGER,					-- (valori 1/0) Indicatore di associazione ad attributo riservata dal sistema e non modificabile/cancellabile da GUI
674        			XMLControlliOut			OUT		NOCOPY CLOB,					-- Lista con i controlli di presenza di valori dell'attributo da fare prima o dopo una certa attività WF (XML conforme a schema LISTA_STD.xsd)					
675        																	-- Ogni controllo è un tag "Riga" che contiene le seguenti colonne:
676        																	-- 1: Identificativo del flusso WF in cui si applica il controllo (se Oracle WF è l'ITEM_TYPE)
677        																	-- 2: Nome del flusso WF in cui si applica il controllo (ricerca case insensitive in like)
678        																	-- 3: Internal name dell'attività WF prima/dopo cui si applica il controllo (se Oracle WF è l'ACTIVITY_NAME)
679        																	-- 4: Display name dell'attività WF prima/dopo cui si applica il controllo (ricerca case insensitive in like)
680        																	-- 5: (obblig) (valori B/A) Indica se il controllo deve scattare prima (B) o dopo (A) l'attività
681        																	-- 6: (valori 1/0/NULL) Se 1 il controllo non deve essere bloccante ma solo uno warning
682        																	-- 7: Lista degli esiti dell'attività (i loro meaning, nel caso di Oracle WF) - separati da ; - per cui vale il controllo se di tipo "after" (il valore <Qualsiasi esito> indica qualsiasi esito)
683        																	-- 8:  Minimo numero di valori del dato attributo di cui si deve controllare la presenza (se NULL si intende 1)
684        																	-- 9: Id. del dominio in cui vale il controllo
685        																	-- 	 Se NULL il controllo vale per tutti i sogg. prod./AOO dello schema
686        			BachSizeOut				OUT		PLS_INTEGER,					-- Indica il massimo n.ro di record per ogni pagina da mostrare nella lista dei controlli
687        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
688        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
689        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
690        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon, altrimenti 0 (in caso di errore)
691        
692        	/********* funzione per creare o modificare un'associazione di attributo dinamico ad un dato tipo di processo/procedimento **********/
693        	function IUAttributoProcType(
694        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
695        																	-- (obblig). Codice identificativo del token di connessione
696        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
697        			RowidIO				IN OUT	VARCHAR2,						-- Rowid del record-associazione da modificare. Se non valorizzato l'associazione è da inserire ex-novo
698        																	-- In output, salvo in caso di errore, è sempre valorizzato	
699        			IdProcessTypeIO   		IN OUT   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type, 	-- Identificativo del tipo di processo cui è relativa l'associazione. E' obbligatorio se RowidIO è NULL in input (attributo da associare)
700        																	-- In output, salvo in caso di errore, è sempre valorizzato	
701        			NomeIn				IN 		DMT_ATTRIBUTES_DEF.ATTR_NAME%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
702        																	-- Nome identificativo dell'attributo da associare. Obbligatorio se l'argomento successivo non è valorizzato.
703        			LabelIn				IN		DMT_ATTRIBUTES_DEF.ATTR_LABEL%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
704        																	-- Label con cui l'attributo da associare appare nella GUI. Obbligatorio se l'argomento precedente non è valorizzato
705        			NroPosizioneIn			IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),	
706        																	-- N.ro (valori da 1 a n) che indica la posizione che deve avere l'attributo tra tutti quelli associati al dato tipo proc.
707        																	-- Se NULL e l'associazione è da creare il n.ro posizione viene settato pari al max. n.ro degli attributi associati + 1
708        			FlgObbligIn				IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
709        																	-- (valori 1/0/NUL) 1 indica che è un attributo obbligatorio per i processi del dato tipo
710        			MaxNumValuesIn			IN		INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
711        																	-- Massimo numero di valori possibili per l'attributo
712        			DtInizioVldIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
713        																	-- Data di inizio validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende da sempre
714        			DtFineVldIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
715        																	-- Data di fine validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende per sempre
716        			FlgLockedIn				IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
717        																	-- (valori 1/0/NULL) Indicatore di associazione ad attributo riservata dal sistema e non modificabile/cancellabile da GUI
718        			FlgModControlliIn			IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se i controlli sulla presenza dell'attributo indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da aggiungere) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già specificati (e relativi al dominio di lavoro) in caso di attributo da aggiornare
719        			XMLControlliIn			IN		CLOB  DEFAULT NULL,				-- Lista con i controlli di presenza dell'attributo da fare prima o dopo una certa attività WF (XML conforme a schema LISTA_STD.xsd)					
720        																	-- Ogni controllo è un tag "Riga" che contiene le seguenti colonne:
721        																	-- 1: Identificativo del flusso WF in cui si applica il controllo (se Oracle WF è l'ITEM_TYPE)
722        																	-- 2: Nome del flusso WF in cui si applica il controllo (ricerca case insensitive in like)
723        																	-- 3: Internal name dell'attività WF prima/dopo cui si applica il controllo (se Oracle WF è l'ACTIVITY_NAME)
724        																	-- 4: Display name dell'attività WF prima/dopo cui si applica il controllo (ricerca case insensitive in like)
725        																	-- 5: (obblig) (valori B/A) Indica se il controllo deve scattare prima (B) o dopo (A) l'attività
726        																	-- 6: (valori 1/0/NULL) Se 1 il controllo non deve essere bloccante ma solo uno warning
727        																	-- 7: Lista degli esiti dell'attività (i loro meaning, nel caso di Oracle WF) - separati da ; - per cui vale il controllo se di tipo "after" (il valore <Qualsiasi esito> indica qualsiasi esito)
728        																	--     Se nessun esito è specificato il controllo "after" vale per tutti gli eventuali esiti.
729        																	-- 8:  Minimo numero di valori del dato attributo di cui si deve controllare la presenza (se NULL si intende 1)
730        																	-- 9: Id. del dominio in cui vale il controllo
731        																	-- 	 Se non specificato è il dominio di lavoro stesso e se questo è lo schema allora il controllo vale per tutti i sogg. prod./AOO dello schema
732        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
733        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
734        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
735        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
736        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
737        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
738        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon, altrimenti 0 (in caso di errore)
739        
740        	/****** funzione per associare un'attributo custom ad un set di tipi di processi / procedimenti								******/	
741        	/*****  se ad uno o più dei processi l'attributo è già associato non viene dato errore e viene aggiornata l'associazione già esistente 	******/
742        	function AddAttributo_ProcTy(	
743        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
744        																	-- (obblig). Codice identificativo del token di connessione
745        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
746        			NomeIn				IN 		DMT_ATTRIBUTES_DEF.ATTR_NAME%type DEFAULT NULL,
747        																	-- Nome identificativo dell'attributo da associare. Obbligatorio se l'argomento successivo non è valorizzato.
748        			LabelIn				IN		DMT_ATTRIBUTES_DEF.ATTR_LABEL%type DEFAULT NULL,
749        																	-- Label con cui l'attributo da associare appare nella GUI. Obbligatorio se l'argomento precedente non è valorizzato
750        			ProcessTypesXMLIn			IN		CLOB,							-- Lista dei tipi di processi/procedimenti cui associare l'attributo (XML conforme a schema LISTA_STD.xsd)					
751        																	-- Ogni tipo di procedimento/processo è tag "Riga" che può contenere le seguenti colonne:
752        																	-- 1: Identificativo del tipo di processo/procedimento
753        																	-- 2: Nome del tipo di processo/procedimento (o suo inizio: ricerca case-insensitive in like)
754        			NroPosizioneIn			IN		PLS_INTEGER DEFAULT NULL,			-- N.ro (valori da 1 a n) che indica la posizione che deve avere l'attributo tra tutti quelli associati al dato tipo proc.
755        																	-- Se NULL e l'associazione è da creare il n.ro posizione viene settato pari al max. n.ro degli attributi associati + 1
756        			FlgObbligIn				IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NUL) 1 indica che è un attributo obbligatorio per i dati tipi proc.
757        			MaxNumValuesIn			IN		INTEGER  DEFAULT NULL,				-- Massimo numero di valori possibili per l'attributo
758        			DtInizioVldIn			IN		VARCHAR2  DEFAULT NULL,				-- Data di inizio validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende da sempre
759        			DtFineVldIn				IN		VARCHAR2  DEFAULT NULL,				-- Data di fine validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende x tempo illimitato
760        			FlgLockedIn				IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Indicatore di associazione ad attributo riservata dal sistema e non modificabile/cancellabile da GUI
761        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
762        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
763        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
764        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
765        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
766        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
767        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
768        
769        	/********* funzione per rimuovere un'associazione di attributo dinamico con un dato tipo di processo/procedimento **********/
770        	function DAttributoProcType(		
771        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
772        																	-- (obblig). Codice identificativo del token di connessione
773        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
774        			RowidIn				IN		VARCHAR2 DEFAULT NULL,				-- Rowid del record-associazione da cancellare
775        			IdProcessTypeIn   		IN	   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type DEFAULT NULL, 
776        																	-- Identificativo del tipo di processo 
777        			NomeIn				IN		DMT_ATTRIBUTES_DEF.ATTR_NAME%type DEFAULT NULL,		
778        																	-- Nome identificativo dell'attributo (ricerca case-insensitive)
779        			LabelIn				IN		DMT_ATTRIBUTES_DEF.ATTR_LABEL%type DEFAULT NULL,
780        																	-- Label con cui l'attributo appare nella GUI.
781        			MotiviIn				IN		DMT_ACTIVITIES.NOTE%type,			-- Motivi della cancellazione
782        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
783        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
784        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
785        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
786        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
787        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
788        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon, altrimenti 0 (in caso di errore)
789        
790        
791        	/**** Funzione per ottenere la lista dei tipi documenti di un dato tipo di processo/procedimento 						****/
792        	FUNCTION TrovaDocProcType(
793        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
794        																	-- (obblig). Codice identificativo del token di connessione
795        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
796        			IdProcessTypeIO   		IN OUT   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type,	-- Identificativo del tipo di processo/procedimento di cui estrarre i tipi documenti. 	
797        																	-- In output, salvo in caso di errore, è sempre valorizzato	
798        			NomeProcessTypeIO			IN OUT	DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type, -- Nome del tipo di processo/procedimento di cui estrarre i tipi documenti (o suo inizio; ricerca case-insensitive in like).
799        																	-- In output, salvo in caso di errore, è sempre valorizzato
800        			IdProcessIO				IN OUT	DMT_PROCESSES.ID_PROCESS%type,		-- Id. del processo  per cui listare i possibili tipi documenti. Viene considerato solo se entrambi i 2 argomenti precedenti sono NULL (sono alternativi)
801        			FlgAcqProdIn			In		VARCHAR2 DEFAULT NULL,				-- (valori A/P/NULL) 1° filtro di ricerca: serve a restringere la ricerca ai soli tipi documenti che sono acquisiti (A) o prodotti (P)  
802        			CodRuoloDocInProcIn		IN		VARCHAR2 DEFAULT NULL,				-- 2° filtro di ricerca: codice del ruolo del documento nel procrsso (doc. iniziale, atto finale ecc; valori da dizionario; ricerca case-sensitive esatta)
803        			FlgSoloVldIn 			IN 		INTEGER DEFAULT 1, 				-- (valori 1/0/NULL) 3° filtro di ricerca: Se 1 indica se si devono estrarre solo i tipi documenti validi alla data odierna
804        			TsVldIn				IN 		VARCHAR2 DEFAULT NULL,				-- 4° filtro di ricerca: Stinga con il timestamp (nel formato GG/MM/AAAA HH24:MI:SS) a cui devono essere validi i tipi documenti 
805        			NomeDocTypeIn			IN		VARCHAR2 DEFAULT NULL,				-- 5° filtro di ricerca: nome del tipo doc. (ricerca case insensitive in like; il % finale non viene forzato)
806        			------------- inizio argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
807        			ColOrderByIO			IN OUT	VARCHAR2,						-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso (si può ordinare per tutte le colonne tranne la 1, 9). Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
808        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
809        																	-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
810        			FlgDescOrderByIO  		IN OUT	VARCHAR2,						-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
811        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.			
812        			FlgSenzaPaginazioneIn 		IN 		PLS_INTEGER DEFAULT NULL,            	-- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
813        			NroPaginaIO      			IN OUT	PLS_INTEGER,                  		-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
814           			BachSizeIO				IN OUT	PLS_INTEGER,					-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)  
815        																	-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro				
816        			OverFlowLimitIn			IN		PLS_INTEGER DEFAULT NULL,			-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow
817        			FlgSenzaTotIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
818        			NroTotRecOut			OUT		PLS_INTEGER,					-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina)
819             			NroRecInPaginaOut 		OUT   	PLS_INTEGER,                     		-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
820        			------------- fine argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
821        			ListaXMLOut				OUT		NOCOPY CLOB,					-- Lista dei tipi documenti trovati (XML conforme a schema LISTA_STD.xsd)
822        																	-- Ogni tipo documento è un tag Riga che può contenere le seguenti colonne: 
823        																	-- 1: Identificativo del record del tipo doc. se già registrato in DB (rowid del record in DB)
824        																	-- 2: Identificativo del tipo documento (ID_DOC_TYPE)
825        																	-- 3: Nome del tipo di documento
826        																	-- 4: N.ro d'ordine del tipo di documento tra tutti quelli del dato tipo di procedimento/processo	
827        																	-- 5: (valori A/P/NULL) Indicatore di tipo di documento generalmente acquisito (A) o prodotto (P) nel dato tipo di procedimento/processo
828        																	-- 6: Codice del ruolo dei documenti del dato tipo nel dato tipo di procedimento/processo (valori codificati in dizionario)
829        																	-- 7: Descrizione del ruolo dei documenti del dato tipo nel dato tipo di procedimento/processo
830        																	-- 8: Massimo numero di documenti del dato tipo che possono esserci nei processi del dato tipo 
831        																	-- 9: (valori 1/0) Se 1 è un tipo di documento valido alla data odierna
832        																	-- 10: Data di inzio validità dell'attributo (nel formato dato dal parametro di conf. FMT_STD_DATA)
833        																	-- 11: Data di fine validità dell'attributo (nel formato dato dal parametro di conf. FMT_STD_DATA)
834        																	-- 12: (valori 1/0) Se 1 è un documento riservato dal sistema e non modificabile/cancellabile da applicativo
835        			FlgAbilInsOut	 		OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se 1 si ha abilitazione a inserimento di tipi doc.
836        			FlgAbilUpdOut 			OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se 1 si ha abilitazione a modifica di tipi doc.
837        			FlgAbilDelOut 			OUT 		PLS_INTEGER,            			-- (valori 1/0) Se 1 si ha abilitazione a cancellazione di tipi doc.
838        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
839        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
840        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
841        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
842        
843        	/**** 	Funzione per estrarre i dati di una relazione tipo di documento - tipo processo/procedimento 						*****/
844        	FUNCTION LoadDettDocTypeProcTy(
845        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
846        																	-- (obblig). Codice identificativo del token di connessione
847        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
848        			IdDocTypeIn   			IN    	DMT_DOC_TYPES.ID_DOC_TYPE%type,	 	-- (obblig.)Identificativo del tipo di documento 	
849        			IdProcessTypeIn			IN		DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type,	-- (obblig.) Identificativo del tipo di processo/procedimento
850        			NomeProcessTypeOut		OUT		DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type,	-- Nome del tipo di processo/procedimento
851        			NomeDocTypeOut			OUT		DMT_DOC_TYPES.NOME_DOC_TYPE%type,		-- Nome del tipo di documento
852        			NroPosizioneOut			OUT		PLS_INTEGER,					-- N.ro (valori da 1 a n) che indica la posizione del tipo doc. tra tutti quelli associati al dato tipo proc.
853        			FlgAqcProdOut			OUT		VARCHAR2,						-- (valori A/P/NULL) Indica se generalmente i doc. del dato tipo sono acquisiti o prodotti nei processi/procedimenti del dato tipo
854        			CodRuoloDocOut			OUT		VARCHAR2,						-- Codice (valori codifcati in dizionario di sistema) che indica il ruolo del dato tipo doc. nei processi del dato tipo (doc. iniziale, atto finale ecc)
855        			MaxNumDocsOut			OUT		INTEGER,						-- Massimo numero di documenti del dato tipo che possono esserci nei nei processi del dato tipo
856        			DtInizioVldOut			OUT		VARCHAR2,						-- Data di inizio validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende da sempre
857        			DtFineVldOut			OUT		VARCHAR2,						-- Data di fine validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende per sempre
858        			FlgLockedOut			OUT		PLS_INTEGER,					-- (valori 1/0) Indicatore di tipo di relazione tipo doc. - tipo procedimento riservata dal sistema e non modificabile/cancellabile da GUI
859        			XMLControlliOut			OUT		NOCOPY CLOB,					-- Lista con i controlli di presenza/firma/protocollazione/repertoriazione dei doc. del dato tipo da fare prima o dopo una certa attività WF (XML conforme a schema LISTA_STD.xsd)					
860        																	-- Ogni controllo è un tag "Riga" che contiene le seguenti colonne:
861        																	-- 1: Identificativo del flusso WF in cui si applica il controllo (se Oracle WF è l'ITEM_TYPE)
862        																	-- 2: Nome del flusso WF in cui si applica il controllo (ricerca case insensitive in like)
863        																	-- 3: Internal name dell'attività WF prima/dopo cui si applica il controllo (se Oracle WF è l'ACTIVITY_NAME)
864        																	-- 4: Display name dell'attività WF prima/dopo cui si applica il controllo (ricerca case insensitive in like)
865        																	-- 5: (valori B/A) Indica se il controllo deve scattare prima (B) o dopo (A) l'attività
866        																	-- 6: (valori 1/0/NULL) Se 1 il controllo non deve essere bloccante ma solo uno warning
867        																	-- 7: Lista degli esiti dell'attività (i loro meaning, nel caso di Oracle WF) - separati da ; - per cui vale il controllo se di tipo "after" (il valore <Qualsiasi esito> indica qualsiasi esito)
868        																	--     Se nessun esito è specificato il controllo "after" vale per tutti gli eventuali esiti.
869        																	-- 8: Minimo numero di doc. del dato tipo di cui si deve controllare la presenza (se NULL e se controllo di presenza si intende 1)
870        																	-- 9: Id. del dominio in cui vale il controllo
871        																	-- 	 Se NULL allora il controllo vale per tutti i sogg. prod./AOO dello schema
872        																	-- 10: Flag che indica il tipo di controllo; valori possibili: NULL = presenza; E = presenza di versione elettronica; F = presenza di firma; EF= presenza di versione elettronica firmata; P = protocollazione; R = Repertoriazione
873        			XMLModelliOut			OUT		NOCOPY CLOB,					-- Lista con i modelli documentali associati al tipo di documento nel dato tipo proc. (XML conforme a schema LISTA_STD.xsd)					
874        																	-- Ogni associazione a modello è un tag "Riga" che può contenere le seguenti colonne:
875        																	-- 1: Identificativo (ROWID) con cui la relazione tipo doc. in tipo proc.- modello è già stata registrata in banca dati
876        																	-- 2: Identificativo del modello
877        																	-- 3: Nome del modello
878        																	-- 4: Data di inizio validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità decorre da sempre.
879        																	-- 5: Data di fine validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità è illimitata.
880        			XMLSpecForAccessOut			OUT		NOCOPY CLOB,				-- Lista con le specifiche sulle modalità di accesso al tipo doc. nel dato tipo proc. (inerenti le attività del/dei flussi WF associati al tipo proc.) (XML conforme a schema LISTA_STD.xsd)					
881        																	-- Ogni specifica è un tag "Riga" che contiene le seguenti colonne:
882        																	-- 1: Identificativo del flusso WF in cui è dato l'accesso (se Oracle WF è l'ITEM_TYPE). 
883        																	-- 2: Nome del flusso WF in cui è dato l'accesso (ricerca case insensitive in like). 
884        																	-- 3: Internal name dell'attività WF in cui è dato l'accesso (se Oracle WF è l'ACTIVITY_NAME). Ammessi i valore particolari:  #ANY che indica qualsiasi attività del flusso; #START_PROC che indica l'avvio del flusso
885        																	-- 4: Display name dell'attività WF in cui è dato l'accesso (ricerca case insensitive in like). Ammessi i valore particolari:  <Qualsiasi> che indica qualsiasi attività del flusso, <Avvio> che indica l'avvio del flusso
886        																	-- 5: Flag che indica la modalità di accesso: V o NULL = sola Visualizzazione; M = Modifica; F = Firma; T = Full access (modifica e firma) 
887        																	-- 6: Id. del dominio in cui vale la specifica di accesso
888        																	-- 	 Se NULL la specifica vale per tutti i sogg. prod./AOO dello schema																												
889        			RowidOut				OUT		VARCHAR2,						-- Rowid del record di relazione tipo di doc. - tipo di processo/procedimento
890        			BachSizeOut				OUT		PLS_INTEGER,					-- Indica il massimo n.ro di record per ogni pagina da mostrare nelle liste
891        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
892        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
893        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
894        			return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
895        
896        	/********* funzione per creare o modificare un'associazione tipo documento - tipo di processo/procedimento **********/
897        	function IUDocTypeProcType(
898        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
899        																	-- (obblig). Codice identificativo del token di connessione
900        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
901        			RowidIO				IN OUT	VARCHAR2,						-- Rowid del record-associazione da modificare. Se non valorizzato l'associazione è da inserire ex-novo
902        																	-- In output, salvo in caso di errore, è sempre valorizzato	
903        			IdProcessTypeIO   		IN OUT   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type, 	-- Identificativo del tipo di processo cui è relativa l'associazione. E' obbligatorio se RowidIO è NULL in input (tipo doc. da associare)
904        																	-- In output, salvo in caso di errore, è sempre valorizzato	
905        			IdDocTypeIn   			IN    	DMT_DOC_TYPES.ID_DOC_TYPE%type DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
906        																 	-- Identificativo del tipo di documento. 
907        																	-- Viene considerato solo se l'argomento successivo è valorizzato
908        			NomeDocTypeIn			IN		DMT_DOC_TYPES.NOME_DOC_TYPE%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
909        																	 -- (obblig.) Nome del tipo di documento (o suo inizio: ricerca case-insensitive in like)
910        			NroPosizioneIn			IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),	
911        																	-- N.ro (valori da 1 a n) che indica la posizione che deve avere il tipo doc. tra tutti quelli associati al dato tipo proc.
912        																	-- Se NULL e l'associazione è da creare il n.ro posizione viene settato pari al max. n.ro dei tipi doc. associati + 1
913        			FlgAqcProdIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
914        																	 -- (valori A/P/NULL) Indica se generalmente i doc. del dato tipo sono acquisiti o prodotti nei processi/procedimenti del dato tipo
915        			CodRuoloDocIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
916        																	 -- Codice (valori codifcati in dizionario di sistema) che indica il ruolo del dato tipo doc. nei processi del dato tipo (doc. iniziale, atto finale ecc)
917        			MaxNumDocsIn			IN		INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
918        																	-- Massimo numero di documenti del dato tipo che possono esserci nei nei processi del dato tipo
919        			DtInizioVldIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
920        																	-- Data di inizio validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende da sempre
921        			DtFineVldIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
922        																	-- Data di fine validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende per sempre
923        			FlgLockedIn				IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
924        																	-- (valori 1/0/NULL) Indicatore di associazione a tipo doc. riservata dal sistema e non modificabile/cancellabile da GUI
925        			FlgModControlliIn			IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se i controlli indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da aggiungere) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già specificati (e relativi al dominio di lavoro) in caso di associazione tipo doc. - tipo proc. da aggiornare
926        			XMLControlliIn			IN		CLOB DEFAULT NULL,				-- Lista con i controlli di presenza/firma/protocollazione/repertoriazione dei doc. del dato tipo da fare prima o dopo una certa attività WF (XML conforme a schema LISTA_STD.xsd)					
927        																	-- Ogni controllo è un tag "Riga" che contiene le seguenti colonne:
928        																	-- 1: Identificativo del flusso WF in cui si applica il controllo (se Oracle WF è l'ITEM_TYPE)
929        																	-- 2: Nome del flusso WF in cui si applica il controllo (ricerca case insensitive in like)
930        																	-- 3: Internal name dell'attività WF prima/dopo cui si applica il controllo (se Oracle WF è l'ACTIVITY_NAME)
931        																	-- 4: Display name dell'attività WF prima/dopo cui si applica il controllo (ricerca case insensitive in like)
932        																	-- 5: (obblig) (valori B/A) Indica se il controllo deve scattare prima (B) o dopo (A) l'attività
933        																	-- 6: (valori 1/0/NULL) Se 1 il controllo non deve essere bloccante ma solo uno warning
934        																	-- 7: Lista degli esiti dell'attività (i loro meaning, nel caso di Oracle WF) - separati da ; - per cui vale il controllo se di tipo "after" (il valore <Qualsiasi esito> indica qualsiasi esito)
935        																	--     Se nessun esito è specificato il controllo "after" vale per tutti gli eventuali esiti.
936        																	-- 8: Minimo numero di doc. del dato tipo di cui si deve controllare la presenza (se NULL e se controllo di presenza si intende 1)
937        																	-- 9: Id. del dominio in cui vale il controllo
938        																	-- 	 Se non specificato è il dominio di lavoro stesso e se questo è lo schema allora il controllo vale per tutti i sogg. prod./AOO dello schema
939        																	-- 10: Flag che indica il tipo di controllo; valori possibili: NULL = presenza; E = presenza di versione elettronica; F = presenza di firma; EF= presenza di versione elettronica firmata; P = protocollazione; R = Repertoriazione
940        			FlgModModelliIn			IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se i modelli indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelle da inserire/modificare/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già specificati (e relativi al dominio di lavoro) in caso di relazione tipo di documento - tipo proc. da aggiornare
941        			XMLModelliIn			IN		CLOB DEFAULT NULL,				-- Lista con i modelli documentali associati al tipo di documento nel dato tipo proc. (XML conforme a schema LISTA_STD.xsd)					
942        																	-- Ogni associazione a modello è un tag "Riga" che può contenere le seguenti colonne:
943        																	-- 1: Identificativo (ROWID) con cui la relazione tipo doc. in tipo proc.- modello è già stata registrata in banca dati
944        																	-- 2: Identificativo del modello
945        																	-- 3: Nome del modello (ricerca case insensitive in like)
946        																	-- 4: Data di inizio validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità decorre da sempre.
947        																	-- 5: Data di fine validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità è illimitata.
948        																	-- 6: (valori 1/0/NULL) Flag di record da eliminare
949        			FlgModSpecForAccessIn		IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se le specifiche sulle modalità di accesso al tipo doc. nel dato tipo proc. indicate nell'argomento successivo sono fornite in modo incrementale (=I) (solo quelle da aggiungere) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelle già specificate (e relativi al dominio di lavoro) in caso di associazione tipo doc. - tipo proc. da aggiornare
950        			XMLSpecForAccessIn		IN		CLOB DEFAULT NULL,				-- Lista con le specifiche sulle modalità di accesso al tipo doc. nel dato tipo proc. (inerenti le attività del/dei flussi WF associati al tipo proc.) (XML conforme a schema LISTA_STD.xsd)					
951        																	-- Ogni specifica è un tag "Riga" che contiene le seguenti colonne:
952        																	-- 1: Identificativo del flusso WF in cui è dato l'accesso (se Oracle WF è l'ITEM_TYPE). 
953        																	-- 2: Nome del flusso WF in cui è dato l'accesso (ricerca case insensitive in like). 
954        																	-- 3: Internal name dell'attività WF in cui è dato l'accesso (se Oracle WF è l'ACTIVITY_NAME). Ammessi i valore particolari:  #ANY che indica qualsiasi attività del flusso; #START_PROC che indica l'avvio del flusso
955        																	-- 4: Display name dell'attività WF in cui è dato l'accesso (ricerca case insensitive in like). Ammessi i valore particolari:  <Qualsiasi> che indica qualsiasi attività del flusso, <Avvio> che indica l'avvio del flusso
956        																	-- 5: Flag che indica la modalità di accesso: V o NULL = sola Visualizzazione; M = Modifica; F = Firma; T = Full access (modifica e firma) 
957        																	-- 6: Id. del dominio in cui vale la specifica di accesso
958        																	-- 	 Se non specificato è il dominio di lavoro stesso e se questo è lo schema allora la specifica vale per tutti i sogg. prod./AOO dello schema																												
959        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
960        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
961        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
962        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
963        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
964        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
965        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
966        
967        	/****** funzione per creare la relazione tra un certo tipo documento ed un set di tipi di processi / procedimenti				******/	
968        	/*****  se per uno o più dei processi la relazione già esiste non viene dato errore e viene aggiornata la relazione già esistente 	******/
969        	function AddRelDocTy_ProcTy(	
970        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
971        																	-- (obblig). Codice identificativo del token di connessione
972        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
973        			IdDocTypeIn   			IN    	DMT_DOC_TYPES.ID_DOC_TYPE%type,	 	-- Identificativo del tipo di documento. 
974        																	-- Viene considerato solo se l'argomento successivo è valorizzato
975        			NomeDocTypeIn			IN		DMT_DOC_TYPES.NOME_DOC_TYPE%type, 		-- (obblig.) Nome del tipo di documento (o suo inizio: ricerca case-insensitive in like)
976        			ProcessTypesXMLIn			IN		CLOB,							-- Lista dei tipi di processi/procedimenti da associare al tipo doc. (XML conforme a schema LISTA_STD.xsd)					
977        																	-- Ogni tipo di procedimento/processo è tag "Riga" che può contenere le seguenti colonne:
978        																	-- 1: Identificativo del tipo di processo/procedimento
979        																	-- 2: Nome del tipo di processo/procedimento (o suo inizio: ricerca case-insensitive in like)
980        			NroPosizioneIn			IN		PLS_INTEGER DEFAULT NULL,			-- N.ro (valori da 1 a n) che indica la posizione che deve avere il tipo doc. tra tutti quelli associati al dato tipo proc.
981        																	-- Se NULL e l'associazione è da creare il n.ro posizione viene settato pari al max. n.ro dei tipi doc. associati + 1
982        			FlgAqcProdIn			IN		VARCHAR2 DEFAULT NULL,				-- (valori A/P/NULL) Indica se generalmente i doc. del dato tipo sono acquisiti o prodotti nei processi/procedimenti del dato tipo
983        			CodRuoloDocIn			IN		VARCHAR2 DEFAULT NULL,				-- Codice (valori codifcati in dizionario di sistema) che indica il ruolo del dato tipo doc. nei processi del dato tipo (doc. iniziale, atto finale ecc)
984        			MaxNumDocsIn			IN		INTEGER DEFAULT NULL,				-- Massimo numero di documenti del dato tipo che possono esserci nei nei processi del dato tipo
985        			DtInizioVldIn			IN		VARCHAR2 DEFAULT NULL,				-- Data di inizio validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende da sempre
986        			DtFineVldIn				IN		VARCHAR2 DEFAULT NULL,				-- Data di fine validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende per sempre
987        			FlgLockedIn				IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Indicatore di associazione a tipo doc. riservata dal sistema e non modificabile/cancellabile da GUI
988        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
989        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
990        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
991        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
992        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
993        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
994        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
995        
996        	/****** Funzione di eliminazione della relazione tra tipo documento e un tipo di processo/procedimento ******/	
997        	function DDocTypeProcTy(
998        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
999        																	-- (obblig). Codice identificativo del token di connessione
1000        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1001        			RowidIn				IN		VARCHAR2 DEFAULT NULL,				-- Rowid del record-associazione da cancellare
1002        			IdProcessTypeIn			IN		DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type DEFAULT NULL,	
1003        																	-- Identificativo del tipo di processo/procedimento 
1004        			IdDocTypeIn   			IN    	DMT_DOC_TYPES.ID_DOC_TYPE%type DEFAULT NULL,	 
1005        																	-- Identificativo del tipo di documento 	
1006        			MotiviIn				IN		DMT_ACTIVITIES.NOTE%type,			-- Motivi della cancellazione
1007        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1008        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1009        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1010        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1011        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1012        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
1013        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1014        
1015        	/**** Funzione per ricercare i tipi di eventi definibili nei processi 				****/
1016        	/**** Permette anche di ricercare i soli eventi definibili in un dato tipo di processo	****/
1017        	function TrovaEventTypes(
1018        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1019        																	-- (obblig). Codice identificativo del token di connessione
1020        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1021        			FlgPreimpostaFiltroIn		IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1 i filtri e l'ordinamento vengono settati secondo le impostazioni dell'utente di lavoro, altrimenti restano come passati in input
1022        			--------------- inizio filtri di ricerca-------------------
1023        			IdEventTypeIO			IN OUT	DMT_EVENT_TYPES.ID_EVENT_TYPE%type,		-- 1° filtro di ricerca: id. del tipo di evento da ricercare
1024        			DesEventIO				IN OUT	DMT_EVENT_TYPES.DES_EVENT_TYPE%type, 	-- 2° filtro di ricerca: stringa contenuta nel nome/descrizione del tipo di evento (ricerca case-insensitive in like)
1025        			CategoriaIO				IN OUT	DMT_EVENT_TYPES.CATEGORIA%type, 		-- 3° filtro di ricerca: stringa contenuta nella categoria di appartenenza del tipo di evento (ricerca case-insensitive in like)
1026        			FlgDurativoIO			IN OUT	PLS_INTEGER,					-- 4° (valori 1/0/NULL) filtro di ricerca per restringere la ricerca ai soli eventi durativi (=1) o puntuali (=0)
1027        			FlgVldXTuttiProcAmmIO		IN OUT	PLS_INTEGER,					-- 5° (valori 1/0/NULL) filtro di ricerca per restringere ai soli tipi di eventi definibili in tutti i procedimenti amministrativi (1) piuttosto che a quelli non definibili in tutti i tipi di proc. amm. (0)
1028        			IdProcessTypeIO			IN OUT	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type,	-- 6° filtro di ricerca: id. del tipo di processo per cui deve essere definibile il tipo di evento. Viene considerato e gestito solo se è valorizzato l'argomento successivo. Se i due non sono congruenti l'id. viene ignorato
1029        			NomeProcessTypeIO			IN OUT	DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type, -- 7° filtro di ricerca: Nome del tipo di processo per cui deve essere definibile il tipo di evento (ricerca case-insensitive esatta)
1030        			IdProcessIO				IN OUT	DMT_PROCESSES.ID_PROCESS%type,		-- 7° filtro di ricerca: id. del processo  per cui listare i possibili eventi. Viene considerato solo se l'argomento precedente è NULL (sono alternativi)
1031        			FlgModTerminiProcIO		IN OUT	VARCHAR2,						-- 8° filtro di ricerca. Serve a restringere la ricerca ai soli eventi che modificano i termini di un qualche procedimento o di quello indicato (NomeProcessTypeIO) se è specificato
1032        																	-- 	Valori ammessi:
1033        																	-- 	S = Sospendendo i termini
1034        																	--	I = Interrompendo i termini
1035        																	--	R = Riprendendo i termini interrotti/sospesi
1036        																	--	C = Chiudendo i termini
1037        																	--	A = Riaprendo i termini
1038        																	--	Q = Qualsiasi dei precedenti
1039        			FlgAssociatoTipoDocIO		IN OUT	PLS_INTEGER,					-- 9° (valori 1/0/NULL) filtro di ricerca per restringere ai soli tipi di eventi associati (=1) o non associati (=0) ad una tipologia documentale 
1040        			IdDocTypeIO				IN OUT	DMT_DOC_TYPES.ID_DOC_TYPE%type,		-- 10° filtro di ricerca: id. del tipo di documento associato al tipo di evento. Viene considerato e gestito solo se è valorizzato l'argomento successivo. Se i due non sono congruenti l'id. viene ignorato
1041        			NomeDocTypeIO			IN OUT	DMT_DOC_TYPES.NOME_DOC_TYPE%type, 		-- 11° filtro di ricerca: Nome del tipo di documento associato al tipo di evento (ricerca case-insensitive in like)
1042        			CIProvEventTypeIO			IN OUT	DMT_EVENT_TYPES.PROV_CI_EVT_TYPE%TYPE,	-- 12° filtro di ricerca: Codice identificativo del tipo di evento nel sistema di provenienza: ricerca esatta case-sensitive  
1043        			CodApplicazioneIO			IN OUT	VARCHAR2,						-- 13° filtro di ricerca: Codice dell'applicazione che tratta i tipi di eventi da ricercare. Se valorizzata pari a #BY_CONN_TKN e si è connessi da un'applicazione esterna si ricercano solo i tipi di eventi di cui tratta quell'applicazione
1044        			CodIstApplicazioneIO		IN OUT	VARCHAR2,						-- 17° filtro di ricerca: Codice dell'istanza di applicazione che tratta i tipi di eventi da ricercare. Se valorizzata pari a #BY_CONN_TKN e si è connessi da un'applicazione esterna si ricercano solo i tipi di eventi di cui tratta l'istanza di applicazione esterna da cui si è connessi
1045        			FlgInclAnnullatiIO		IN OUT	INTEGER,						-- (valori 1/0/NULL) 18° filtro di ricerca: se 1 vengono estratti anche i tipi di eventi logicamente annullati, altrimenti no	
1046        			AltriCriteriIO			IN OUT 	NOCOPY CLOB,					-- Altri criteri di ricerca sugli attributi addizionali dei tipi eventi (XML conforme a schema LISTA_STD.xsd). Se più di uno vengono applicati in AND.
1047        																	-- Ogni criterio è un tag Riga che può contenere le seguenti colonne:
1048        																	--	1) Nome (ATTR_NAME) dell'attributo cui è relativo il criterio
1049        																	--	2) (obblig.) Operatore logico. Valori possibili:
1050        																	--		"uguale" (ricerca esatta) 
1051        																	--		"simile a (case-sensitive)" (ricerca case-sensitive in like)
1052        																	--		"simile a (case-insensitive)" (ricerca case-insensitive in like e che ignora i caratteri quali spazi, ., ecc)
1053        																	--		"maggiore" (se attributo numerico o data)
1054        																	--		"maggiore o uguale" (se attributo numerico o data)
1055        																	--		"minore" (se attributo numerico o data)
1056        																	--		"minore o uguale" (se attributo numerico o data)
1057        																	--		"tra" (se attributo numerico o data)
1058        																	--		"non valorizzato"
1059        																	--		"valorizzato"
1060        																	--		"spuntato" (se attributo di tipo casella di spunta)
1061        																	--		"non spuntato" (se attributo di tipo casella di spunta)
1062        																	--	3) 1° valore di confronto (obblig. e gestito solo se l'operatore non ha uno dei seguenti valori: valorizzato, non valorizzato, spuntato, non spuntato) (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
1063        																	--	4) 2° valore di confronto (obblig. e gestito solo se l'operatore è "tra") (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
1064        																	--	5) Label dell''attributo cui è relativo il criterio (se sotto-attributo di complesso <label del complesso> - <label del sotto-attributo>
1065        			------------- inizio argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
1066        			ColOrderByIO			IN OUT	VARCHAR2,						-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso (si può ordinare solo per le colonne da 1, 2, 3 e 5). Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
1067        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
1068        																	-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
1069        			FlgDescOrderByIO  		IN OUT	VARCHAR2,						-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
1070        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.			
1071        			FlgSenzaPaginazioneIn 		IN 		PLS_INTEGER DEFAULT NULL,            	-- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
1072        			NroPaginaIO      			IN OUT	PLS_INTEGER,                  		-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
1073           			BachSizeIO				IN OUT	PLS_INTEGER,					-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)  
1074        																	-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro				
1075        			OverFlowLimitIn			IN		PLS_INTEGER DEFAULT NULL,			-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow
1076        			FlgSenzaTotIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
1077        			NroTotRecOut			OUT		PLS_INTEGER,					-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina)
1078             			NroRecInPaginaOut 		OUT   	PLS_INTEGER,                     		-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
1079        			------------- fine argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
1080        			ListaXMLOut				OUT		NOCOPY CLOB,					-- Lista dei tipi di eventi trovati (XML conforme a schema LISTA_STD.xsd)
1081        																	-- Ogni tipo di evento è un tag Riga che contiene le seguenti colonne: 
1082        																	-- 1: Identificativo del tipo di evento
1083        																	-- 2: Descrizione del tipo di evento
1084        																	-- 3: N.ro d'ordine del tipo di evento tra quelli del processo (valorizzato solo se valorizzato il filtro sul tipo di procedimento)
1085        																	-- 4: (valori 1/0) Flg di evento durativo (1) o puntuale (0)
1086        																	-- 5: Categoria di appartenenza
1087        																	-- 6: (valori 1/0) Se 1 indica che l'evento può comportare sospensione dei termini (per qualsiasi tipo di procedimento in cui non diversamente specificato o x lo specifico tipo procedimento NomeProcessTypeIO se valorizzato)
1088        																	-- 7: (valori 1/0) Se 1 indica che l'evento può comportare interruzione dei termini (per qualsiasi tipo di procedimento in cui non diversamente specificato o x lo specifico tipo procedimento NomeProcessTypeIO se valorizzato)
1089        																	-- 8: (valori 1/0) Se 1 indica che l'evento può comportare ripresa dei termini interrotti/sospesi (per qualsiasi tipo di procedimento in cui non diversamente specificato o x lo specifico tipo procedimento NomeProcessTypeIO se valorizzato)
1090        																	-- 9: (valori 1/0) Se 1 indica che l'evento può comportare l'inizio di una fase esterna (per qualsiasi tipo di procedimento in cui non diversamente specificato o x lo specifico tipo procedimento NomeProcessTypeIO se valorizzato)
1091        																	-- 10: (valori 1/0) Se 1 indica che l'evento può comportare la fine di una fase esterna (per qualsiasi tipo di procedimento in cui non diversamente specificato o x lo specifico tipo procedimento NomeProcessTypeIO se valorizzato)
1092        																	-- 11: (valori 1/0) Se 1 indica che l'evento può comportare la chiusura del procedimento(per qualsiasi tipo di procedimento in cui non diversamente specificato o x lo specifico tipo procedimento NomeProcessTypeIO se valorizzato)
1093        																	-- 12: (valori 1/0) Se 1 indica che l'evento può comportare la riapertura dei termini del procedimento(per qualsiasi tipo di procedimento in cui non diversamente specificato o x lo specifico tipo procedimento NomeProcessTypeIO se valorizzato)
1094        																	-- 13: Id. del tipo di documento associato
1095        																	-- 14: Nome del tipo di documento associato
1096        																	-- 15: Data del documento che è sincronizzata con la data dell'evento
1097        																	-- 16: (valori 1/0) Se 1 indica che il tipo di evento è disponibile in tutti i tipi di procedimenti amministrativi	
1098        																	-- 17: Annotazioni sul tipo di evento
1099        																	-- 18: Flag di annullamento logico (valori 1/0)
1100        																	-- 19: Flag che indica che il tipo di evento è trattato dall'applicazione CodApplicazioneIO ed eventuale istanza CodIstApplicazioneIO
1101        																	-- 20: Descrizione dell'applicazione (ed eventuale istanza) che tratta il tipo di evento
1102        																	-- 21: Cod. identificativo del tipo di evento nel sistema di provenienza
1103        																	-- 22: Timestamp di creazione del tipo di evento (nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
1104        																	-- 23: Descrizione dell'utente di creazione del tipo di evento 
1105        																	-- 24: Timestamp di ultima modifica dei dati del tipo di evento (nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
1106        																	-- 25: Descrizione dell'utente di ultima modifica dei dati del tipo di evento																						
1107        																	-- 26: (valori 1/0) Indicatore di tipo di evento riservato dal sistema e non modificabile/cancellabile da applicativo
1108        																	-- 27: (valori 1/0) Indicatore di relazione tipo di evento - tipo di procedimento riservata dal sistema e non modificabile/cancellabile da applicativo (valorizzato solo se valorizzato il filtro sul tipo di procedimento)
1109        																	-- 28: (valori 1/0) Indicatore di relazione tipo di evento - tipo di procedimento non cancellabile
1110        			FlgAbilInsOut	 		OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se vale 1 significa: se il filtro sul tipo di procedimento non è valorizzato indica che si ha abilitazione a inserimento di tipi di eventi, 
1111        																	--						 se il filtro sul tipo di procedimento non è valorizzato indica che si ha abilitazione a creare relazioni tra tipi di eventi e il dato tipo di procedimento 
1112        			FlgAbilUpdOut 			OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se vale 1 significa: se il filtro sul tipo di procedimento non è valorizzato indica che si ha abilitazione a modifica del tipo di eventi, 
1113        																	--						 se il filtro sul tipo di procedimento non è valorizzato indica che si ha abilitazione a modificare relazioni tra tipi di eventi e il dato tipo di procedimento 
1114        			FlgAbilDelOut 			OUT 		PLS_INTEGER,            			-- (valori 1/0) Se vale 1 significa: se il filtro sul tipo di procedimento non è valorizzato indica che si ha abilitazione a cancellazione di tipi di eventi, 
1115        																	--						 se il filtro sul tipo di procedimento non è valorizzato indica che si ha abilitazione a cancellare relazioni tra tipi di eventi e il dato tipo di procedimento 
1116        			FlgMostraAltriAttrOut		OUT		PLS_INTEGER,					-- (valori 1/0) Se 1 nella GUI vanno mostrati gli attributi addizionali (ce ne sono di visibile all'utente), se 0 no
1117        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1118        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1119        			ErrMsgOut				OUT 		VARCHAR2,						-- Messaggio d'errore
1120        			FlgEsclEvtAttProcIn		IN		PLS_INTEGER DEFAULT 1)				-- (valori 1/0/NULL) Se 1 e se IdProcessIO è valorizzato vengono esclusi i tipi eventi che sono mappati come attività  workflow dell'eventuale flusso WF associato al processo			
1121        			return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1122        
1123        	------overload della precedente, ma senza crtiteri sugli attributi custom	
1124        	function TrovaEventTypes(
1125        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1126        																	-- (obblig). Codice identificativo del token di connessione
1127        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1128        			FlgPreimpostaFiltroIn		IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1 i filtri e l'ordinamento vengono settati secondo le impostazioni dell'utente di lavoro, altrimenti restano come passati in input
1129        			--------------- inizio filtri di ricerca-------------------
1130        			IdEventTypeIO			IN OUT	DMT_EVENT_TYPES.ID_EVENT_TYPE%type,		-- 1° filtro di ricerca: id. del tipo di evento da ricercare
1131        			DesEventIO				IN OUT	DMT_EVENT_TYPES.DES_EVENT_TYPE%type, 	-- 2° filtro di ricerca: stringa contenuta nel nome/descrizione del tipo di evento (ricerca case-insensitive in like)
1132        			CategoriaIO				IN OUT	DMT_EVENT_TYPES.CATEGORIA%type, 		-- 3° filtro di ricerca: stringa contenuta nella categoria di appartenenza del tipo di evento (ricerca case-insensitive in like)
1133        			FlgDurativoIO			IN OUT	PLS_INTEGER,					-- 4° (valori 1/0/NULL) filtro di ricerca per restringere la ricerca ai soli eventi durativi (=1) o puntuali (=0)
1134        			FlgVldXTuttiProcAmmIO		IN OUT	PLS_INTEGER,					-- 5° (valori 1/0/NULL) filtro di ricerca per restringere ai soli tipi di eventi definibili in tutti i procedimenti amministrativi (1) piuttosto che a quelli non definibili in tutti i tipi di proc. amm. (0)
1135        			IdProcessTypeIO			IN OUT	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type,	-- 6° filtro di ricerca: id. del tipo di processo per cui deve essere definibile il tipo di evento. Viene considerato e gestito solo se è valorizzato l'argomento successivo. Se i due non sono congruenti l'id. viene ignorato
1136        			NomeProcessTypeIO			IN OUT	DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type, -- 7° filtro di ricerca: Nome del tipo di processo per cui deve essere definibile il tipo di evento (ricerca case-insensitive esatta)
1137        			IdProcessIO				IN OUT	DMT_PROCESSES.ID_PROCESS%type,		-- 7° filtro di ricerca: id. del processo  per cui listare i possibili eventi. Viene considerato solo se l'argomento precedente è NULL (sono alternativi)
1138        			FlgModTerminiProcIO		IN OUT	VARCHAR2,						-- 8° filtro di ricerca. Serve a restringere la ricerca ai soli eventi che modificano i termini di un qualche procedimento o di quello indicato (NomeProcessTypeIO) se è specificato
1139        																	-- 	Valori ammessi:
1140        																	-- 	S = Sospendendo i termini
1141        																	--	I = Interrompendo i termini
1142        																	--	R = Riprendendo i termini interrotti/sospesi
1143        																	--	C = Chiudendo i termini
1144        																	--	A = Riaprendo i termini
1145        																	--	Q = Qualsiasi dei precedenti
1146        			FlgAssociatoTipoDocIO		IN OUT	PLS_INTEGER,					-- 9° (valori 1/0/NULL) filtro di ricerca per restringere ai soli tipi di eventi associati (=1) o non associati (=0) ad una tipologia documentale 
1147        			IdDocTypeIO				IN OUT	DMT_DOC_TYPES.ID_DOC_TYPE%type,		-- 10° filtro di ricerca: id. del tipo di documento associato al tipo di evento. Viene considerato e gestito solo se è valorizzato l'argomento successivo. Se i due non sono congruenti l'id. viene ignorato
1148        			NomeDocTypeIO			IN OUT	DMT_DOC_TYPES.NOME_DOC_TYPE%type, 		-- 11° filtro di ricerca: Nome del tipo di documento associato al tipo di evento (ricerca case-insensitive in like)
1149        			CIProvEventTypeIO			IN OUT	DMT_EVENT_TYPES.PROV_CI_EVT_TYPE%TYPE,	-- 12° filtro di ricerca: Codice identificativo del tipo di evento nel sistema di provenienza: ricerca esatta case-sensitive  
1150        			CodApplicazioneIO			IN OUT	VARCHAR2,						-- 13° filtro di ricerca: Codice dell'applicazione che tratta i tipi di eventi da ricercare. Se valorizzata pari a #BY_CONN_TKN e si è connessi da un'applicazione esterna si ricercano solo i tipi di eventi di cui tratta quell'applicazione
1151        			CodIstApplicazioneIO		IN OUT	VARCHAR2,						-- 17° filtro di ricerca: Codice dell'istanza di applicazione che tratta i tipi di eventi da ricercare. Se valorizzata pari a #BY_CONN_TKN e si è connessi da un'applicazione esterna si ricercano solo i tipi di eventi di cui tratta l'istanza di applicazione esterna da cui si è connessi
1152        			FlgInclAnnullatiIO		IN OUT	INTEGER,						-- (valori 1/0/NULL) 18° filtro di ricerca: se 1 vengono estratti anche i tipi di eventi logicamente annullati, altrimenti no	
1153        			------------- inizio argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
1154        			ColOrderByIO			IN OUT	VARCHAR2,						-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso (si può ordinare solo per le colonne da 1, 2, 3 e 5). Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
1155        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
1156        																	-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
1157        			FlgDescOrderByIO  		IN OUT	VARCHAR2,						-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
1158        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.			
1159        			FlgSenzaPaginazioneIn 		IN 		PLS_INTEGER DEFAULT NULL,            	-- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
1160        			NroPaginaIO      			IN OUT	PLS_INTEGER,                  		-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
1161           			BachSizeIO				IN OUT	PLS_INTEGER,					-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)  
1162        																	-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro				
1163        			OverFlowLimitIn			IN		PLS_INTEGER DEFAULT NULL,			-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow
1164        			FlgSenzaTotIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
1165        			NroTotRecOut			OUT		PLS_INTEGER,					-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina)
1166             			NroRecInPaginaOut 		OUT   	PLS_INTEGER,                     		-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
1167        			------------- fine argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
1168        			ListaXMLOut				OUT		NOCOPY CLOB,					-- Lista dei tipi di eventi trovati (XML conforme a schema LISTA_STD.xsd)
1169        																	-- Ogni tipo di evento è un tag Riga che contiene le seguenti colonne: 
1170        																	-- 1: Identificativo del tipo di evento
1171        																	-- 2: Descrizione del tipo di evento
1172        																	-- 3: N.ro d'ordine del tipo di evento tra quelli del processo (valorizzato solo se valorizzato il filtro sul tipo di procedimento)
1173        																	-- 4: (valori 1/0) Flg di evento durativo (1) o puntuale (0)
1174        																	-- 5: Categoria di appartenenza
1175        																	-- 6: (valori 1/0) Se 1 indica che l'evento può comportare sospensione dei termini (per qualsiasi tipo di procedimento in cui non diversamente specificato o x lo specifico tipo procedimento NomeProcessTypeIO se valorizzato)
1176        																	-- 7: (valori 1/0) Se 1 indica che l'evento può comportare interruzione dei termini (per qualsiasi tipo di procedimento in cui non diversamente specificato o x lo specifico tipo procedimento NomeProcessTypeIO se valorizzato)
1177        																	-- 8: (valori 1/0) Se 1 indica che l'evento può comportare ripresa dei termini interrotti/sospesi (per qualsiasi tipo di procedimento in cui non diversamente specificato o x lo specifico tipo procedimento NomeProcessTypeIO se valorizzato)
1178        																	-- 9: (valori 1/0) Se 1 indica che l'evento può comportare l'inizio di una fase esterna (per qualsiasi tipo di procedimento in cui non diversamente specificato o x lo specifico tipo procedimento NomeProcessTypeIO se valorizzato)
1179        																	-- 10: (valori 1/0) Se 1 indica che l'evento può comportare la fine di una fase esterna (per qualsiasi tipo di procedimento in cui non diversamente specificato o x lo specifico tipo procedimento NomeProcessTypeIO se valorizzato)
1180        																	-- 11: (valori 1/0) Se 1 indica che l'evento può comportare la chiusura del procedimento(per qualsiasi tipo di procedimento in cui non diversamente specificato o x lo specifico tipo procedimento NomeProcessTypeIO se valorizzato)
1181        																	-- 12: (valori 1/0) Se 1 indica che l'evento può comportare la riapertura dei termini del procedimento(per qualsiasi tipo di procedimento in cui non diversamente specificato o x lo specifico tipo procedimento NomeProcessTypeIO se valorizzato)
1182        																	-- 13: Id. del tipo di documento associato
1183        																	-- 14: Nome del tipo di documento associato
1184        																	-- 15: Data del documento che è sincronizzata con la data dell'evento
1185        																	-- 16: (valori 1/0) Se 1 indica che il tipo di evento è disponibile in tutti i tipi di procedimenti amministrativi	
1186        																	-- 17: Annotazioni sul tipo di evento
1187        																	-- 18: Flag di annullamento logico (valori 1/0)
1188        																	-- 19: Flag che indica che il tipo di evento è trattato dall'applicazione CodApplicazioneIO ed eventuale istanza CodIstApplicazioneIO
1189        																	-- 20: Descrizione dell'applicazione (ed eventuale istanza) che tratta il tipo di evento
1190        																	-- 21: Cod. identificativo del tipo di evento nel sistema di provenienza
1191        																	-- 22: Timestamp di creazione del tipo di evento (nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
1192        																	-- 23: Descrizione dell'utente di creazione del tipo di evento 
1193        																	-- 24: Timestamp di ultima modifica dei dati del tipo di evento (nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
1194        																	-- 25: Descrizione dell'utente di ultima modifica dei dati del tipo di evento																						
1195        																	-- 26: (valori 1/0) Indicatore di tipo di evento riservato dal sistema e non modificabile/cancellabile da applicativo
1196        																	-- 27: (valori 1/0) Indicatore di relazione tipo di evento - tipo di procedimento riservata dal sistema e non modificabile/cancellabile da applicativo (valorizzato solo se valorizzato il filtro sul tipo di procedimento)
1197        																	-- 28: (valori 1/0) Indicatore di relazione tipo di evento - tipo di procedimento non cancellabile
1198        			FlgAbilInsOut	 		OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se vale 1 significa: se il filtro sul tipo di procedimento non è valorizzato indica che si ha abilitazione a inserimento di tipi di eventi, 
1199        																	--						 se il filtro sul tipo di procedimento non è valorizzato indica che si ha abilitazione a creare relazioni tra tipi di eventi e il dato tipo di procedimento 
1200        			FlgAbilUpdOut 			OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se vale 1 significa: se il filtro sul tipo di procedimento non è valorizzato indica che si ha abilitazione a modifica del tipo di eventi, 
1201        																	--						 se il filtro sul tipo di procedimento non è valorizzato indica che si ha abilitazione a modificare relazioni tra tipi di eventi e il dato tipo di procedimento 
1202        			FlgAbilDelOut 			OUT 		PLS_INTEGER,            			-- (valori 1/0) Se vale 1 significa: se il filtro sul tipo di procedimento non è valorizzato indica che si ha abilitazione a cancellazione di tipi di eventi, 
1203        																	--						 se il filtro sul tipo di procedimento non è valorizzato indica che si ha abilitazione a cancellare relazioni tra tipi di eventi e il dato tipo di procedimento 
1204        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1205        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1206        			ErrMsgOut				OUT 		VARCHAR2,						-- Messaggio d'errore
1207        			FlgEsclEvtAttProcIn		IN		PLS_INTEGER DEFAULT 1)				-- (valori 1/0/NULL) Se 1 e se IdProcessIO è valorizzato vengono esclusi i tipi eventi che sono mappati come attività  workflow dell'eventuale flusso WF associato al processo			
1208        			return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1209        
1210        	/***** Funzione per inserire o aggiornare un tipo di evento *****/
1211        	function IUEventType(	
1212        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1213        																	-- (obblig). Codice identificativo del token di connessione
1214        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1215        			IdEventTypeIO   			IN OUT   	DMT_EVENT_TYPES.ID_EVENT_TYPE%type, 	-- Identificativo del tipo di evento da modificare. Se non valorizzato il tipo di evento è da inserire ex-novo
1216        																	-- In output, salvo in caso di errore, è sempre valorizzato	
1217        			DesEventIn				IN		DMT_EVENT_TYPES.DES_EVENT_TYPE%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1218        																	-- (obblig.) Descrizione del tipo di evento di processo/procedimento
1219        			CategoriaIn				IN		DMT_EVENT_TYPES.CATEGORIA%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1220        																	-- Categoria di appartenenza del tipo di evento (valori da dizionario)
1221        			FlgDurativoIn			IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1222        																	-- (valori 1/0/NULL) 1 indica evento con durata, 0 o NULL puntuale
1223        			DurataMaxIn				IN		DMT_EVENT_TYPES.DURATA_MAX%type DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1224        																	-- Giorni di massima durata dell'evento
1225        			FlgVldXTuttiProcAmmIn		IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1226        																	-- (valori 1/0/NULL) 1 indica tipo di evento definibile in tutti i procedimenti amministrativi
1227        			IdDocTypeIn				IN		DMT_DOC_TYPES.ID_DOC_TYPE%type DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1228        																	-- Id. del tipo di documento associato all'evento
1229        																	-- Viene considerato solo se l'argomento successivo è valorizzato
1230        			NomeDocTypeIn			IN		DMT_DOC_TYPES.NOME_DOC_TYPE%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1231        																	-- (viene considerato solo se l'evento è puntuale) Nome del tipo di documento associato all'evento (o suo inizio) 
1232        			CodTipoDataRelDocIn		IN		DMT_EVENT_TYPES.COD_TIPO_DATA_REL_DOC%type  DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1233        																	-- (viene considerato solo se l'evento è puntuale e se l'argomento precedente è valorizzato) Codice che indica quale data del documento associato corrisponde alla data dell'evento (valori da dizionario) 
1234        			AnnotazioniIn			IN		DMT_EVENT_TYPES.NOTE%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1235        																	-- Annotazioni sul tipo
1236        			CIProvEventTypeIn			IN		DMT_EVENT_TYPES.PROV_CI_EVT_TYPE%TYPE  DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1237        																	-- Codice identificativo del tipo di evento nel sistema di provenienza  
1238        			FlgLockedIn				IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1239        																	-- (valori 1/0/NULL) Indicatore di tipo di evento riservato dal sistema e non modificabile/cancellabile da GUI
1240        			FlgModStoredFuncIn		IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se le stored function scatenate da eventi del dato tipo e indicate nell'argomento successivo sono fornite in modo incrementale (=I) (solo quelle da inserire/modificare/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutte quelle già specificate (e relative al dominio di lavoro) in caso di tipo di evento da aggiornare
1241        			XMLStoredFuncIn			IN		CLOB DEFAULT NULL,				-- Lista con le stored function scatenate dal dato tipo di evento (XML conforme a schema LISTA_STD.xsd)					
1242        																	-- Ogni associazione a funzione è un tag "Riga" che può contenere le seguenti colonne:
1243        																	-- 1: Identificativo (ROWID) con cui la relazione tipo evento - stored function è già stata registrata in banca dati
1244        																	-- 2: Nome della stored function (con indicazione dello schema se diverso da DM_MASTER e del package)
1245        																	-- 3: Id. del dominio in cui vale la relazione (un dominio ricompreso o coincidente con quello di lavoro). 
1246        																	-- 	Se non specificato è il dominio di lavoro stesso e se questo è lo schema allora la relazione vale per tutti i sogg. prod./AOO dello schema
1247        																	-- 4: (valori 1/0/NULL) Flag di record-relazione da eliminare
1248        			FlgModAttrAddXEvtDelTipoIn	IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se gli attributi addizionali previsti per gli eventi del dato tipo e indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da inserire/modificare/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già specificati (e relativi al dominio di lavoro) in caso di tipo di evento da aggiornare
1249        			XMLAttrAddXEvtDelTipoIn		IN		CLOB DEFAULT NULL,				-- Lista con gli attributi addizionali previsti per gli eventi del dato tipo (XML conforme a schema LISTA_STD.xsd)					
1250        																	-- Ogni relazione tipo evento-attributo è tag "Riga" che può contenere le seguenti colonne:
1251        																	-- 1: Identificativo (ROWID) con cui la relazione è già stata registrata in banca dati
1252        																	-- 2: Nome identificativo dell'attributo (internal name)
1253        																	-- 3: Label con cui viene mostrato l'attributo nella GUI
1254        																	-- 4: (valori 1/0) Indicatore di obbligatorietà dell'attributo
1255        																	-- 5: Massimo numero di valori possibili per l'attributo 
1256        																	-- 6: Data di inizio validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità decorre da sempre.
1257        																	-- 7: Data di fine validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità è illimitata.
1258        																	-- 8: N.ro (valori da 1 a n) che indica la posizione dell'attributo tra tutti quelli associati
1259        																	-- 9: (valori 1/0/NULL) Flag di relazione da eliminare
1260        			AttributiAddIn			IN		CLOB DEFAULT NULL,				-- XML contenente nomi e valori degli attributi dinamici da aggiornare (conforme allo schema SezioneCache.xsd) 
1261        																	-- Gli attributi già presenti in DB e per i quali non c'è corrispondente nell'XML restano invariati
1262        																	-- Per tutti gli attributi vale quanto segue:
1263        																	-- Un attributo da settare è un tag "Variabile" dell'XML il cui tag "Nome" contiene il nome identificativo dell'attributo (ATTR_NAME di DMT_ATTRIBUTES_DEF)
1264        																	-- Un attributo da settare è una variabile con tag "ValoreSemplice" se è un attributo a singolo valore e non strutturato (cioè con tipo diverso da COMPLEX)
1265        																	-- altrimenti è una variabile con tag "Lista" che ha un'unica colonna con "Nro" pari a 1 se l'attributo non è strutturato, che ha invece tante colonne quanti gli attributi componenti (ordinate in base al loro NRO_ORD_IN_SUP) se l'attributo è complesso 
1266        																	-- Nel caso di variabili con tag "Lista" i valori specificati nell'XML si aggiungono o sostituiscono quelli già presenti in DB a seconda che nell'XML sia presente o meno una variabile con tag "Nome" pari a #Append_<Nome attributo> e tag "ValoreSemplice" pari a 1  
1267        																	-- In particolare se non sono specificati valori nell'XML (tag Lista vuoto) e se i valori non sono da aggiungere significa che tutti i valori dell'attributo già presenti in DB vanno rimossi
1268        			FlgIgnoreWarningIn 		IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 0 o NULL significa che in presenza di WARNING la stored si comporta come in caso di errore; se 1 gli WARNING vengono ignorati
1269        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1270        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1271        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1272        			WarningMsgOut			OUT		VARCHAR2,						-- Messaggio di warning (valorizzato solo se non c'è errore)
1273        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1274        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1275        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
1276        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
1277        
1278        	/*** Funzione di eliminazione di un tipo di evento 								***/	
1279        	/*** Si può specificare se l'eliminazione deve essere fisica o solo logica (annullamento)		***/
1280        	/*** Se non lo si specifica il sistema fa quella fisica se possibile, se no quella logica		***/
1281        	function DEventType(
1282        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1283        																	-- (obblig). Codice identificativo del token di connessione
1284        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1285        			IdEventTypeIn   			IN 		DMT_EVENT_TYPES.ID_EVENT_TYPE%TYPE,		-- (obblig.)Identificativo del tipo di evento 	
1286        			FlgCancFisicaIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL): Se 1 si richiede la cancellazione fisica; se 0 l'annullamento logico; se non è valorizzato quella possibile delle 2. 		
1287        			MotiviIn				IN		DMT_PROCESS_TYPES.MOTIVI_ANN%type,		-- Motivi della cancellazione/annullamento
1288        			FlgIgnoreWarningIn 		IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 0 o NULL significa che in presenza di WARNING la stored si comporta come in caso di errore; se 1 gli WARNING vengono ignorati
1289        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1290        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1291        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1292        			WarningMsgOut			OUT		VARCHAR2,						-- Messaggio di warning (valorizzato solo se non c'è errore)
1293        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1294        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1295        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
1296        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
1297        
1298        	/**** Funzione per estrarre i dati di un tipo di evento (tranne le sue realzioni con tipi di processi/procedimenti) ****/
1299        	FUNCTION LoadDettEventType(
1300        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1301        																	-- (obblig). Codice identificativo del token di connessione
1302        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1303        			IdEventTypeIO	   		IN OUT   	DMT_EVENT_TYPES.ID_EVENT_TYPE%TYPE, 	-- (obblig) Identificativo del tipo di evento di processo di cui caricare il dettaglio
1304        			DesEventOut				OUT		DMT_EVENT_TYPES.DES_EVENT_TYPE%type,	-- Descrizione del tipo di evento di processo/procedimento
1305        			CategoriaOut			OUT		DMT_EVENT_TYPES.CATEGORIA%type,		-- Categoria di appartenenza del tipo di evento
1306        			FlgDurativoOut			OUT		PLS_INTEGER,					-- (valori 1/0) 1 indica evento con durata, 0 evento puntuale
1307        			DurataMaxOut			OUT		DMT_EVENT_TYPES.DURATA_MAX%type,		-- Giorni di massima durata dell'evento
1308        			FlgVldXTuttiProcAmmOut		OUT		PLS_INTEGER,					-- (valori 1/0) 1 indica tipo di evento definibile in tutti i procedimenti amministrativi
1309        			IdDocTypeOut			OUT		DMT_DOC_TYPES.ID_DOC_TYPE%type,		-- Id. del tipo di documento associato all'evento
1310        			NomeDocTypeOut			OUT		DMT_DOC_TYPES.NOME_DOC_TYPE%type,		-- Nome del tipo di documento associato all'evento 
1311        			CodTipoDataRelDocOut		OUT		DMT_EVENT_TYPES.COD_TIPO_DATA_REL_DOC%type,
1312        																	-- Codice che indica quale data del documento associato corrisponde alla data dell'evento 
1313        			AnnotazioniOut			OUT		DMT_EVENT_TYPES.NOTE%TYPE,			-- Annotazioni sul tipo
1314        			CIProvEventTypeOUT		OUT 		DMT_EVENT_TYPES.PROV_CI_EVT_TYPE%TYPE,	-- Codice identificativo del tipo di evento nel sistema di provenienza   
1315        			FlgLockedOut			OUT		PLS_INTEGER,					-- (valori 1/0) Indicatore di tipo di evento riservato dal sistema e non modificabile/cancellabile da GUI
1316        			RowidOut				OUT		VARCHAR2,						-- Rowid del record del tipo di evento
1317        			XMLStoredFuncOut			OUT		NOCOPY CLOB,					-- Lista con le stored function scatenate dal dato tipo di evento (XML conforme a schema LISTA_STD.xsd)					
1318        																	-- Ogni associazione a funzione è un tag "Riga" che può contenere le seguenti colonne:
1319        																	-- 1: Identificativo (ROWID) con cui la relazione tipo evento - stored function è già stata registrata in banca dati
1320        																	-- 2: Nome della stored function (con indicazione dello schema se diverso da DM_MASTER e del package)
1321        																	-- 3: Id. del dominio in cui vale la relazione (se NULL la relazione vale per tutti i sogg. prod./AOO dello schema)
1322        			XMLAttrAddXEvtDelTipoOut	OUT		NOCOPY CLOB,					-- Lista con gli attributi addizionali previsti per gli eventi del dato tipo (XML conforme a schema LISTA_STD.xsd)					
1323        																	-- Ogni relazione tipo evento-attributo è tag "Riga" che contiene le seguenti colonne:
1324        																	-- 1: Identificativo (ROWID) con cui la relazione è già stata registrata in banca dati
1325        																	-- 2: Nome identificativo dell'attributo (internal name)
1326        																	-- 3: Label con cui viene mostrato l'attributo nella GUI
1327        																	-- 4: (valori 1/0) Indicatore di obbligatorietà dell'attributo
1328        																	-- 5: Massimo numero di valori possibili per l'attributo 
1329        																	-- 6: Data di inizio validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità decorre da sempre.
1330        																	-- 7: Data di fine validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità è illimitata.
1331        																	-- 8: N.ro (valori da 1 a n) che indica la posizione dell'attributo tra tutti quelli associati
1332        			AttributiAddOut			OUT		NOCOPY CLOB,					-- Lista degli eventuali ulteriori attributi con cui caratterizzare il tipo evento (XML conforme a schema LISTA_STD.xsd)
1333        																	-- Ogni attributo è un tag "Riga" che contiene le seguenti colonne:
1334        																	-- 1: N.ro (valori da 1 a n) del riquadro (fieldset) in cui mostrare l'attributo
1335        																	-- 2: Nome identificativo dell'attributo (ATTR_NAME)
1336        																	-- 3: Label del campo con cui rappresentare l'attributo 
1337        																	-- 4: Tipo di attributo. Valori: DATE, DATETIME, TEXT, TEXT-AREA, CHECK, INTEGER, EURO, DECIMAL, COMBO-BOX, LISTA
1338        																	-- 5: N.ro massimo di caratteri/cifre
1339        																	-- 6: Larghezza del campo con cui rappresentare l'attributo (size)
1340        																	-- 7: Valore dell'attributo
1341        																	-- 8: Label del riquadro (fieldset) in cui mostrare l'attributo
1342        																	-- 9: (valori 1/0) 1 indica che l'attributo è obbligatorio, 0 che è facoltativo
1343        																	-- 10: Altezza (in nro righe) del campo con cui rappresentare l'attributo (se TEXT-AREA)
1344        																	-- 11:(valori 1/0) 1 indica se l'attributo è modificabile, 0 che è in sola visualizzazione   
1345        			BachSizeOut				OUT		PLS_INTEGER,					-- Indica il massimo n.ro di record per ogni pagina da mostrare nelle liste delle stored function e degli attributi degli eventi del dato tipo
1346        			FlgMostraAltriAttrOut		OUT		PLS_INTEGER,					-- (valori 1/0) Se 1 nella GUI vanno mostrati gli attributi addizionali (ce ne sono di visibile all'utente), se 0 no
1347        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1348        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1349        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
1350        			return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1351        
1352        	/****** funzione per creare la relazione tra un certo tipo evento ed un set di tipi di processi / procedimenti				******/	
1353        	/*****  se per uno o più dei processi la relazione già esiste non viene dato errore e viene aggiornata la relazione già esistente 	******/
1354        	function AddRelEvtTy_ProcTy(	
1355        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1356        																	-- (obblig). Codice identificativo del token di connessione
1357        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1358        			IdEventTypeIn   			IN    	DMT_EVENT_TYPES.ID_EVENT_TYPE%type, 	-- Identificativo del tipo di evento. Viene considerato
1359        																	-- Viene considerato solo se l'argomento successivo è valorizzato
1360        			DesEventTypeIn			IN		DMT_EVENT_TYPES.DES_EVENT_TYPE%type, 	-- (obblig.) Descrizione del tipo di evento (o suo inizio: ricerca case-insensitive in like)
1361        			ProcessTypesXMLIn			IN		CLOB,							-- Lista dei tipi di processi/procedimenti da associare al tipo evento (XML conforme a schema LISTA_STD.xsd)					
1362        																	-- Ogni tipo di procedimento/processo è tag "Riga" che può contenere le seguenti colonne:
1363        																	-- 1: Identificativo del tipo di processo/procedimento
1364        																	-- 2: Nome del tipo di processo/procedimento (o suo inizio: ricerca case-insensitive in like)
1365        			FlgLockedIn				IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Indicatore di realzione tipo di evento - tipo di processo riservata dal sistema e non modificabile/cancellabile da GUI
1366        			FlgIgnoreWarningIn 		IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 0 o NULL significa che in presenza di WARNING la stored si comporta come in caso di errore; se 1 gli WARNING vengono ignorati
1367        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1368        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1369        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1370        			WarningMsgOut			OUT		VARCHAR2,						-- Messaggio di warning (valorizzato solo se non c'è errore)
1371        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1372        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1373        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
1374        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
1375        
1376        	/****** Funzione di eliminazione della relazione tra tipo di evento e tipo di processo/procedimento ******/	
1377        	function DRelEvtTy_ProcTy(
1378        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1379        																	-- (obblig). Codice identificativo del token di connessione
1380        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1381        			RowidIn				IN		VARCHAR2 DEFAULT NULL,				-- Rowid del record-associazione da cancellare
1382        			IdEventTypeIn   			IN 		DMT_EVENT_TYPES.ID_EVENT_TYPE%TYPE,		-- Identificativo del tipo di evento 	
1383        			IdProcessTypeIn			IN		DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type,	-- Identificativo del tipo di processo/procedimento 
1384        			MotiviIn				IN		DMT_ACTIVITIES.NOTE%type,			-- Motivi della cancellazione
1385        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1386        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1387        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1388        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1389        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1390        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
1391        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1392        
1393        	/**** 	Funzione per estrarre i dati di una relazione tipo di evento - tipo processo/procedimento 						*****/
1394        	/**** 	Se non c'è una relazione esplicita con il tipo proc. può essere dovuta al fatto che l'evento vale per tutti i tipi di proc.	*****/
1395        	FUNCTION LoadDettEvtTy_ProcTy(
1396        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1397        																	-- (obblig). Codice identificativo del token di connessione
1398        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1399        			IdEventTypeIn	   		IN   		DMT_EVENT_TYPES.ID_EVENT_TYPE%TYPE, 	-- (obblig) Identificativo del tipo di evento
1400        			IdProcessTypeIn			IN		DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type,	-- (obblig.) Identificativo del tipo di processo/procedimento
1401        			DesEventOut				OUT		DMT_EVENT_TYPES.DES_EVENT_TYPE%type,	-- Descrizione del tipo di evento di processo/procedimento
1402        			FlgDurativoOut			OUT		PLS_INTEGER,					-- (valori 1/0) 1 indica evento con durata, 0 evento puntuale
1403        			FlgVldXTuttiProcAmmOut		OUT		PLS_INTEGER,					-- (valori 1/0) 1 indica tipo di evento definibile in tutti i procedimenti amministrativi
1404        			NomeProcessTypeOut		OUT		DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type,	-- Nome del tipo di processo
1405        			FlgLockedOut			OUT		PLS_INTEGER,					-- (valori 1/0) Indicatore di tipo di relazione evento-procedimento riservata dal sistema e non modificabile/cancellabile da GUI
1406        			RowidOut				OUT		VARCHAR2,						-- Rowid del record di relazione tipo di evento - tipo di processo/procedimento
1407        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1408        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1409        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
1410        			return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1411        
1412        	/***** Funzione per settare le caratteristiche (ACL, destinatari di trasmisione ecc., n.ro) di un'attività in una data fase di un dato flusso WF o di un intera fase di un dato flusso WF *****/
1413        	function SetProfAttivitaFaseWF(
1414                    CodIdConnectionTokenIn        IN            DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1415                                                                            -- (obblig). Codice identificativo del token di connessione
1416                    IdUserLavoroIn            IN        DMT_USERS.ID_USER%type DEFAULT NULL,    -- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1417                    CITypeFlussoWFIn            IN        DMT_PROCESSES.PROV_CI_TY_FLUSSO_WF%type,    -- (obblig.) Codice identificativo del tipo di flusso
1418                    CIFaseIn                IN        VARCHAR2,                        -- (obblig.) Codice identificativo (ACTIVITY_NAME per Orcale WF) della fase
1419        																					-- Se cod. idenificativo della fase viene cambiato qui va specificato il nuovo valore
1420                    CIAttivitaIn            IN        VARCHAR2 DEFAULT NULL,                -- Codice identificativo (ACTIVITY_NAME per Orcale WF) dell'attività
1421                                                                            -- Se NULL si sta settando il profilo della fase
1422                    NroOrdineVisIn            IN        PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1423                                                                            -- (gestito solo per le attività) E' il n.ro d'ordine con cui l'attività deve apparire tra le attività della fase
1424                    FlgModACLIn                IN        VARCHAR2 DEFAULT 'I',                -- (valori I/C) Indica se le Access Control Entries (ACE) indicate nell'argomento successivo sono fornite in modo incrementale (=I) (solo quelle da aggiungere) oppure completo (=C), vale a dire che dovranno soppiantare tutte quelle già specificate
1425                    XMLACLIn                IN        CLOB DEFAULT NULL,                -- Lista con le ACE dell'attività o fase da aggiornare (XML conforme a schema LISTA_STD.xsd)                    
1426                                                                            -- Ogni ACE è un tag "Riga" che può contenere le seguenti colonne:
1427                                                                                -- 1: Flag che indica il tipo di soggetto a cui sono assentiti/negati permessi. Valori:
1428                                                                                --     SP    = Soggetto produttore 
1429                                                                                --     AOO    = AOO
1430                                                                                --     UT     = Utente
1431                                                                                --    SV    = Scrivania virtuale (vale a dire la scrivania che un utente occupa nello svolgimento di un dato ruolo nella struttura organizzativa)
1432                                                                                --    UO    = Unità organizzativa (vale a dire tutte le scrivanie virtuali ad essa afferenti)
1433                                                                                --    G    = Gruppo (di utenti, UO, scrivanie)
1434                                                                                --    R    = Ruolo amministrativo contestualizzato ovvero i soggetti che hanno un certo ruolo amministrativo (eventualmente rispetto ad una certa UO o un dato livello della struttura organizzativa o entrambi)
1435                                                                                --    RP    = Ruolo/attore di processo, ovvero il/i soggetti (che possono essere di uno qualsiasi dei tipi precedenti tranne SP e AOO) che svolgono un certo ruolo nell'ambito del processo
1436                                                                            -- 2: Id. del soggetto nell'anagrafe di origine (se SP o AOO è l'ID_SP_AOO, se UT l'ID_USER, se SV l'ID_SCRIVANIA, se UO l'ID_UO, se G l'ID_GRUPPO, se R l'ID_RUOLO_AMM, se RP il RUOLO_SOGG_IN_PROC)
1437                                                                            --    ATTENZIONE: Se non è congruente con le altre colonne che danno gli estremi del soggetto viene ignorato     
1438                                                                            -- 3: Denominazione/nome del destinatario del permesso (se trattasi di UO può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
1439                                                                            -- 4: Identificativo della UO cui appartiene la scrivania destinataria del permesso 
1440                                                                            -- 5: Nri livello della UO destinataria del permesso o a cui appartiene la scrivania destinataria (tutti o alcuni; però se si specifica un livello è obbligatorio indicare tutti i livelli superiori; vanno specificati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; sono separati dal separatore dei livelli valido per il soggetto produttore/AOO di appartenenza della UO)
1441                                                                            -- 6: Denominazione della UO cui appartiene la scrivania destinataria del permesso (può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
1442                                                                            -- 7: Codice che identifica nell'applicazione esterna da cui ci si connette l'utente destinatario del permesso o quello che occupa la scrivania destinataria del permesso
1443                                                                            -- 8: Denominazione dell'utente che occupa la scrivania destinataria del permesso
1444                                                                            -- 9: (valore 1) Indica che il destinatario del permesso, se UO, sono anche tutte le sue sotto-UO
1445                                                                            -- 10: (valori interi da 1 a n) Livello della struttura organizzativa in cui si espleta il ruolo amministrativo destinatario del permesso
1446                                                                            -- 11: Se colonna 1 =R: Codice del tipo di unità organizzativa in cui si espleta il ruolo amministrativo destinatario del permesso (alternativo alla colonna 10)
1447                                                                            --     Se colonna 1 =UT o SV: Username (delle credenziali locali) dell'utente destinatario del permesso o che occupa la scrivania destinataria del permesso
1448                                                                            -- 12: Se colonna 1 =R: Descrizione del tipo di unità organizzativa (es: settore, servizio, ecc) in cui si espleta il ruolo amministrativo destinatario del permesso (alternativo alla colonna 10)
1449                                                                            --    Se colonna 1 =UT o SV: N.ro di matricola dell'utente destinatario del permesso o che occupa la scrivania destinataria del permesso
1450                                                                            -- 13: Identificativo della UO in cui si espleta il ruolo amministrativo destinatario del permesso o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario del permesso
1451                                                                            -- 14: Denominazione/nome della UO in cui si espleta il ruolo amministrativo destinatario del permesso o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario del permesso (può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
1452                                                                            -- 15: Nri livello della UO in cui si espleta il ruolo amministrativo destinatario del permesso o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario del permesso (tutti o alcuni; però se si specifica un livello è obbligatorio indicare tutti i livelli superiori; vanno specificati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; sono separati dal separatore dei livelli valido per il soggetto produttore/AOO di appartenenza della UO)
1453                                                                            -- 16:(valore 1) Indica che il ruolo amministrativo destinatario del permesso si espleta anche nelle sotto-UO della/e UO rintracciate tramite i valori delle 3 colonne precedenti
1454                                                                            -- 17: Ruolo di processo (es: ufficio proponente) che hanno la/e UO in cui si espleta il ruolo o da cui risalire alla/e UO (con il livello o tipo indicati) in cui si espleta il ruolo indicato        
1455                                                                            -- 18: Ruolo di processo (es: Assessore di riferimento) che hanno la/e scrivanie da cui risalire alla/e UO (con il livello o tipo indicati) in cui si espleta il ruolo indicato        
1456                                                                            -- 19: Flag di visibilità dell'attività (o delle attività della fase). Valori:
1457                                                                                -- 1: Consentita
1458                                                                                -- 0: Negata
1459                                                                                -- NUL = Nulla di specificato 
1460                                                                            -- 20: Flag di eseguibilità dell'attività (o delle attività della fase). Valori:
1461                                                                                -- 1: Consentita
1462                                                                                -- 0: Negata
1463                                                                                -- NUL = Nulla di specificato 
1464                                                                            -- 21: Flag che indica se l'attività è abilitata (come esecuzione) al soggetto specificato. Valori:
1465                                                                                --    2 : solo se è assegnatario del documento/folder cui è relativo il processo
1466                                                                                --    1 : se il documento/folder cui è relativo il processo gli è assegnato o se non è assegnato ad alcuno (cioè salvo in caso di diversa assegnazione)
1467                                                                                --    0 o NULL: a prescindere dall'assegnazione del documento/folder cui è relativo il processo
1468                                                                            -- 22: (valori da 1 a 99): Se valorizzato significa che qualcuno corrispondente ad una ACE con NRO_ORD_SEQ valorizzato e < di quello della ACE corrente deve aver già svolto l'attività perchè la possa svolgere anche chi ricade nel soggetto della ACE corrente
1469                    FlgAssAbilIn            IN        PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1470                                                                            -- (valori 1/0/NULL) Se 1 indica che l''attività/le attività della fase è/sono disponibili comunque all''assegnatario dell''unità documentaria/folder cui è relativo il processo senza dover controllare che questi sia nell''ACL
1471                    ControlliObblVsFaseIn        IN        VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'NUM_VAL_NO_UPD'),
1472                                                                            -- (gestito solo per le attività) Se valorizzato significa che l''attività deve obbligatoriamente essere eseguita per poter chiudere la fase con uno degli esiti contenuti nel campo (MEANING dei LOOKUP_CODE separati da ;) o con qualunque esito (se vale <Qualsiasi esito>)
1473                    FlgModDettxEsitoIn        IN        VARCHAR2 DEFAULT 'I',                -- (valori I/C) Indica se i dettagli dell''attività indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da aggiungere) oppure completo (=C), vale a dire che dovranno soppiantare tutte quelli già specificati
1474                    XMLDettxEsitoIn            IN        CLOB DEFAULT NULL,                -- (gestito solo per le attività) Lista con i dettagli dell''attività (tra cui indicazione se implica trasmisione, presa in carico, restituzione dell''unità documentaria/folder cui è relativo il processo) eventulamente differenziati per i vari esiti della stessa (XML conforme a schema LISTA_STD.xsd)
1475                                                                            -- I dettagli relativi ad un esito sono un tag "Riga" che può contenere le seguenti colonne:
1476                                                                            -- ########TODO
1477                    FlgModDestTrasmIn            IN        VARCHAR2 DEFAULT 'I',                -- (valori I/C) Indica se i dati sui destinatari di trasmissione specificati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da aggiungere) oppure completo (=C), vale a dire che dovranno soppiantare tutte quelli già specificati
1478                    XMLDestTrasmIn            IN        CLOB DEFAULT NULL,                -- (gestito solo per le attività) Lista con i dati sui destinatari di trasmissione (eventualmente differenziati per esito dell'attività) che sono da aggiornare (XML conforme a schema LISTA_STD.xsd)
1479                                                                            -- Ogni destinatario di trasmissione è un tag "Riga" che può contenere le seguenti colonne:
1480                                                                            -- ########TODO
1481                    FlgModAttrAddEditabiliIn            IN        VARCHAR2 DEFAULT 'I',                -- (valori I/C) Indica se i dati sugli attributi custom editabili specificati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da aggiungere) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già specificati
1482                    NomiAttrAddEditabiliIn		IN		   CLOB DEFAULT NULL, 					-- Lista xml con 2 colonne:
1483        																						-- 1: nome (ATTR_NAME) di attributo custom editabile nel task
1484        																						-- 2: flag 1/0/NULL: se 1 indica che l'attributo è da eliminare
1485        			FlgRollBckFullIn            IN         PLS_INTEGER DEFAULT NULL,            -- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1486                                                                            -- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1487                    FlgAutoCommitIn            IN         PLS_INTEGER DEFAULT NULL,            -- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1488                    ErrContextOut            OUT        VARCHAR2,                        -- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1489                    ErrCodeOut                OUT        PLS_INTEGER,                    -- N.ro errore di uscita
1490                    ErrMsgOut                OUT         VARCHAR2,                        -- Messaggio d'errore
1491        			CIFaseOldIn                IN        VARCHAR2 DEFAULT NULL,           -- Vecchio cod. identificativo della fase di cui si sta settando il profilo (viene considerato solo se CIAttivitaIn non è valorizzato)
1492        																				  -- Se non valorizzato si intende che la fase non cambi il cod. identificativo
1493                    FlgCallByGUIIn			IN		PLS_INTEGER DEFAULT 1				-- (1/0/NULL) Se 1 se la stored è chiamata dalla GUI di una web application per cui gli id. dei soggetti non vengono considerati se non sono popolati anche altri campi visibili a video o se non sono congruenti con i valori dei campi stessi
1494        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0 (in caso di errore o warning)
1495        
1496        
1497        	----------funzione per cancellare una fase di processo (senza attività collegate) dalla DMT_DETT_ATTIVITA_WF
1498        	function DFaseWF(
1499        			CodIdConnectionTokenIn      IN            DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1500        																								-- (obblig). Codice identificativo del token di connessione
1501                    IdUserLavoroIn            	IN        DMT_USERS.ID_USER%type DEFAULT NULL,    		-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1502                    CITypeFlussoWFIn            IN        DMT_PROCESSES.PROV_CI_TY_FLUSSO_WF%type,    	-- (obblig.) Codice identificativo del tipo di flusso
1503                    CIFaseIn                IN        VARCHAR2,                        				  	-- (obblig.) Codice/nome identificativo della fase
1504        			FlgRollBckFullIn            IN         PLS_INTEGER DEFAULT NULL,            		-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1505        																								-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1506                    FlgAutoCommitIn            IN         PLS_INTEGER DEFAULT NULL,            			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1507                    ErrContextOut            OUT        VARCHAR2,                        				-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1508                    ErrCodeOut                OUT        PLS_INTEGER,                    				-- N.ro errore di uscita
1509                    ErrMsgOut                OUT         VARCHAR2                        				-- Messaggio d'errore
1510        			) return PLS_INTEGER;                                            					-- Vale 1 se tutto è andato a buon fine, altrimenti 0 (in caso di errore o warning)
1511        
1512        	/***** Funzione per estrarre le caratteristiche (ACL, destinatari di trasmisione ecc., n.ro) di un'attività in una data fase di un dato flusso WF o di un intera fase di un dato flusso WF *****/
1513        	function GetProfAttivitaFaseWF(	
1514        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1515        																	-- (obblig). Codice identificativo del token di connessione
1516        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1517        			CITypeFlussoWFIn			IN		DMT_PROCESSES.PROV_CI_TY_FLUSSO_WF%type,	-- (obblig.) Codice identificativo del tipo di flusso
1518        			CIFaseIn				IN		VARCHAR2,						-- (obblig.) Codice identificativo (ACTIVITY_NAME per Orcale WF) della fase
1519        			CIAttivitaIn			IN		VARCHAR2 DEFAULT NULL,				-- Codice identificativo (ACTIVITY_NAME per Orcale WF) dell'attività
1520        																	-- Se NULL si sta settando il profilo della fase
1521        			NroOrdineVisOut			OUT		PLS_INTEGER,					-- (solo per le attività) E' il n.ro d'ordine con cui l'attività deve apparire tra le attività della fase
1522        			XMLACLOut				OUT		NOCOPY CLOB,					-- Lista con le ACE dell'attività o fase (XML conforme a schema LISTA_STD.xsd)					
1523        																	-- Ogni ACE è un tag "Riga" che che contiene le seguenti colonne:
1524        																	-- 1: Flag che indica il tipo di soggetto a cui sono assentiti/negati permessi. Valori:
1525        																		-- 	SP	= Soggetto produttore 
1526        																		-- 	AOO	= AOO
1527        																		-- 	UT 	= Utente
1528        																		--	SV	= Scrivania virtuale (vale a dire la scrivania che un utente occupa nello svolgimento di un dato ruolo nella struttura organizzativa)
1529        																		--	UO	= Unità organizzativa (vale a dire tutte le scrivanie virtuali ad essa afferenti)
1530        																		--	G	= Gruppo (di utenti, UO, scrivanie)
1531        																		--	R	= Ruolo amministrativo contestualizzato ovvero i soggetti che hanno un certo ruolo amministrativo (eventualmente rispetto ad una certa UO o un dato livello della struttura organizzativa o entrambi)
1532        																		--	RP	= Ruolo/attore di processo, ovvero il/i soggetti (che possono essere di uno qualsiasi dei tipi precedenti tranne SP e AOO) che svolgono un certo ruolo nell'ambito del processo
1533        																	-- 2: Id. del soggetto nell'anagrafe di origine (se SP o AOO è l'ID_SP_AOO, se UT l'ID_USER, se SV l'ID_SCRIVANIA, se UO l'ID_UO, se G l'ID_GRUPPO, se R l'ID_RUOLO_AMM, se RP il RUOLO_SOGG_IN_PROC)
1534        																	-- 3: Denominazione/nome del destinatario del permesso 
1535        																	-- 4: Identificativo della UO cui appartiene la scrivania destinataria del permesso 
1536        																	-- 5: Nri livello della UO destinataria del permesso o a cui appartiene la scrivania destinataria (sono specificati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; sono separati dal separatore dei livelli valido per il soggetto produttore/AOO di appartenenza della UO)
1537        																	-- 6: Denominazione della UO cui appartiene la scrivania destinataria del permesso
1538        																	-- 7: Codice che identifica nell'applicazione esterna da cui ci si connette l'utente destinatario del permesso o quello che occupa la scrivania destinataria del permesso
1539        																	-- 8: Denominazione dell'utente che occupa la scrivania destinataria del permesso
1540        																	-- 9: (valore 1) Indica che il destinatario del permesso, se UO, sono anche tutte le sue sotto-UO
1541        																	-- 10: (valori interi da 1 a n) Livello della struttura organizzativa in cui si espleta il ruolo amministrativo destinatario del permesso
1542        																	-- 11: Se colonna 1 =R: Codice del tipo di unità organizzativa in cui si espleta il ruolo amministrativo destinatario del permesso (alternativo alla colonna 10)
1543        																	-- 	Se colonna 1 =UT o SV: Username (delle credenziali locali) dell'utente destinatario del permesso o che occupa la scrivania destinataria del permesso
1544        																	-- 12: Se colonna 1 =R: Descrizione del tipo di unità organizzativa (es: settore, servizio, ecc) in cui si espleta il ruolo amministrativo destinatario del permesso (alternativo alla colonna 10)
1545        																	--	Se colonna 1 =UT o SV: N.ro di matricola dell'utente destinatario del permesso o che occupa la scrivania destinataria del permesso
1546        																	-- 13: Identificativo della UO in cui si espleta il ruolo amministrativo destinatario del permesso o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario del permesso
1547        																	-- 14: Denominazione/nome della UO in cui si espleta il ruolo amministrativo destinatario del permesso o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario del permesso (può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
1548        																	-- 15: Nri livello della UO in cui si espleta il ruolo amministrativo destinatario del permesso o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario del permesso (tutti o alcuni; però se si specifica un livello è obbligatorio indicare tutti i livelli superiori; vanno specificati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; sono separati dal separatore dei livelli valido per il soggetto produttore/AOO di appartenenza della UO)
1549        																	-- 16:(valore 1) Indica che il ruolo amministrativo destinatario del permesso si espleta anche nelle sotto-UO della/e UO rintracciate tramite i valori delle 3 colonne precedenti
1550        																	-- 17: Ruolo di processo (es: ufficio proponente) che hanno la/e UO in cui si espleta il ruolo o da cui risalire alla/e UO (con il livello o tipo indicati) in cui si espleta il ruolo indicato		
1551        																	-- 18: Ruolo di processo (es: Assessore di riferimento) che hanno la/e scrivanie da cui risalire alla/e UO (con il livello o tipo indicati) in cui si espleta il ruolo indicato		
1552        																	-- 19: Flag di visibilità dell'attività (o delle attività della fase). Valori:
1553        																		-- 1: Consentita
1554        																		-- 0: Negata
1555        																		-- NUL = Nulla di specificato 
1556        																	-- 20: Flag di eseguibilità dell'attività (o delle attività della fase). Valori:
1557        																		-- 1: Consentita
1558        																		-- 0: Negata
1559        																		-- NUL = Nulla di specificato 
1560        																	-- 21: Flag che indica se l'attività è abilitata (come esecuzione) al soggetto specificato. Valori:
1561        																		--	2 : solo se è assegnatario del documento/folder cui è relativo il processo
1562        																		--	1 : se il documento/folder cui è relativo il processo gli è assegnato o se non è assegnato ad alcuno (cioè salvo in caso di diversa assegnazione)
1563        																		--	0 o NULL: a prescindere dall'assegnazione del documento/folder cui è relativo il processo
1564        																	-- 22: (valori da 1 a 99): Se valorizzato significa che qualcuno corrispondente ad una ACE con NRO_ORD_SEQ valorizzato e < di quello della ACE corrente deve aver già svolto l'attività perchè la possa svolgere anche chi ricade nel soggetto della ACE corrente
1565        																	-- 29: Dati identificativi del destinatario del permesso
1566        			FlgAssAbilOut			OUT		PLS_INTEGER,					-- (valori 1/0) Se 1 indica che l''attività/le attività della fase è/sono disponibili comunque all''assegnatario dell''unità documentaria/folder cui è relativo il processo senza dover controllare che questi sia nell''ACL
1567        			ControlliObblVsFaseOut		OUT		VARCHAR2,						-- (solo per le attività) Se valorizzato significa che l''attività deve obbligatoriamente essere eseguita per poter chiudere la fase con uno degli esiti contenuti nel campo (MEANING dei LOOKUP_CODE separati da ;) o con qualunque esito (se vale <Qualsiasi esito>)
1568        			XMLDettxEsitoOut			OUT		NOCOPY CLOB,					-- (solo per le attività) Lista con i dettagli dell''attività (tra cui indicazione se implica trasmisione, presa in carico, restituzione dell''unità documentaria/folder cui è relativo il processo) eventulamente differenziati per i vari esiti della stessa (XML conforme a schema LISTA_STD.xsd)					
1569        																	-- I dettagli relativi ad un esito sono un tag "Riga" che contiene le seguenti colonne:
1570        																	-- ########TODO
1571        			XMLDestTrasmOut			OUT		NOCOPY CLOB,					-- (solo per le attività) Lista con i dati sui destinatari di trasmissione, eventualmente differenziati per esito dell'attività (XML conforme a schema LISTA_STD.xsd)					
1572        																	-- Ogni destinatario di trasmissione è un tag "Riga" che contiene le seguenti colonne:
1573        																	-- ########TODO
1574        			NomiAttrAddEditabiliOut	OUT		CLOB, 					-- Lista xml con gli attributi custom editabili nel task
1575        																	-- Ogni attributo è una riga contenente le colonne:
1576        																	--1: ATTR_NAME: nome identificativo attributo
1577        																	--2: Descrizione/label attributo
1578        																	--3: tipo di attributo
1579        			BachSizeOut				OUT		PLS_INTEGER,					-- Indica il massimo n.ro di record per ogni pagina da mostrare nelle liste
1580        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1581        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1582        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
1583        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0 (in caso di errore o warning)
1584        
1585        
1586        	/**** Funzione per ottenere la lista dei periodi e scadenze da monitorare in un dato tipo di processo/procedimento ****/
1587        	FUNCTION TrovaScadenzeProcType(
1588        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1589        																	-- (obblig). Codice identificativo del token di connessione
1590        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1591        			IdProcessTypeIO   		IN OUT   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type,	-- Identificativo del tipo di processo/procedimento di cui estrarre i periodi da monitorare e le scadenze. 	
1592        																	-- In output, salvo in caso di errore, è sempre valorizzato	
1593        			NomeProcessTypeIO			IN OUT	DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type, -- Nome del tipo di processo/procedimento di cui estrarre i periodi da monitorare e le scadenze (o suo inizio; ricerca case-insensitive in like).
1594        																	-- In output, salvo in caso di errore, è sempre valorizzato
1595        			FlgSoloVldIn 			IN 		INTEGER DEFAULT 1, 				-- (valori 1/0/NULL) 1° filtro di ricerca: Se 1 indica se si devono estrarre solo i periodi da monitorare e le scadenze validi alla data odierna
1596        			TsVldIn				IN 		VARCHAR2 DEFAULT NULL,				-- 2° filtro di ricerca: Stinga con il timestamp (nel formato GG/MM/AAAA HH24:MI:SS) a cui devono essere validi i periodi da monitorare e le scadenze
1597        			DesScadenzaIn			IN		VARCHAR2 DEFAULT NULL,				-- 3° filtro di ricerca: descrizione del periodo da monitorare o scadenza (ricerca case insensitive in like; il % finale non viene forzato)
1598        			------------- inizio argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
1599        			ColOrderByIO			IN OUT	VARCHAR2,						-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso (si può ordinare per tutte le colonne da 2 a 6). Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
1600        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
1601        																	-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
1602        			FlgDescOrderByIO  		IN OUT	VARCHAR2,						-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
1603        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.			
1604        			FlgSenzaPaginazioneIn 		IN 		PLS_INTEGER DEFAULT NULL,            	-- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
1605        			NroPaginaIO      			IN OUT	PLS_INTEGER,                  		-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
1606           			BachSizeIO				IN OUT	PLS_INTEGER,					-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)  
1607        																	-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro				
1608        			OverFlowLimitIn			IN		PLS_INTEGER DEFAULT NULL,			-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow
1609        			FlgSenzaTotIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
1610        			NroTotRecOut			OUT		PLS_INTEGER,					-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina)
1611             			NroRecInPaginaOut 		OUT   	PLS_INTEGER,                     		-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
1612        			------------- fine argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
1613        			ListaXMLOut				OUT		NOCOPY CLOB,					-- Lista degli periodi da monitorare e scadenze trovati (XML conforme a schema LISTA_STD.xsd)
1614        																	-- Ogni periodo da monitorare o scadenza è un tag Riga che può contenere le seguenti colonne: 
1615        																	-- 1: Identificativo del periodo/scadenza da monitorare (rowid del record in DB)
1616        																	-- 2: (valore P/S) Indica se trattasi di periodo da monitorare (=P) o scadenza puntuale (=S) 
1617        																	-- 3: Descrizione del periodo/scadenza da monitorare  
1618        																	-- 4: Durata il cui superamento va segnalato (in giorni) (se trattasi di periodo)	
1619        																	-- 5: Data di inzio validità del periodo/scadenza da monitorare (nel formato dato dal parametro di conf. FMT_STD_DATA)
1620        																	-- 6: Data di fine validità del periodo/scadenza da monitorare (nel formato dato dal parametro di conf. FMT_STD_DATA)
1621        																	-- 7: (valori 1/0) Se 1 è un periodo/scadenza da monitorare alla data odierna
1622        																	-- 8: (valori 1/0) Se 1 è un periodo/scadenza da monitorare riservato dal sistema e non modificabile/cancellabile da applicativo
1623        			FlgAbilInsOut	 		OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se 1 si ha abilitazione a inserimento di periodi/scadenze da monitorare x scadenza
1624        			FlgAbilUpdOut 			OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se 1 si ha abilitazione a modifica di periodi/scadenze da monitorare x scadenza
1625        			FlgAbilDelOut 			OUT 		PLS_INTEGER,            			-- (valori 1/0) Se 1 si ha abilitazione a cancellazione di periodi/scadenze da monitorare x scadenza
1626        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1627        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1628        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
1629        			return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1630        
1631        	/****** Estrae i dati di un periodo/scadenza da monitorare di un dato tipo di processo/procedimento *****/
1632        	function LoadDettScadenzaProcType(
1633        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1634        																	-- (obblig). Codice identificativo del token di connessione
1635        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1636        			RowidIO				IN OUT	VARCHAR2,						-- Rowid del record-scadenza di cui estrarre i dati
1637        			IdProcessTypeIO   		IN OUT   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type, 	-- Identificativo del tipo di processo cui è relativa la scadenza
1638        			NomeProcessTypeOut		OUT		DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type,	-- Nome del tipo di processo/procedimento
1639        			FlgScadPuntualePeriodoOut	OUT		VARCHAR2,						-- (valori S/P)Indica se si tratta di una scadenza puntuale (=S) o di un periodo (=P)
1640        			DescrizioneIO			IN OUT	DMT_PROCESS_TYPE_SCAD.DES_SCADENZA%type ,	-- Descrizione della scadenza
1641        			DurataOut				OUT		DMT_PROCESS_TYPE_SCAD.DURATA%type,		-- Durata (in giorni) superata la quale la scadenza legata al periodo va segnalata come sforata
1642        			DtInizioVldOut			OUT		VARCHAR2,						-- Data di inizio validità (nel formato dato dal parametro di conf. FMT_STD_DATA).
1643        			DtFineVldOut			OUT		VARCHAR2,						-- Data di fine validità (nel formato dato dal parametro di conf. FMT_STD_DATA).
1644        			AnnotazioniOut			OUT		DMT_PROCESS_TYPE_SCAD.NOTE%TYPE,		-- Annotazioni sul periodo/scadenza da monitorare/scadenza
1645        			FlgLockedOut			OUT		PLS_INTEGER,					-- (valori 1/0) Indicatore di scadenza riservata dal sistema e non modificabile/cancellabile da GUI
1646        			XMLStartOut				OUT		NOCOPY CLOB,					-- Lista con ciò che scandisce l'inizio del periodo da monitorare (XML conforme a schema LISTA_STD.xsd)					
1647        																	-- Ogni inizio è un tag "Riga" che contiene le seguenti colonne:
1648        																	-- 1: Flag che indica da che cosa è scandito l'inizio. Valori ammessi:
1649        																	--		AE = Attività WF/Evento; 
1650        																	--		F  = Fase WF, 
1651        																	-- 		AP = Attributo data del tipo di processo/procedimento
1652        																	--		DD = Data di un documento del processo
1653        																	--		DF = Data fissa
1654        																	-- 2: Specifica ciò da cui è scandito l'inizio. E' così valorizzato:
1655        																	--		Se colonna 1 vale AE: ACTIVITY_NAME dell'attività WF preceduto dal suffisso A; o ID_TYPE_EVENT del tipo dell'evento preceduto da E;
1656        																	--		Se colonna 1 vale F : ACTIVITY_NAME della fase WF  
1657        																	--		Se colonna 1 vale AP: ATTR_NAME dell'attribuo del tipo processo
1658        																	--		Se colonna 1 vale DD: ID_DOC_TYPE del tipo di documento
1659        																	--		Se colonna 1 vale DF: data espressa nel formato dato dal parametro di config. FMT_STD_DATA
1660        																	-- 3: (valorizzato solo se per eventi, fasi) Flag che dà una prima indicazione su qual è la la data legata all'evento/fase da cui inizia la scadenza. Valori ammessi:
1661        																	-- 		I = Data e ora di inizio della fase/evento
1662        																	--		F = Data e ora di completamento della fase/evento
1663        																	--		E = Un'attributo data dell'evento
1664        																	--		D = Una data del documento associato all'evento
1665        																	-- 4: (valorizzato solo se colonna 3 vale E o D o colonna 1=DD). E' così valorizzato:
1666        																	--		Se colonna 3 vale E: ATTR_NAME dell'attributo data legato al tipo di evento da cui inizia la scadenza
1667        																	--		Se colonna 3 vale D o colonna 1=DD: COD_VALUE della voce della dictionary entry TIPO_DATA_DOC che indica quale data del documento (del tipo indicato o quello associato a un evento del tipo indicato)	
1668        																	-- 5: (valorizzato solo se colonna 3 vale F o colonna 1=AE e colonna 2 inizia per "A;") Lista degli esiti dell'attività/fase (i loro meaning, nel caso di Oracle WF) - separati da ; - per cui il completamento dell'attività/fase dà inizio al periodo (il valore <Qualsiasi esito> indica qualsiasi esito)
1669        																	--     Se nessun esito è specificato il completamento dell'attività/fase dà inizio al periodo con qualsiasi esito.
1670        																	-- 6: Descrizione (da mostrare nella GUI) di cosa dà inizio al periodo (tiene conto di tutte le info nelle colonne precedenti
1671        																	-- ATTENZIONE: se non c'è alcuna riga significa che non si tratta di un periodo ma di una scadenza puntuale													
1672        			XMLEndOut				OUT		NOCOPY CLOB,					-- Lista con ciò che scandisce la fine del periodo da monitorare o la scadenza(XML conforme a schema LISTA_STD.xsd)					
1673        																	-- Ogni fine è un tag "Riga" che contiene le seguenti colonne:
1674        																	-- 1: Flag che indica da che cosa è scandito la fine del periodo da monitorare o la scadenza. Valori ammessi:
1675        																	--		AE = Attività WF/Evento; 
1676        																	--		F  = Fase WF, 
1677        																	-- 		AP = Attributo data del tipo di processo/procedimento
1678        																	--		DD = Data di un documento del processo
1679        																	--		DF = Data fissa
1680        																	-- 2: Specifica ciò da cui è scandito l'inizio. E' così valorizzato:
1681        																	--		Se colonna 1 vale AE: ACTIVITY_NAME dell'attività WF preceduto dal suffisso A; o ID_TYPE_EVENT del tipo dell'evento preceduto da E;
1682        																	--		Se colonna 1 vale F : ACTIVITY_NAME della fase WF  
1683        																	--		Se colonna 1 vale AP: ATTR_NAME dell'attribuo del tipo processo
1684        																	--		Se colonna 1 vale DD: ID_DOC_TYPE del tipo di documento
1685        																	--		Se colonna 1 vale DF: data espressa nel formato dato dal parametro di config. FMT_STD_DATA
1686        																	-- 3: (valorizzato solo se per eventi, fasi) Flag che dà una prima indicazione su qual è la la data legata all'evento/fase con cui finisce/scatta la scadenza. Valori ammessi:
1687        																	-- 		I = Data e ora di inizio della fase/evento
1688        																	--		F = Data e ora di completamento della fase/evento
1689        																	--		E = Un'attributo data dell'evento
1690        																	--		D = Una data del documento associato all'evento
1691        																	-- 4: (valorizzato solo se colonna 3 vale E o D o colonna 1=DD). E' così valorizzato:
1692        																	--		Se colonna 3 vale E: ATTR_NAME dell'attributo data legato al tipo di evento con cui finisce il periodo/che corrisponde alla scadenza
1693        																	--		Se colonna 3 vale D o colonna 1=DD: COD_VALUE della voce della dictionary entry TIPO_DATA_DOC che indica quale data del documento (del tipo indicato o quello associato a un evento del tipo indicato)	
1694        																	-- 5: (va valorizzato solo se colonna 3 vale F o colonna 1=AE e colonna 2 inizia per "A;") Lista degli esiti dell'attività/fase (i loro meaning, nel caso di Oracle WF) - separati da ; - per cui il completamento dell'attività/fase conclude il periodo o corrisponde alla scadenza(il valore <Qualsiasi esito> indica qualsiasi esito)
1695        																	--     Se nessun esito è specificato il completamento dell'attività/fase conclude il periodo o corrisponde alla scadenza con qualsiasi esito.													
1696        																	-- 6: Descrizione (da mostrare nella GUI) di cosa conclude il periodo o corrisponde alla scadenza puntuale (tiene conto di tutte le info nelle colonne precedenti
1697        			BachSizeOut				OUT		PLS_INTEGER,					-- Indica il massimo n.ro di record per ogni pagina da mostrare nelle liste di start e end
1698        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1699        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1700        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
1701        			return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1702        
1703        	/***** funzione per creare o modificare un periodo o scadenza da monitorare in un dato tipo di processo/procedimento *****/ 
1704        	function IUScadenzaProcType(
1705        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1706        																	-- (obblig). Codice identificativo del token di connessione
1707        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1708        			CIScadenzaIO			IN OUT	VARCHAR2,						-- Codice (è il rowid del record di DB ) che identifica periodo da monitorare che si vuole modificare.
1709        																	-- Se in input non è valorizzato si intende che periodo da monitorare è da creare ex-novo
1710        																	-- In output, salvo in caso di errore, è sempre valorizzato
1711        			IdProcessTypeIO   		IN OUT   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type, 	-- Identificativo del tipo di processo cui è relativo il periodo da monitorare . E' obbligatorio se CIScadenzaIO è NULL in input (periodo da inserire)
1712        																	-- In output, salvo in caso di errore, è sempre valorizzato	
1713        			FlgScadPuntualePeriodoIn	IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1714        																	-- (obblig.; valori S/P) Indica se si tratta di una scadenza puntuale (=S) o di un periodo (=P)
1715        			DescrizioneIn			IN		DMT_PROCESS_TYPE_SCAD.DES_SCADENZA%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1716        																	-- (obblig.) Descrizione del periodo da monitorare/scadenza
1717        			DurataIn				IN		DMT_PROCESS_TYPE_SCAD.DURATA%type DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'STR_VAL_NO_UPD'),
1718        																	-- (obblig. se è una scadenza legata a un periodo) Durata (in giorni) superata la quale la scadenza legata al periodo va segnalata come sforata
1719        			DtInizioVldIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
1720        																	-- Data di inizio validità (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende attore valido da sempre
1721        			DtFineVldIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
1722        																	-- Data di fine validità (nel formato dato dal parametro di conf. FMT_STD_DATA). Se NULL si intende attore valido illimitatamente
1723        
1724        			AnnotazioniIn			IN		DMT_PROCESS_TYPE_SCAD.NOTE%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1725        																	-- Annotazioni sul periodo da monitorare/scadenza
1726        			FlgLockedIn				IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1727        																	-- (valori 1/0/NULL) Indicatore di scadenza riservata dal sistema e non modificabile/cancellabile da GUI
1728        			FlgModStartIn			IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se gli inizi del periodo indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da aggiungere) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già specificati in caso di scadenza da aggiornare
1729        			XMLStartIn				IN		CLOB  DEFAULT NULL,				-- Lista con ciò che scandisce l'inizio del periodo da monitorare (XML conforme a schema LISTA_STD.xsd)					
1730        																	-- Ogni inizio è un tag "Riga" che contiene le seguenti colonne:
1731        																	-- 1: (obblig.) Flag che indica da che cosa è scandito l'inizio. Valori ammessi:
1732        																	--		AE = Attività WF/Evento; 
1733        																	--		F  = Fase WF, 
1734        																	-- 		AP = Attributo data del tipo di processo/procedimento
1735        																	--		DD = Data di un documento del processo
1736        																	--		DF = Data fissa
1737        																	-- 2: Specifica ciò da cui è scandito l'inizio. Va così valorizzato:
1738        																	--		Se colonna 1 vale AE: ACTIVITY_NAME dell'attività WF preceduto dal suffisso A; o ID_TYPE_EVENT del tipo dell'evento preceduto da E;
1739        																	--		Se colonna 1 vale F : ACTIVITY_NAME della fase WF  
1740        																	--		Se colonna 1 vale AP: ATTR_NAME dell'attribuo del tipo processo
1741        																	--		Se colonna 1 vale DD: ID_DOC_TYPE del tipo di documento
1742        																	--		Se colonna 1 vale DF: data espressa nel formato dato dal parametro di config. FMT_STD_DATA
1743        																	-- 3: (va valorizzato ed è obbligatorio solo se per eventi e fasi) Flag che dà una prima indicazione su qual è la la data legata all'evento/fase da cui inizia la scadenza. Valori ammessi:
1744        																	-- 		I = Data e ora di inizio della fase/evento
1745        																	--		F = Data e ora di completamento della fase/evento
1746        																	--		E = Un'attributo data dell'evento
1747        																	--		D = Una data del documento associato all'evento
1748        																	-- 4: (va valorizzato solo se colonna 3 vale E o D o colonna 1=DD). Va così valorizzato:
1749        																	--		Se colonna 3 vale E: ATTR_NAME dell'attributo data legato al tipo di evento da cui inizia la scadenza
1750        																	--		Se colonna 3 vale D o colonna 1=DD: COD_VALUE della voce della dictionary entry TIPO_DATA_DOC che indica quale data del documento (del tipo indicato o quello associato a un evento del tipo indicato)	
1751        																	-- 5: (va valorizzato solo se colonna 3 vale F o colonna 1=AE e colonna 2 inizia per "A;") Lista degli esiti dell'attività/fase (i loro meaning, nel caso di Oracle WF) - separati da ; - per cui il completamento dell'attività/fase dà inizio al periodo (il valore <Qualsiasi esito> indica qualsiasi esito)
1752        																	--     Se nessun esito è specificato il completamento dell'attività/fase dà inizio al periodo con qualsiasi esito.													
1753        			FlgModEndIn				IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se la/le fini del periodo indicate nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelle da aggiungere) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelle già specificati in caso di scadenza da aggiornare
1754        			XMLEndIn				IN		CLOB  DEFAULT NULL,				-- Lista con ciò che scandisce la fine del periodo da monitorare o la scadenza(XML conforme a schema LISTA_STD.xsd)					
1755        																	-- Ogni fine periodo o scadenza è un tag "Riga" che contiene le seguenti colonne:
1756        																	-- 1: (obblig.) Flag che indica da che cosa è scandita la fine del periodo o la scadenza. Valori ammessi:
1757        																	--		AE = Attività WF/Evento; 
1758        																	--		F  = Fase WF, 
1759        																	-- 		AP = Attributo data del tipo di processo/procedimento
1760        																	--		DD = Data di un documento del processo
1761        																	--		DF = Data fissa
1762        																	-- 2: Specifica ciò da cui è scandita la fine del periodo o la scadenza. Va così valorizzato:
1763        																	--		Se colonna 1 vale AE: ACTIVITY_NAME dell'attività WF preceduto dal suffisso A; o ID_TYPE_EVENT del tipo dell'evento preceduto da E;
1764        																	--		Se colonna 1 vale F : ACTIVITY_NAME della fase WF  
1765        																	--		Se colonna 1 vale AP: ATTR_NAME dell'attribuo del tipo processo
1766        																	--		Se colonna 1 vale DD: ID_DOC_TYPE del tipo di documento
1767        																	--		Se colonna 1 vale DF: data espressa nel formato dato dal parametro di config. FMT_STD_DATA
1768        																	-- 3: (va valorizzato ed è obbligatorio solo se per eventi, fasi) Flag che dà una prima indicazione su qual è la la data legata all'evento/fase con cui finisce il periodo/che corrisponde alla scadenza. Valori ammessi:
1769        																	-- 		I = Data e ora di inizio della fase/evento
1770        																	--		F = Data e ora di completamento della fase/evento
1771        																	--		E = Un'attributo data dell'evento
1772        																	--		D = Una data del documento associato all'evento
1773        																	-- 4: (va valorizzato solo se colonna 3 vale E o D o colonna 1=DD). Va così valorizzato:
1774        																	--		Se colonna 3 vale E: ATTR_NAME dell'attributo data legato al tipo di evento con cui finisce il periodo/che corrisponde alla scadenza
1775        																	--		Se colonna 3 vale D o colonna 1=DD: COD_VALUE della voce della dictionary entry TIPO_DATA_DOC che indica quale data del documento (del tipo indicato o quello associato a un evento del tipo indicato)	
1776        																	-- 5: (va valorizzato solo se colonna 3 vale F o colonna 1=AE e colonna 2 inizia per "A;") Lista degli esiti dell'attività/fase (i loro meaning, nel caso di Oracle WF) - separati da ; - per cui il completamento dell'attività/fase conclude il periodo o determina la scadenza (il valore <Qualsiasi esito> indica qualsiasi esito)
1777        																	--     Se nessun esito è specificato il completamento dell'attività/fase conclude il periodo o determina la scadenza con qualsiasi esito.													
1778        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1779        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1780        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1781        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1782        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1783        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
1784        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1785        
1786        	/***** funzione che serve a controllare i dati di definizione di un'inizio/fine scadenza definita su tipo procedimento *****/
1787        	function CtrlStartEndScad(
1788        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1789        																	-- (obblig). Codice identificativo del token di connessione
1790        			IdProcessTypeIn			IN		DMT_PROCESSES.ID_PROCESS_TYPE%type,		-- (obblig.) Id. del tipo procedimento cui è realtiva la scadenza
1791        			FlgScadPuntualePeriodoIn	IN		VARCHAR2,						-- (obblig.; valori S/P) Indica se l'inizio/fine da controllare è legato a una scadenza puntuale (=S) o un periodo (=P)
1792        			FlgStartEndIn			IN		VARCHAR2,						-- (obblig. se FlgScadPuntualePeriodoIn=P; valori S/E) Indica se i  dati da controllare sono relativi all'inizio (S) o fine (E) del periodo
1793        			FlgTipoIn				IN		VARCHAR2,						-- (obblig.) Flag che indica da che cosa è scandito l'inizio/fine. Valori ammessi:
1794        																	--		AE = Attività WF/Evento; 
1795        																	--		F  = Fase WF, 
1796        																	-- 		AP = Attributo data del tipo di processo/procedimento
1797        																	--		DD = Data di un documento del processo
1798        																	--		DF = Data fissa
1799        			ValoreIn				IN		VARCHAR2,						-- Specifica ciò da cui è scandito l'inizio/fine. Va così valorizzato:
1800        																	--		Se colonna 1 vale AE: ACTIVITY_NAME dell'attività WF preceduto dal suffisso A; o ID_TYPE_EVENT del tipo dell'evento preceduto da E;
1801        																	--		Se colonna 1 vale F : ACTIVITY_NAME della fase WF  
1802        																	--		Se colonna 1 vale AP: ATTR_NAME dell'attribuo del tipo processo
1803        																	--		Se colonna 1 vale DD: ID_DOC_TYPE del tipo di documento
1804        																	--		Se colonna 1 vale DF: data espressa nel formato dato dal parametro di config. FMT_STD_DATA
1805        			Dettaglio1In			IN 		VARCHAR2,						-- (va valorizzato ed è obbligatorio solo se per eventi e fasi) Flag che dà una prima indicazione su qual è la la data legata all'evento/fase che dà inizio o fine alla scadenza. Valori ammessi:
1806        																	-- 		I = Data e ora di inizio della fase/evento
1807        																	--		F = Data e ora di completamento della fase/evento
1808        																	--		E = Un'attributo data dell'evento
1809        																	--		D = Una data del documento associato all'evento
1810        			Dettaglio2In			IN 		VARCHAR2,						-- (va valorizzato solo se FlgTipoIn='AE' e Dettaglio1In vale E o D o se FlgTipoIn=DD). Va così valorizzato:
1811        																	--		Se colonna Dettaglio1In vale E: ATTR_NAME dell'attributo data legato al tipo di evento che dà inizio/fine alla scadenza
1812        																	--		Se colonna Dettaglio1In vale D o FlgTipoIn=DD: COD_VALUE della voce della dictionary entry TIPO_DATA_DOC che indica quale data del documento (del tipo indicato o quello associato a un evento del tipo indicato)	
1813        			ListaEsitiIn			IN		VARCHAR2,						-- (va valorizzato solo se Dettaglio1In vale F o FlgTipoIn=AE e ValoreIn inizia per "A;") Lista degli esiti dell'attività/fase (i loro meaning, nel caso di Oracle WF) - separati da ; - per cui il completamento dell'attività/fase dà inizio al periodo (il valore <Qualsiasi esito> indica qualsiasi esito)
1814        																	--     Se nessun esito è specificato il completamento dell'attività/fase dà inizio al periodo con qualsiasi esito.	
1815        			DesStartEndOut			OUT		VARCHAR2,						-- Descrizione dell'inizio/fine (ricavato dagli argomenti precedenti, se corretti)
1816        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1817        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1818        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
1819        			) return PLS_INTEGER;											-- Vale 1 se il controllo dà esito positivo, altrimenti 0
1820        
1821        	/****** Funzione di eliminazione di una periodo da monitorare o scadenza di un dato tipo di processo/procedimento ******/	
1822        	function DScadenzaProcType(
1823        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1824        																	-- (obblig). Codice identificativo del token di connessione
1825        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1826        			RowidIn				IN 		VARCHAR2 DEFAULT NULL,				-- Rowid del record-scadenza da cancellare
1827        			IdProcessTypeIn   		IN	   	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type DEFAULT NULL, 
1828        																	-- Identificativo del tipo di processo cui è relativa la scadenza
1829        			DescrizioneIn			IN		DMT_PROCESS_TYPE_SCAD.DES_SCADENZA%type DEFAULT NULL, 
1830        																	-- Descrizione della scadenza (ricerca case insensitive)
1831        			MotiviIn				IN		DMT_ACTIVITIES.NOTE%type,			-- Motivi della cancellazione
1832        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1833        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1834        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1835        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1836        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1837        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
1838        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1839        
1840        	/****** Funzione per ottenere la lista degli eventi derivati di un dato tipo evento o di una specifica coppia tipo evento - tipo procedimento *****/
1841        	function TrovaEventiDerivati(
1842        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1843        																	-- (obblig). Codice identificativo del token di connessione
1844        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1845        			IdEventTypeIn	   		IN   		DMT_EVENT_TYPES.ID_EVENT_TYPE%TYPE, 	-- (obblig) Identificativo del tipo di evento
1846        			IdProcessTypeIn			IN		DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type,	-- Identificativo del tipo di processo/procedimento
1847        			DesEventTypeOut			OUT		DMT_EVENT_TYPES.DES_EVENT_TYPE%type,	-- Descrizione del tipo di evento di processo/procedimento
1848        			NomeProcessTypeOut		OUT		DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type,	-- Nome del tipo di processo/procedimento
1849        			------------- inizio argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
1850        			ColOrderByIO			IN OUT	VARCHAR2,						-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso (si può ordinare per tutte le colonne da 2 a 3). Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
1851        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
1852        																	-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
1853        			FlgDescOrderByIO  		IN OUT	VARCHAR2,						-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
1854        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.			
1855        			FlgSenzaPaginazioneIn 		IN 		PLS_INTEGER DEFAULT NULL,            	-- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
1856        			NroPaginaIO      			IN OUT	PLS_INTEGER,                  		-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
1857           			BachSizeIO				IN OUT	PLS_INTEGER,					-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)  
1858        																	-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro				
1859        			OverFlowLimitIn			IN		PLS_INTEGER DEFAULT NULL,			-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow
1860        			FlgSenzaTotIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
1861        			NroTotRecOut			OUT		PLS_INTEGER,					-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina)
1862             			NroRecInPaginaOut 		OUT   	PLS_INTEGER,                     		-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
1863        			------------- fine argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
1864        			ListaXMLOut				OUT		NOCOPY CLOB,					-- Lista degli eventi derivati (XML conforme a schema LISTA_STD.xsd)
1865        																	-- Ogni evento derivato è un tag Riga che può contenere le seguenti colonne: 
1866        																	-- 1: Identificativo dell'evento derivato (rowid del record in DB)
1867        																	-- 2: Codice del tipo dell'evento. Valori ammessi:
1868        																	-- ST 	= Sospensione dei termini
1869        																	-- IT 	= Interruzione dei termini 
1870        																	-- RT 	= Ripresa dei termini sospesi/interrortti	
1871        																	-- IFE	= Inizio fase esterna
1872        																	-- FFE	= Fine fase esterna
1873        																	-- CP 	= Chiusura del procedimento con esito positivo
1874        																	-- CN 	= Chiusura del procedimento con esito negativo
1875        																	-- CA 	= Chiusura del procedimento per archiviazione/annullamento
1876        																	-- R 		= Riapertura del procedimento 
1877        																	-- 3: Descrizione del tipo di evento
1878        																	-- 4: Data dell'evento primario che fa scattare l'evento derivato
1879        																	-- 5: Esito/i dell'evento primario a cui è subordinato lo scattare dell'evento derivato	
1880        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1881        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1882        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
1883        			return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1884        
1885        	/***** funzione per ottenere i dati di dettaglio di un evento derivato (di un dato tipo evento o di un dato tipo evento in uno specifico tipo procedimento) *****/ 
1886        	function LoadDettEventoDerivato(
1887        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1888        																	-- (obblig). Codice identificativo del token di connessione
1889        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1890        			RowidEventoDerivIO		IN OUT	VARCHAR2,						-- (obblig.) Rowid del record dell'evento derivato
1891        			IdEventTypeMasterIO	   	IN OUT   	DMT_EVENT_TYPES.ID_EVENT_TYPE%TYPE, 	-- (obblig) Identificativo del tipo di evento primario (da cui deriva l'evento derivato)
1892        			IdProcessTypeIO			IN OUT	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type,	-- Identificativo del tipo di processo/procedimento (obblig. se si vogliono gli eventi derivati di un tipo evento in un dato tipo di processo/procedimento)
1893        			DesEventTypeMasterOut		OUT		DMT_EVENT_TYPES.DES_EVENT_TYPE%type,	-- Descrizione del tipo dell'evento primario (da cui deriva l'evento derivato)
1894        			FlgDurativoEvtMasterOut		OUT		PLS_INTEGER,					-- (valori 1/0) Indica se l'evento master è durativo (=1) o puntuale (=0)
1895        			NomeProcessTypeOut		OUT		DMT_PROCESS_TYPES.NOME_PROCESS_TYPE%type,	-- Nome del tipo di processo/procedimento (restituito valorizzato solo se IdProcessTypeIn è valorizzato) 
1896        			FlgTipoEvtDerivOut		OUT		VARCHAR2,						-- Indica il tipo dell'evento derivato. Valori possibili:
1897        																	-- ST 	= Sospensione dei termini
1898        																	-- IT 	= Interruzione dei termini 
1899        																	-- RT 	= Ripresa dei termini sospesi/interrortti	
1900        																	-- IFE	= Inizio fase esterna
1901        																	-- FFE	= Fine fase esterna
1902        																	-- CP 	= Chiusura del procedimento con esito positivo
1903        																	-- CN 	= Chiusura del procedimento con esito negativo
1904        																	-- CA 	= Chiusura del procedimento per archiviazione/annullamento
1905        																	-- R 		= Riapertura del procedimento
1906        			TipoDataDerivOut			OUT		VARCHAR2,						-- Indicazione macro sulla data legata all'evento master da cui deriva. Valori possibili:
1907        																	-- I = Data di inizio
1908        																	-- F = Data di fine
1909        																	-- E = Altro attributo data dell'evento master
1910        																	-- D = Una data del documento associato all'evento master
1911        			DettDataDerivOut			OUT		VARCHAR2,						-- Dettaglia la data legata all'evento master da cui deriva (valorizzato se TipoDataDerivOut vale E o D)
1912        																	-- E' il nome dell'attributo data se TipoDataDerivOut=E o il codice che indica la data del documento se TipoDataDerivOut=D 	
1913        			ListaEsitiDerivOut		OUT		VARCHAR2,						-- Lista delle descrizioni degli esiti (se più d'uno separati da ;) dell'evento master a fronte dei quali deriva l'evento figlio	
1914        			DurataMaxEvtDerivOut		OUT		INTEGER,						-- Massima durata (in giorni) dell'evento derivato se trattasi di interruzione o sospensione dei termini
1915        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1916        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1917        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
1918        			return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1919        
1920        	/****** funzione per creare o modificare un evento derivato (di un dato tipo evento o di un dato tipo evento in uno specifico tipo procedimento) ******/
1921        	function IUEventoDerivato(
1922        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1923        																	-- (obblig). Codice identificativo del token di connessione
1924        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1925        			RowidEventoDerivIO		IN OUT	VARCHAR2,						-- Rowid del record dell'evento derivato
1926        																	-- se in input non è valorizzato si intende che l'evento derivato è da creare ex-novo
1927        																	-- in output, in caso di successo, è sempre valorizzato
1928        			IdEventTypeMasterIO	   	IN OUT  	DMT_EVENT_TYPES.ID_EVENT_TYPE%TYPE, 	-- (obblig) Identificativo del tipo di evento primario (da cui deriva l'evento derivato)
1929        			IdProcessTypeIO			IN OUT	DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type,	-- Identificativo del tipo di processo/procedimento (obblig. se si vogliono gli eventi derivati di un tipo evento in un dato tipo di processo/procedimento)
1930        			FlgTipoEvtDerivIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1931        																	-- Indica il tipo dell'evento derivato. Valori possibili:
1932        																	-- ST 	= Sospensione dei termini
1933        																	-- IT 	= Interruzione dei termini 
1934        																	-- RT 	= Ripresa dei termini sospesi/interrortti	
1935        																	-- IFE	= Inizio fase esterna
1936        																	-- FFE	= Fine fase esterna
1937        																	-- CP 	= Chiusura del procedimento con esito positivo
1938        																	-- CN 	= Chiusura del procedimento con esito negativo
1939        																	-- CA 	= Chiusura del procedimento per archiviazione/annullamento
1940        																	-- R 		= Riapertura del procedimento
1941        			TipoDataDerivIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1942        																	-- Indicazione macro sulla data legata all'evento master da cui deriva. Valori possibili:
1943        																	-- I = Data di inizio
1944        																	-- F = Data di fine
1945        																	-- E = Altro attributo data dell'evento master
1946        																	-- D = Una data del documento associato all'evento master
1947        			DettDataDerivIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1948        																	-- Dettaglia la data legata all'evento master da cui deriva (da valorizzare se TipoDataDerivOut vale E o D)
1949        																	-- E' il nome dell'attributo data se TipoDataDerivOut=E o il codice che indica la data del documento se TipoDataDerivOut=D 	
1950        			ListaEsitiDerivIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1951        																	-- Lista delle descrizioni degli esiti (se più d'uno separati da ;) dell'evento master a fronte dei quali deriva l'evento figlio	
1952        			DurataMaxEvtDerivIn		IN		INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1953        																	-- Massima durata (in giorni) dell'evento derivato se trattasi di interruzione o sospensione dei termini
1954        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1955        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1956        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1957        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1958        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1959        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
1960        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
1961        
1962        	/****** funzione per cancellare un evento derivato (di un dato tipo evento o di un dato tipo evento in uno specifico tipo procedimento) ******/
1963        	function DEventoDerivato(
1964        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1965        																	-- (obblig). Codice identificativo del token di connessione
1966        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1967        			RowidEventoDerivIn		IN 		VARCHAR2,						-- (obblig.) Rowid del record dell'evento derivato
1968        			IdEventTypeMasterIn	   	IN    	DMT_EVENT_TYPES.ID_EVENT_TYPE%TYPE, 	-- (obblig) Identificativo del tipo di evento primario (da cui deriva l'evento derivato)
1969        			IdProcessTypeIn			IN 		DMT_PROCESS_TYPES.ID_PROCESS_TYPE%type DEFAULT NULL,	
1970        																	-- Identificativo del tipo di processo/procedimento (obblig. se trattasi di evento derivato di un tipo evento in un dato tipo di processo/procedimento)
1971        			MotiviIn				IN		DMT_ACTIVITIES.NOTE%type,			-- Motivi della cancellazione
1972        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1973        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1974        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1975        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1976        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1977        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
1978        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
1979        
1980        END DMPK_PROCESS_TYPES;
