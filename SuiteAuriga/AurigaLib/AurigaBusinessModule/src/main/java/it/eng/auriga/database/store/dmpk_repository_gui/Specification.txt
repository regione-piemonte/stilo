1        PACKAGE DMPK_REPOSITORY_GUI AUTHID CURRENT_USER IS
2        
3        	function LoadDettDoc(
4        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
5        																	-- (obblig). Codice identificativo del token di connessione
6        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
7        			IdDocIn				IN		DMT_DOCUMENTS.ID_DOC%type,			-- (obblig.) Id del documento
8        			DatiDocOut				OUT     NOCOPY CLOB,						-- Lista monoriga con i dati salienti di un documento (XML conforme a schema LISTA_STD.xsd)
9        																	-- L'unico tag "Riga" contiene le seguenti colonne:
10        																	-- 1: Identificativo (ID_DOC) del documento
11        																	-- 2: Codice del tipo di relazione del doc. con l'unità documentaria (tra cui P = Primario, ALL=Allegato)
12        																	-- 3: Descrizione del tipo di relazione del doc. con l'unità documentaria (tra Allegato)
13        																	-- 4: Identificativo del tipo di documento
14        																	-- 5: Nome del tipo di documento
15        																	-- 6: Descrizione/oggetto
16        																	-- 7: N.ro dell'eventuale ultima versione elettronica visibile all'utente
17        																	-- 8: N.ro dell'eventuale ultima versione elettronica del documento (visibile o meno all'utente)
18        																	-- 9: Nome con cui mostrare il file corrispondente all'eventuale ultima versione elettronica visibile all'utente
19        																	-- 10: (valori 1/NULL) Indica lo stato di pubblicata (1) o meno (NULL) dell'ultima versione elettronica visibile all'utente
20        																	-- 11: (valori 1/NULL) Indica (se 1) che l'ultima versione elettronica visibile all'utente deriva da una scansione
21        																	-- 12: Note dell'ultima versione elettronica dell'allegato visibile all'utente
22        																	-- 13: Bitmap (stringa di 1/0) di abilitazioni alle operazioni sul file del documento (l'ultima versione visibile)
23        																	-- 	I significati dei bit (caratteri di posizione i-esima) sono:
24        																	-- 	1° carattere: Abilitazione al versioning/modifica del file
25        																	-- 	2° carattere: Abilitazione alla firma del file
26        																	-- 	3° carattere: Abilitazione alla cancellazione di tutte le versioni del file
27        																	-- 	4° carattere: Abilitazione alla modifica delle note del file
28        																	-- 	5° carattere: Abilitazione alla modifica dello stato di pubblicazione del file
29        																	--	6° carattere: Abilitazione al lock del documento
30        																	--	7° carattere: Abilitazione al unlock del documento
31        																	--	8° carattere: Abilitazione al creare nuova versione non pubblicata
32        																	--	9° carattere: Abilitazione alla riproduzione - i.e. downolad, copia, stampa - del file
33        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
34        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
35        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
36        			return PLS_INTEGER;											-- 1 in caso di successo, 0 in caso di errore
37        
38        	/***** funzione per estrarre i dati delle unità documentarie collegate ad una data un'unità documentaria 	*****/
39        	function GetUDCollegate(
40        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
41        																	-- (obblig). Codice identificativo del token di connessione
42        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
43        			IdUDIn   				IN		DMT_UNITA_DOC.ID_UD%type, 			-- (obblig.) Identificativo dell'unità documentaria di cui estrarre le relazioni con altre unità documentarie
44        			ListaRelazioniVsUDOut		OUT		NOCOPY CLOB,					-- XML con la lista delle relazioni dell'unità documentaria con altre unità documentarie (relazioni di precedente-successivo ecc.)
45        																	-- Ogni relazione è un tag "Riga" che contiene le seguenti colonne:
46        																	-- 1: Identificativo dell'unità documentaria collegata
47        																	-- 2: Categoria di una registrazione/numerazione dell'unità documentaria collegata; valori ammessi: PG = Protocollo Generale; PP = Protocollo Particolare; R = Repertorio; E = Registrazione d'emergenza; A = Altro tipo di numerazione
48        																	-- 3: Sigla di una registrazione/numerazione dell'unità documentaria collegata
49        																	-- 4: Anno di una registrazione/numerazione dell'unità documentaria collegata
50        																	-- 5: N.ro di una registrazione/numerazione dell'unità documentaria collegata
51        																	-- 6: Codice della categoria/natura generale della relazione tra le due unità doc. (valori da dizionario)
52        																	-- 7: Descrizione della categoria/natura generale della relazione tra le due unità doc. (valori da dizionario)
53        																	-- 8: Codice del ruolo che svolge nella relazione l'unità documentaria di cui si sta caricando il dettaglio (valori da dizionario)
54        																	-- 9: Descrizione del ruolo che svolge nella relazione l'unità documentaria di cui si sta caricando il dettaglio (valori da dizionario)
55        																	-- 10: Codice del ruolo che svolge nella relazione l'unità documentaria collegata a quella di cui si sta caricando il dettaglio (valori da dizionario)
56        																	-- 11: Descrizione del ruolo che svolge nella relazione l'unità documentaria collegata a quella di cui si sta caricando il dettaglio (valori da dizionario)
57        																	-- 12: Dettagli della relazione (campo descrittivo)
58        																	-- 13: Oggetto dell'unità documentaria collegata
59        																	-- 14: ID_DOC del documento primario dell'unità documentaria collegata
60        																	-- 15: N.ro dell'ultima versione visibile del documento primario dell'unità documentaria collegata
61        																	-- 16: Nome con cui mostrare il file dell'ultima versione visibile del documento primario dell'unità documentaria collegata
62        																	-- 17: Nome dell'unità documentaria collegata
63        																	-- 18: Estremi di registrazione/numerazione dell'unità documentaria collegata
64        																	-- 19: Dati di trace sul collegamento tra le due UD (creato da chi, quando)
65        																	-- 20: Rowid del record della relazione
66        																	-- 21: (flag 1/0) Se 1 indica che l'utente di lavoro NON ha diritti di accesso sull'unità documentaria collegata, o che non può vederne tutti i dati e file in chiaro
67        																	--				  Se 1 il collegamento NON può essere rimosso nè variato dall'utente di lavoro
68        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
69        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
70        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
71        			)return PLS_INTEGER;											-- 1 in caso di successo, 0 in caso di errore
72        
73        	/*****	funzione per controllare i dati di una relazione di un'unità documentaria IdUDIn con un'altra unità doc. 	******/
74        	/***** 	i dati della relazione sono nel clob in input (unica riga in un XML conforme a schema di una LISTA_STD.xsd)	******/
75        	/*****	I dati della relazione vengono rielaborati e restituiti pronti per l'inserimento/aggiornamento 			******/
76        	function CtrlDatiUDCollegata(
77        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
78        																	-- (obblig). Codice identificativo del token di connessione
79        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
80        			IdUDIn   				IN		DMT_UNITA_DOC.ID_UD%type, 			-- (obblig.) Identificativo dell'unità documentaria vs cui c'è la relazione
81        			XMLRelazioneVsUDIO		IN OUT	NOCOPY CLOB,					-- XML con i dati della relazioni dell'unità documentaria IdUdIn con un altra unità documentaria (relazione di precedente-successivo ecc.)
82        																	-- Contiene un solo tag "Riga" con le seguenti colonne:
83        																	-- 1: Identificativo dell'unità documentaria collegata
84        																	-- 2: Categoria di una registrazione/numerazione dell'unità documentaria collegata; valori ammessi: PG = Protocollo Generale; PP = Protocollo Particolare; R = Repertorio; E = Registrazione d'emergenza; A = Altro tipo di numerazione
85        																	-- 3: Sigla di una registrazione/numerazione dell'unità documentaria collegata
86        																	-- 4: Anno di una registrazione/numerazione dell'unità documentaria collegata
87        																	-- 5: N.ro di una registrazione/numerazione dell'unità documentaria collegata
88        																	-- 6: Codice della categoria/natura generale della relazione tra le due unità doc. (valori da dizionario)
89        																	-- 7: Descrizione della categoria/natura generale della relazione tra le due unità doc. (valori da dizionario)
90        																	-- 8: Codice del ruolo che svolge nella relazione l'unità documentaria di cui si sta caricando il dettaglio (valori da dizionario)
91        																	-- 9: Descrizione del ruolo che svolge nella relazione l'unità documentaria di cui si sta caricando il dettaglio (valori da dizionario)
92        																	-- 10: Codice del ruolo che svolge nella relazione l'unità documentaria collegata a quella di cui si sta caricando il dettaglio (valori da dizionario)
93        																	-- 11: Descrizione del ruolo che svolge nella relazione l'unità documentaria collegata a quella di cui si sta caricando il dettaglio (valori da dizionario)
94        																	-- 12: Dettagli della relazione (campo descrittivo)
95        																	-- 13: Oggetto dell'unità documentaria collegata
96        																	-- 14: ID_DOC del documento primario dell'unità documentaria collegata
97        																	-- 15: N.ro dell'ultima versione visibile del documento primario dell'unità documentaria collegata
98        																	-- 16: Nome con cui mostrare il file dell'ultima versione visibile del documento primario dell'unità documentaria collegata
99        																	-- 17: Nome dell'unità documentaria collegata
100        																	-- 18: Estremi di registrazione/numerazione dell'unità documentaria collegata
101        																	-- 19: Tipo, oggetto + dati di trace sull'unità documentaria collegata da usare come alt della stessa
102        																	-- 20: Rowid del record della relazione
103        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
104        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
105        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
106        			)return PLS_INTEGER;											-- 1 in caso di successo, 0 in caso di errore
107        
108        	/***** funzione per estrarre i dati delle cartelle collegate - con relazioni NON di appartenenza/inclusione - ad una data cartella	*****/
109        	/***** vengono estratti i dati delle sole cartelle visibili all'utente collegato									*****/
110        	function GetFolderCollegati(
111        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
112        																	-- (obblig). Codice identificativo del token di connessione
113        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
114        			IdFolderIn   			IN		DMT_FOLDER.ID_FOLDER%type, 			-- (obblig.) Identificativo della cartella di cui estrarre le relazioni con altre cartelle
115        			ListaRelazioniVsFolderOut	OUT		NOCOPY CLOB,					-- XML con la lista delle relazioni - NON di appartenenza / inclusione - della cartella con altre cartelle (relazioni di precedente-successivo ecc.)
116        																	-- Ogni relazione è un tag "Riga" che contiene le seguenti colonne:
117        																	-- 1: Identificativo della cartella
118        																	-- 2: Percorso e nome della cartella
119        																	-- 3: Anno di apertura della cartella (se basata sul titolario di classificazione)
120        																	-- 4: Livelli di classificazione della cartella se basata sul titolario di classificazione (separati dal separatore standard previsto per i livelli di classificazione nel dominio)
121        																	-- 5: N.ro di fascicolo (se cartella basata sul titolario di classificazione)
122        																	-- 6: Codice della categoria/natura generale della relazione tra le cartelle (valori da dizionario)
123        																	-- 7: Descrizione della categoria/natura generale della relazione tra le due cartelle (valori da dizionario)
124        																	-- 8: Codice del ruolo che svolge nella relazione la cartella di cui si sta caricando il dettaglio (valori da dizionario)
125        																	-- 9: Descrizione del ruolo che svolge nella relazione la cartella di cui si sta caricando il dettaglio (valori da dizionario)
126        																	-- 10: Codice del ruolo che svolge nella relazione la cartella collegata a quella di cui si sta caricando il dettaglio (valori da dizionario)
127        																	-- 11: Descrizione del ruolo che svolge nella relazione la cartella collegata a quella di cui si sta caricando il dettaglio (valori da dizionario)
128        																	-- 12: Dettagli della relazione (campo descrittivo)
129        																	-- 13: Oggetto della cartella collegata
130        																	-- 14: N.ro di sotto-fascicolo (se sottofascicolo basato sul titolario di classificazione)
131        																	-- 15: N.ro di inserto (se inserto di sottofascicolo basato sul titolario di classificazione)
132        																	-- 16: N.ro secondario della cartella collegata
133        																	-- 17: Nome della cartella collegata
134        																	-- 18: <non utilizzata>
135        																	-- 19: Tipo, oggetto + dati di trace sulla cartella collegata da usare come alt della stessa
136        																	-- 20: Rowid del record della relazione
137        																	-- 21: Id. della classifica
138        																	-- 22: Descrizione della classifica
139        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
140        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
141        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
142        			)return PLS_INTEGER;											-- 1 in caso di successo, 0 in caso di errore
143        
144        	/*****	funzione per controllare i dati di una relazione - non di appartenenza/inclusione - di un folder IdFolderIn con un altro folder 			******/
145        	/***** 	i dati della relazione sono nel clob in input (unica riga in un XML conforme a schema di una LISTA_STD.xsd)							******/
146        	/*****	I dati della relazione vengono rielaborati e restituiti pronti per l'inserimento/aggiornamento 									******/
147        	function CtrlDatiFolderCollegato(
148        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
149        																	-- (obblig). Codice identificativo del token di connessione
150        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
151        			IdFolderIn   			IN		DMT_FOLDER.ID_FOLDER%type, 			-- (obblig.) Identificativo del folder vs cui c'è la relazione
152        			XMLRelazioneVsFolderIO		IN OUT	NOCOPY CLOB,					-- XML con i dati della relazione del folder IdFolderIn con un altro folder (relazione di precedente-successivo ecc.)
153        																	-- Contiene un solo tag "Riga" con le seguenti colonne:
154        																	-- 1: Identificativo della cartella
155        																	-- 2: Percorso e nome della cartella
156        																	-- 3: Anno di apertura della cartella (se basata sul titolario di classificazione)
157        																	-- 4: Livelli di classificazione della cartella se basata sul titolario di classificazione (separati dal separatore standard previsto per i livelli di classificazione nel dominio)
158        																	-- 5: N.ro di fascicolo (se cartella basata sul titolario di classificazione)
159        																	-- 6: Codice della categoria/natura generale della relazione tra le cartelle (valori da dizionario)
160        																	-- 7: Descrizione della categoria/natura generale della relazione tra le due cartelle (valori da dizionario)
161        																	-- 8: Codice del ruolo che svolge nella relazione la cartella di cui si sta caricando il dettaglio (valori da dizionario)
162        																	-- 9: Descrizione del ruolo che svolge nella relazione la cartella di cui si sta caricando il dettaglio (valori da dizionario)
163        																	-- 10: Codice del ruolo che svolge nella relazione la cartella collegata a quella di cui si sta caricando il dettaglio (valori da dizionario)
164        																	-- 11: Descrizione del ruolo che svolge nella relazione la cartella collegata a quella di cui si sta caricando il dettaglio (valori da dizionario)
165        																	-- 12: Dettagli della relazione (campo descrittivo)
166        																	-- 13: Oggetto della cartella collegata
167        																	-- 14: N.ro di sotto-fascicolo (se sottofascicolo basato sul titolario di classificazione)
168        																	-- 15: N.ro di inserto (se inserto di sottofascicolo basato sul titolario di classificazione)
169        																	-- 16: N.ro secondario della cartella collegata
170        																	-- 17: Nome della cartella collegata
171        																	-- 18: <non utilizzata>
172        																	-- 19: Tipo, oggetto + dati di trace sulla cartella collegata da usare come alt della stessa
173        																	-- 20: Rowid del record della relazione
174        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
175        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
176        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
177        			)return PLS_INTEGER;											-- 1 in caso di successo, 0 in caso di errore
178        
179        	/***** funzione per estrarre i destinatari (di registrazione, invio notifica) e/o gli assegnatari di un'unità documentaria *****/
180        	function LoadDestAssUD(
181        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
182        																	-- (obblig). Codice identificativo del token di connessione
183        			IdUDIn   				IN    	DMT_UNITA_DOC.ID_UD%type, 			-- (obblig.) Identificativo dell'unità documentaria di cui caricare i destinatari/assegnatari
184        			TipiDestintariIn			IN		VARCHAR2,						-- Indica che cosa estrarre. Valori ammessi:
185        																	-- DR = Destinatari di registrazione
186        																	-- AA = Assegnatari attuali (destinatari di invio)
187        																	-- A 	= Tutti gli assegnatari, anche quelli "storici"
188        																	-- DI = Destinatari di invio
189        																	-- DN = Destinatari di notifica
190        																	-- Può essere anche una concatenazione dei valori precedenti separati da ;.
191        																	-- Se non valorizzato vengono estratti tutti: destinatari di registrazione, invio (anche storici) e notifica
192        			DestinatariAssegnatariOut	OUT		NOCOPY CLOB,					-- Lista con i destinatari "di registrazione" esterni ed interni del documento + i destinatari di invii/notifiche (xml comforme a schema LISTA_STD.xsd)
193        																	-- Ciscun destinatario/assegnatario è un tag "Riga" che contiene le seguenti colonna:
194        																	--	1: (obblig.) Indicatore del tipo di destinastario / assegnatario
195        																	--		Valori possibili:
196        																	--			E	= Soggetto esterno
197        																	--			SP	= Soggetto produttore
198        																	-- 			AOO	= AOO
199        																	-- 			UT 	= Utente
200        																	--			SV	= Scrivania virtuale
201        																	--			UO	= Unità organizzativa (vale a dire tutte le scrivanie virtuali ad essa afferenti)
202        																	--			G	= Gruppo
203        																	--			R	= Ruolo amministrativo contestualizzato ovvero i soggetti che hanno un certo ruolo amministrativo (eventualmente rispetto ad una certa UO o un dato livello della struttura organizzativa/tipo di UO o entrambi)
204        																	--	2: Identificativo del destinatario / assegnatario
205        																	--		è un ID_SOGG_RUBRICA di DMT_RUBRICA_SOGGETTI se colonna 1=E
206        																	--		è un ID_SP_AOO di DMT_SOGGETTI_PROD_AOO se colonna 1 è SP o AOO
207        																	--		è un ID_UO di DMT_STRUTTURA_ORG se colonna 1=UO,
208        																	--		è un ID_GRUPPO di DMT_GRUPPI se colonna 1 =G
209        																	--		è un ID_USER di DMT_USERS se colonna 1 =UT
210        																	--		è un ID_SCRIVANIA di DMT_SCRIVANIE_VIRTUALI se colonna 1 =SV
211        																	--		è un ID_RUOLO_AMM di DMT_RUOLI_AMM se colonna 1 =R
212        																	--	3: Denominazione/nome del destinatario / assegnatario (se trattasi di UO può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
213        																	--	4: Identificativo della UO cui appartiene la scrivania destinataria / assegnataria
214        																	--	5: Nri livello della UO destinataria o a cui appartiene la scrivania destinataria / assegnataria (tutti o alcuni; però se si specifica un livello è obbligatorio indicare tutti i livelli superiori; vanno specificati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; sono separati dal separatore dei livelli valido per il soggetto produttore/AOO di appartenenza della UO)
215        																	--	6: Denominazione della UO cui appartiene la scrivania destinataria / assegnataria (può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
216        																	--	7: Codice che identifica nell'applicazione esterna da cui ci si connette l'utente destinatario /assegnatario o quello che occupa la scrivania destinataria / assegnataria
217        																	--	8: Denominazione dell'utente che occupa la scrivania destinataria / assegnataria
218        																	--	9: (valore 1) Indica che il destinatario / assegnatario, se UO, sono anche tutte le sue sotto-UO
219        																	--	10: (valori interi da 1 a n) Livello della struttura organizzativa in cui si espleta il ruolo amministrativo destinatario / assegnatario
220        																	--	11: Se colonna 1 =R: Codice del tipo di unità organizzativa in cui si espleta il ruolo amministrativo destinatario / assegnatario (alternativo alla colonna 10)
221        																	--		Se colonna 1 =UT o SV: Username (delle credenziali locali) dell'utente destinatario o che occupa la scrivania destinataria / assegnataria
222        																	--	12: Se colonna 1 =R: Descrizione del tipo di unità organizzativa (es: settore, servizio, ecc) in cui si espleta il ruolo amministrativo destinatario / assegnatario(alternativo alla colonna 10)
223        																	--		Se colonna 1 =UT o SV: N.ro di matricola dell'utente destinatario o che occupa la scrivania destinataria / assegnataria
224        																	--	13: Identificativo della UO in cui si espleta il ruolo amministrativo destinatario / assegnatario o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario / assegnatario
225        																	--	14: Denominazione/nome della UO in cui si espleta il ruolo amministrativo destinatario / assegnatario o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario / assegnatario (può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
226        																	--	15: Nri livello della UO in cui si espleta il ruolo amministrativo destinatario / assegnatario o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario / assegnatario (tutti o alcuni; però se si specifica un livello è obbligatorio indicare tutti i livelli superiori; vanno specificati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; sono separati dal separatore dei livelli valido per il soggetto produttore/AOO di appartenenza della UO)
227        																	--	16:(valore 1) Indica che il ruolo amministrativo destinatario / assegnatario si espleta anche nelle sotto-UO della/e UO rintracciate tramite i valori delle 3 colonne precedenti
228        																	-- 	17: Flag 1/0 che indica se si tratta di un destinatario ufficiale (1) o meno (0)
229        																	--	18: Flag 1/0 che indica se si tratta di un attuale assegnatario di copia (1) o meno (0)
230        																	--	19: Flag 1/0 che indica se si tratta di un assegnatario, anche storico, di copia (1) o meno (0)
231        																	--	20: Flag 1/0 che indica se si tratta di un soggetto cui è stato notificato il documento (1) o meno (0)
232        																	--	21: Flag 1/0 che indica se si tratta di un destinatario per conoscenza (1) o meno
233        																	--	22: ID_INVIO dell'eventuale primo invio al destinatario/assegnatario
234        																	--	23: ID_NOTIFICA dell'eventuale prima notifica del documento al destinatario/assegnatario
235        																	--	24: Data e ora da cui decorre l'eventuale ultima assegnazione al soggetto (nel formato dato dal parametro di config. FMT_STD_TIMESTAMP)
236        																	--	25: Data e ora in cui è terminata l'eventuale ultima assegnazione al soggetto (nel formato dato dal parametro di config. FMT_STD_TIMESTAMP)
237        																	--	26: Data e ora da cui decorre l'eventuale ultima notifica al soggetto (nel formato dato dal parametro di config. FMT_STD_TIMESTAMP)
238        																	--	29: Dati identificativi del destinatario / assegnatario (per soggetto esterno è la denominazione / cognome e nome)
239        																	/******* inizio campi relativi solo ai destinatari esterni ******/
240        																	-- 	30: Identificativo con cui il soggetto è registrato in rubrica soggetti (se vi è presente)
241        																	-- 	31: Codice del soggetto in un eventuale anagrafe esterna (ACS o altro)
242        																	-- 	32: Cognome del soggetto (se persona fisica)
243        																	-- 	33: Nome del soggetto (se persona fisica)
244        																	-- 	34: Indicatore si persona fisica (1) o giuridica (0)
245        																	-- 	35: Codice fiscale del soggetto
246        																	-- 	36: Partita IVA del soggetto
247        																	-- 	37: Data di nascita/istituzione del soggetto (nel formato del parametro di conf. FMT_STD_DATA)
248        																	-- 	38: (valori M/F) Sesso del soggetto (se persona fisica): M = Maschio, F = Femmina
249        																	-- 	39: Codice ISTAT del comune (italiano) di nascita/istituzione del soggetto
250        																	-- 	40: Nome del comune italiano o della città (se estera) di nascita/istituzione del soggetto
251        																	-- 	41: Codice ISTAT dello stato di nascita/istituzione del soggetto
252        																	-- 	42: Nome dello stato di nascita/istituzione del soggetto
253        																	-- 	43: Codice ISTAT dello stato di cittadinanza del soggetto
254        																	-- 	44: Nome dello stato di cittadinanza del soggetto
255        																	-- 	45: Targa della provincia del comune di nascita del soggetto
256        																	-- 	46: Titolo di studio/professionale
257        																	-- 	47: Codice che indica il mezzo di trasmissione dell'unità documentaria al destinataro. Valori in dizionario
258        																	--	48: Descrizione del mezzo di trasmissione dell'unità documentaria al destinatario. Valori in dizionaro
259        																	--	49: Data e ora di spedizione/invio al destinatario (nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
260        																	--	50: Data di raccomandata (se la trasmissione è tramite raccomandata)(nel formato dato dal parametro di conf. FMT_STD_DATA)
261        																	--	51: Nro di raccomandata al destinatario (se la trasmissione è tramite raccomandata)
262        																	--	52: Data di notifica al destinatario (nel formato dato dal parametro di conf. FMT_STD_DATA)
263        																	--	53: Nro di notifica al destinatario
264        																	-- 	54: Codice identificativo toponomastico dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria e se censito nella toponomastica del sistema)
265        																	-- 	55: Indirizzo (senza civico) fisico di invio al destinatario (se invio tramite posta ordinaria) (alternativo o ridondante rispetto al campo precedente)
266        																	-- 	56: Civico dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
267        																	-- 	57: Interno dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
268        																	-- 	58: Scala dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
269        																	-- 	59: Piano dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
270        																	-- 	60: CAP dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
271        																	-- 	61: Località dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
272        																	-- 	62: Codice ISTAT del comune italiano dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
273        																	-- 	63: Nome del comune/città dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
274        																	-- 	64: Codice ISTAT dello stato dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
275        																	-- 	65: Nome dello stato dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
276        																	-- 	66: Targa della provincia del comune dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
277        																	-- 	67: Indirizzo e-mail del destinatario (se invio tramite posta elettronica)
278        																	--	68: Indicatore che l'indirizzo e-mail del destinatario è un idirizzo di Posta Elettronica Certificata. Valore fisso 1.
279        																	--	69: Estremi del gestore della casella e-mail del destinatario se è di Posta Elettronica Certificata.
280        																	--	70: Indicatore che l'indirizzo e-mail del destinatario è dichiarato all'Indice PA. Valore fisso 1.
281        																	--	71: Indicatore che l'indirizzo e-mail del destinatario è una casella istituzionale di un'AOO. Valore fisso 1.
282        																	-- 	72: Nro fax del destinatario (se invio tramite fax)
283        																	--	73: Identificativo del record del destinatario esterno (ID_RELAZIONE)
284        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
285        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
286        			ErrMsgOut				OUT 		VARCHAR2,						-- Messaggio d'errore
287        			FlgEscludiAssSenzaInvioIn	IN		PLS_INTEGER DEFAULT NULL)			-- (valori 1/0/NULL) Se 1 tra gli assegnatari non viene considerato quello non derivante da invio, altrimenti sì.
288        			return PLS_INTEGER;											-- 1 in caso di successo, 0 in caso di errore
289        
290        	/***** funzione per estrarre i soggetti esterni collegati ad un documento *****/
291        	function LoadSoggEstDoc(
292        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
293        																	-- (obblig). Codice identificativo del token di connessione
294        			IdDocIn   				IN    	DMT_DOCUMENTS.ID_DOC%type, 			-- (obblig.) Identificativo dell'unità documentaria di cui caricare i soggetti esterni
295        			NaturaRelDocVsSoggIn		IN		VARCHAR2,						-- Indica che natura/e devono avere le relazioni dei soggetti da estrarre con il documento. Valori ammessi:
296        																	-- D 	= Destinatari
297        																	-- M 	= Mittenti
298        																	-- #A = Tutti i soggetti tranne mittenti e destinatari
299        																	-- qualsiasi valore possibile per il campo COD_NATURA_REL dei soggetti esterni dei documenti
300        																	-- Può essere anche una concatenazione dei valori precedenti separati da ;.
301        																	-- Se non valorizzato vengono estratti tutti: destinatari, mittenti e altri soggetti
302        			SoggettiEsterniOut		OUT		NOCOPY CLOB,					-- Lista con i dati dei soggetti esterni in relazione con il documento
303        																	--	Ogni nominativo è un tag "Riga" che può contenere le seguenti colonne:
304        																	--	1: Identificativo del soggetto nella rubrica soggetti del sistema
305        																	--	2: Codice identificativo del soggetto nell'anagrafe residenti o ditte
306        																	--	3: Se 1 indica che il soggetto è una persona fisica (altrimenti si intende essere una persona giuridica)
307        																	--	4: Denominazione (se persona giuridica) o cognome (se persona fisica)
308        																	--	5: Nome (se persona fisica)
309        																	--	6: Codice fiscale
310        																	--	7: Partita IVA
311        																	--	8: Sesso (valori F/M/NULL) (se persona fisica)
312        																	--	9: Data di nascita/istituzione (nel formato dato dal parametro FMT_STD_DATA)
313        																	--	10: Codice ISTAT del comune di nascita/istituzione
314        																	--	11: Nome del comune (se italiano) o città estera di nascita/istituzione
315        																	--	12: Codice ISTAT dello stato estero di nascita/istituzione
316        																	--	13: Nome dello stato estero di nascita/istituzione
317        																	--	14: Codice ISTAT dello stato di cittadinanza
318        																	--	15: Nome dello stato di cittadinanza
319        																	--	16: <non utilizzata>
320        																	--	17: Codice della natura della relazione del soggetto con il documento (firmatario, contraente ecc). Valori da dizionario.
321        																	--	18: Descrizione della natura della relazione del soggetto con il documento (firmatario, contraente ecc). Valori da dizionario.
322        																	--	19: Dettagli sulla natura della relazione tra soggetto e documento
323        																	--	20: Titolo di studio/professionale
324        																	--	21: Targa della provincia del comune di nascita del soggetto
325        																	--	22: Identificativo del record del soggetto esterno (ID_RELAZIONE)
326        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
327        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
328        			ErrMsgOut				OUT 		VARCHAR2,						-- Messaggio d'errore
329        			FlgEscludiAssSenzaInvioIn	IN		PLS_INTEGER DEFAULT NULL)			-- (valori 1/0/NULL) Se 1 tra gli assegnatari non viene considerato quello non derivante da invio, altrimenti sì.
330        			return PLS_INTEGER;											-- 1 in caso di successo, 0 in caso di errore
331        
332        	/***** funzione per estrarre i soggetti esterni collegati ad un folder *****/
333        	function LoadSoggEstFolder(
334        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
335        																	-- (obblig). Codice identificativo del token di connessione
336        			IdFolderIn   			IN    	DMT_FOLDER.ID_FOLDER%type, 			-- (obblig.) Identificativo del folder di cui caricare i soggetti esterni
337        			NaturaRelDocVsSoggIn		IN		VARCHAR2,						-- Indica che natura/e devono avere le relazioni dei soggetti da estrarre con il folder. Valori ammessi:
338        																	-- qualsiasi valore possibile per il campo COD_NATURA_REL dei soggetti esterni dei documenti
339        																	-- Può essere anche una concatenazione dei valori precedenti separati da ;.
340        																	-- Se non valorizzato vengono estratti tutti i soggetti collegati al folder
341        			SoggettiEsterniOut		OUT		NOCOPY CLOB,					-- Lista con i dati dei soggetti esterni in relazione con il folder
342        																	--	Ogni nominativo è un tag "Riga" che può contenere le seguenti colonne:
343        																	--	1: Identificativo del soggetto nella rubrica soggetti del sistema
344        																	--	2: Codice identificativo del soggetto nell'anagrafe residenti o ditte
345        																	--	3: Se 1 indica che il soggetto è una persona fisica (altrimenti si intende essere una persona giuridica)
346        																	--	4: Denominazione (se persona giuridica) o cognome (se persona fisica)
347        																	--	5: Nome (se persona fisica)
348        																	--	6: Codice fiscale
349        																	--	7: Partita IVA
350        																	--	8: Sesso (valori F/M/NULL) (se persona fisica)
351        																	--	9: Data di nascita/istituzione (nel formato dato dal parametro FMT_STD_DATA)
352        																	--	10: Codice ISTAT del comune di nascita/istituzione
353        																	--	11: Nome del comune (se italiano) o città estera di nascita/istituzione
354        																	--	12: Codice ISTAT dello stato estero di nascita/istituzione
355        																	--	13: Nome dello stato estero di nascita/istituzione
356        																	--	14: Codice ISTAT dello stato di cittadinanza
357        																	--	15: Nome dello stato di cittadinanza
358        																	--	16: <non utilizzata>
359        																	--	17: Codice della natura della relazione del soggetto con il folder. Valori da dizionario.
360        																	--	18: Descrizione della natura della relazione del soggetto con il folder. Valori da dizionario.
361        																	--	19: Dettagli sulla natura della relazione tra soggetto e folder
362        																	--	20: Titolo di studio/professionale
363        																	--	21: Targa della provincia del comune di nascita del soggetto
364        																	--	22: Identificativo del record del soggetto esterno (ID_RELAZIONE)
365        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
366        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
367        			ErrMsgOut				OUT 		VARCHAR2,						-- Messaggio d'errore
368        			FlgEscludiAssSenzaInvioIn	IN		PLS_INTEGER DEFAULT NULL)			-- (valori 1/0/NULL) Se 1 tra gli assegnatari non viene considerato quello non derivante da invio, altrimenti sì.
369        			return PLS_INTEGER;											-- 1 in caso di successo, 0 in caso di errore
370        
371        	function LoadDettUD(
372        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
373        																	-- (obblig). Codice identificativo del token di connessione
374        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
375        			IdUDIO   				IN OUT   	DMT_UNITA_DOC.ID_UD%type, 			-- (obblig.) Identificativo dell'unità documentaria di cui caricare il dettaglio
376        			IdDocPrimarioOut			OUT		DMT_DOCUMENTS.ID_DOC%type,			-- Id. del documento primario dell'UD
377        			ListaRegNumOut			OUT		NOCOPY CLOB,					-- Lista di registrazioni/numerazioni date all'unità documentaria
378        																	-- Ciscuna riga della lista contiene le seguenti colonne:
379        																	--	1: Codice della categoria di registrazione/numerazione; valori ammessi: PG = Protocollo Generale; PP = Protocollo Particolare; R = Repertorio; E = Registrazione d'emergenza; A = Altro tipo di numerazione
380        																	--	2: Sigla di registrazione/numerazione
381        																	--	3: Anno di registrazione/numerazione
382        																	--	4: N.ro di registrazione/numerazione
383        																	--	5: Data e ora di registrazione/numerazione (nel formato dato dal parametro di config. FMT_STD_TIMESTAMP)
384        																	--	6: Identificativo dell'utente che ha effettuato la registrazione/numerazione
385        																	--	7: Codice che identifica l'utente che ha effettuato la registrazione/numerazione nell'applicazione esterna da cui ci si connette
386        																	--	8: Denominazione dell'utente che ha effettuato la registrazione/numerazione
387        																	--	9: Identificativo della UO presso cui è stata effettuata la registrazione/numerazione
388        																	--	10: Denominazione della UO presso cui è stata effettuata la registrazione/numerazione (può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
389        																	--	11: N.ri livello della UO presso cui è stata effettuata la registrazione/numerazione (tutti o alcuni; però se si specifica un livello è obbligatorio indicare tutti i livelli superiori; vanno specificati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; sono separati dal separatore dei livelli valido per il soggetto produttore/AOO di appartenenza della UO)
390        																	--	12: Codice che identifica la registrazione nel sistema in cui è stata data
391        																	--	13: Data in cui decade la riservatezza data all'unità documentaria dalla data registrazione/numerazione (nel formato dato dal parametro di config. FMT_STD_DATA)
392        																	--	14: (valori 1/NULL) Se 1 significa che la registrazione/numerazione è annullata
393        																	--	15: Data e ora di annullamento della registrazione (nel formato dato dal parametro di config. FMT_STD_TIMESTAMP)
394        																	--	16: Identificativo dell'unità documentaria che rappresenta l'atto di autorizzazione all'annullamento della data registrazione/numerazione
395        																	--	17: Estremi dell'atto di autorizzazione annullamento (alternativo al precedente e gestito solo se quello non è valorizzato)
396        																	--	18: Motivazioni dell'annullamento della data registrazione/numerazione
397        																	--	19: (valori 1/NULL) Se 1 significa che la registrazione/numerazione è stata richiesta dal sistema documentale e quindi non è modificabile
398        			StringaRegNumOut			OUT		VARCHAR2,						-- Estremi delle numerazioni/registrazioni già date all'unità documentaria, espressi come stringa unica (se più di una numerazione separati da a ;)
399        			IdTipoDocPrimarioOut		OUT		DMT_DOC_TYPES.ID_DOC_TYPE%type,		-- Id. del tipo del documento primario
400        			NomeTipoDocPrimarioOut		OUT		DMT_DOC_TYPES.NOME_DOC_TYPE%type,		-- Nome del tipo del documento primario
401        			NroLastVisibleVerPrimarioOut	OUT		PLS_INTEGER,					-- N.ro dell'eventuale ultima versione elettronica del doc. primario visibile all'utente
402        			NroLastVerPrimarioOut		OUT		PLS_INTEGER,					-- N.ro dell'eventuale ultima versione elettronica del doc. primario (visibile o meno all'utente)
403        			DisplayFilenamePrimarioOut	OUT		VARCHAR2,						-- Nome con cui mostrare il file corrispondente all'eventuale ultima versione elettronica del doc. primario visibile all'utente
404        			FlgPubblFilePrimarioOut		OUT		PLS_INTEGER,					-- (valori 1/NULL) Indica lo stato di pubblicata (1) o meno (NULL) dell'ultima versione elettronica del doc. primario visibile all'utente
405        			FlgDaDigitFilePrimarioOut	OUT		PLS_INTEGER,					-- (valori 1/NULL) Indica (se 1) che l'ultima versione elettronica del doc. primario visibile all'utente deriva da una scansione
406        			NoteFilePrimarioOut		OUT		VARCHAR2,						-- Note dell'ultima versione elettronica del doc. primario visibile all'utente
407        			AbilitazioniFilePrimarioOut	OUT		VARCHAR2,						-- Bitmap (stringa di 1/0) di abilitazioni alle operazioni sul file primario (l'ultima versione visibile)
408        																	-- I significati dei bit (caratteri di posizione i-esima) sono:
409        																	-- 1° carattere: Abilitazione al versioning/modifica del file
410        																	-- 2° carattere: Abilitazione alla firma del file
411        																	-- 3° carattere: Abilitazione alla cancellazione di tutte le versioni del file
412        																	-- 4° carattere: Abilitazione alla modifica delle note del file
413        																	-- 5° carattere: Abilitazione alla modifica dello stato di pubblicazione del file
414        																	-- 8° carattere: Abilitazione al creare nuova versione non pubblicata
415        																	-- 9° carattere: Abilitazione alla riproduzione - i.e. downolad, copia, stampa - del file
416        			DesOggettoPrimarioOut		OUT		DMT_DOCUMENTS.DES_OGG%type, 			-- Oggetto del documento primario
417        			FlgAcqProdOut			OUT		VARCHAR2,            				-- se A l'unità doc. è stata acquisita, se P prodotta
418        			TsArrivoStesuraOut		OUT		VARCHAR2,						-- Data e ora di arrivo (se UD acquisita; nel formato dato dal parametro di config. FMT_STD_TIMESTAMP) o data di stesura (se UD prodotta, nel formato dato dal parametro di config. FMT_STD_DATA)
419        			FlgTipoProvOut			OUT		DMT_DOC_TYPES.FLG_TIPO_PROV%type,   	-- Tipo di provenienza del doc. primario dell'unità documentaria: E = In entrata, I = Tra uffici, U = In uscita
420        			MittentiOut				OUT		VARCHAR2,						-- Mittente/i esterni o uffici produttori dell'unità documentaria (se più di uno separati da ;)
421        																	-- Nel caso degli uffici produttori la descrizione è seguita dai livelli (tra parentesi quadre)
422        																	-- Nel caso dei soggetti esterni la denominazione può essere seguita tra quadre dell'id. dell'eventuale soggetto della rubrica che corrisponde al mittente
423        			FlgMovimentataOut			OUT		PLS_INTEGER,					-- (valori 1/0) Indica se è un'unità documentaria che è già stata movimentata (1) oppure no (0)
424        			EstremiSoggInCaricoAOut		OUT		VARCHAR2,						-- Estremi di chi ha in carico copia dell'unità documentaria senza che ci sia stato un invio: sigla del tipo di soggetto (UT = Utente, UO = Unità Operativa, SV = Scrivania virtuale) seguita dal suo identificativo (es: UT101, UO1004)
425        			DestinatariAssegnatariOut	OUT		NOCOPY CLOB,					-- Lista con i destinatari "di registrazione" esterni ed interni del documento + i destinatari di invii/notifiche (xml comforme a schema LISTA_STD.xsd)
426        																	-- Ciscun destinatario/assegnatario è un tag "Riga" che contiene le seguenti colonna:
427        																	--	1: (obblig.) Indicatore del tipo di destinastario / assegnatario
428        																	--		Valori possibili:
429        																	--			E	= Soggetto esterno
430        																	--			SP	= Soggetto produttore
431        																	-- 			AOO	= AOO
432        																	-- 			UT 	= Utente
433        																	--			SV	= Scrivania virtuale
434        																	--			UO	= Unità organizzativa (vale a dire tutte le scrivanie virtuali ad essa afferenti)
435        																	--			G	= Gruppo
436        																	--			R	= Ruolo amministrativo contestualizzato ovvero i soggetti che hanno un certo ruolo amministrativo (eventualmente rispetto ad una certa UO o un dato livello della struttura organizzativa/tipo di UO o entrambi)
437        																	--	2: Identificativo del destinatario / assegnatario
438        																	--		è un ID_SOGG_RUBRICA di DMT_RUBRICA_SOGGETTI se colonna 1=E
439        																	--		è un ID_SP_AOO di DMT_SOGGETTI_PROD_AOO se colonna 1 è SP o AOO
440        																	--		è un ID_UO di DMT_STRUTTURA_ORG se colonna 1=UO,
441        																	--		è un ID_GRUPPO di DMT_GRUPPI se colonna 1 =G
442        																	--		è un ID_USER di DMT_USERS se colonna 1 =UT
443        																	--		è un ID_SCRIVANIA di DMT_SCRIVANIE_VIRTUALI se colonna 1 =SV
444        																	--		è un ID_RUOLO_AMM di DMT_RUOLI_AMM se colonna 1 =R
445        																	--	3: Denominazione/nome del destinatario / assegnatario (se trattasi di UO può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
446        																	--	4: Identificativo della UO cui appartiene la scrivania destinataria / assegnataria
447        																	--	5: Nri livello della UO destinataria o a cui appartiene la scrivania destinataria / assegnataria (tutti o alcuni; però se si specifica un livello è obbligatorio indicare tutti i livelli superiori; vanno specificati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; sono separati dal separatore dei livelli valido per il soggetto produttore/AOO di appartenenza della UO)
448        																	--	6: Denominazione della UO cui appartiene la scrivania destinataria / assegnataria (può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
449        																	--	7: Codice che identifica nell'applicazione esterna da cui ci si connette l'utente destinatario /assegnatario o quello che occupa la scrivania destinataria / assegnataria
450        																	--	8: Denominazione dell'utente che occupa la scrivania destinataria / assegnataria
451        																	--	9: (valore 1) Indica che il destinatario / assegnatario, se UO, sono anche tutte le sue sotto-UO
452        																	--	10: (valori interi da 1 a n) Livello della struttura organizzativa in cui si espleta il ruolo amministrativo destinatario / assegnatario
453        																	--	11: Se colonna 1 =R: Codice del tipo di unità organizzativa in cui si espleta il ruolo amministrativo destinatario / assegnatario (alternativo alla colonna 10)
454        																	--		Se colonna 1 =UT o SV: Username (delle credenziali locali) dell'utente destinatario o che occupa la scrivania destinataria / assegnataria
455        																	--	12: Se colonna 1 =R: Descrizione del tipo di unità organizzativa (es: settore, servizio, ecc) in cui si espleta il ruolo amministrativo destinatario / assegnatario(alternativo alla colonna 10)
456        																	--		Se colonna 1 =UT o SV: N.ro di matricola dell'utente destinatario o che occupa la scrivania destinataria / assegnataria
457        																	--	13: Identificativo della UO in cui si espleta il ruolo amministrativo destinatario / assegnatario o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario / assegnatario
458        																	--	14: Denominazione/nome della UO in cui si espleta il ruolo amministrativo destinatario / assegnatario o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario / assegnatario (può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
459        																	--	15: Nri livello della UO in cui si espleta il ruolo amministrativo destinatario / assegnatario o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario / assegnatario (tutti o alcuni; però se si specifica un livello è obbligatorio indicare tutti i livelli superiori; vanno specificati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; sono separati dal separatore dei livelli valido per il soggetto produttore/AOO di appartenenza della UO)
460        																	--	16:(valore 1) Indica che il ruolo amministrativo destinatario / assegnatario si espleta anche nelle sotto-UO della/e UO rintracciate tramite i valori delle 3 colonne precedenti
461        																	-- 	17: Flag 1/0 che indica se si tratta di un destinatario ufficiale (1) o meno (0)
462        																	--	18: Flag 1/0 che indica se si tratta di un attuale assegnatario di copia (1) o meno (0)
463        																	--	19: Flag 1/0 che indica se si tratta di un assegnatario, anche storico, di copia (1) o meno (0)
464        																	--	20: Flag 1/0 che indica se si tratta di un soggetto cui è stato notificato il documento (1) o meno (0)
465        																	--	21: Flag 1/0 che indica se si tratta di un destinatario per conoscenza (1) o meno
466        																	--	22: ID_INVIO dell'eventuale primo invio al destinatario/assegnatario
467        																	--	23: ID_NOTIFICA dell'eventuale prima notifica del documento al destinatario/assegnatario
468        																	--	24: Data e ora da cui decorre l'eventuale ultima assegnazione al soggetto (nel formato dato dal parametro di config. FMT_STD_TIMESTAMP)
469        																	--	25: Data e ora in cui è terminata l'eventuale ultima assegnazione al soggetto (nel formato dato dal parametro di config. FMT_STD_TIMESTAMP)
470        																	--	26: Data e ora da cui decorre l'eventuale ultima notifica al soggetto (nel formato dato dal parametro di config. FMT_STD_TIMESTAMP)
471        																	--	29: Dati identificativi del destinatario / assegnatario (per soggetto esterno è la denominazione / cognome e nome)
472        																	/******* inizio campi relativi solo ai destinatari esterni ******/
473        																	-- 	30: Identificativo con cui il soggetto è registrato in rubrica soggetti (se vi è presente)
474        																	-- 	31: Codice del soggetto in un eventuale anagrafe esterna (ACS o altro)
475        																	-- 	32: Cognome del soggetto (se persona fisica)
476        																	-- 	33: Nome del soggetto (se persona fisica)
477        																	-- 	34: Indicatore si persona fisica (1) o giuridica (0)
478        																	-- 	35: Codice fiscale del soggetto
479        																	-- 	36: Partita IVA del soggetto
480        																	-- 	37: Data di nascita/istituzione del soggetto (nel formato del parametro di conf. FMT_STD_DATA)
481        																	-- 	38: (valori M/F) Sesso del soggetto (se persona fisica): M = Maschio, F = Femmina
482        																	-- 	39: Codice ISTAT del comune (italiano) di nascita/istituzione del soggetto
483        																	-- 	40: Nome del comune italiano o della città (se estera) di nascita/istituzione del soggetto
484        																	-- 	41: Codice ISTAT dello stato di nascita/istituzione del soggetto
485        																	-- 	42: Nome dello stato di nascita/istituzione del soggetto
486        																	-- 	43: Codice ISTAT dello stato di cittadinanza del soggetto
487        																	-- 	44: Nome dello stato di cittadinanza del soggetto
488        																	-- 	45: Targa della provincia del comune di nascita del soggetto
489        																	-- 	46: Titolo di studio/professionale
490        																	-- 	47: Codice che indica il mezzo di trasmissione dell'unità documentaria al destinataro. Valori in dizionario
491        																	--	48: Descrizione del mezzo di trasmissione dell'unità documentaria al destinatario. Valori in dizionaro
492        																	--	49: Data e ora di spedizione/invio al destinatario (nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
493        																	--	50: Data di raccomandata (se la trasmissione è tramite raccomandata)(nel formato dato dal parametro di conf. FMT_STD_DATA)
494        																	--	51: Nro di raccomandata al destinatario (se la trasmissione è tramite raccomandata)
495        																	--	52: Data di notifica al destinatario (nel formato dato dal parametro di conf. FMT_STD_DATA)
496        																	--	53: Nro di notifica al destinatario
497        																	-- 	54: Codice identificativo toponomastico dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria e se censito nella toponomastica del sistema)
498        																	-- 	55: Indirizzo (senza civico) fisico di invio al destinatario (se invio tramite posta ordinaria) (alternativo o ridondante rispetto al campo precedente)
499        																	-- 	56: Civico dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
500        																	-- 	57: Interno dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
501        																	-- 	58: Scala dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
502        																	-- 	59: Piano dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
503        																	-- 	60: CAP dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
504        																	-- 	61: Località dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
505        																	-- 	62: Codice ISTAT del comune italiano dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
506        																	-- 	63: Nome del comune/città dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
507        																	-- 	64: Codice ISTAT dello stato dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
508        																	-- 	65: Nome dello stato dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
509        																	-- 	66: Targa della provincia del comune dell'indirizzo fisico di invio al destinatario (se invio tramite posta ordinaria)
510        																	-- 	67: Indirizzo e-mail del destinatario (se invio tramite posta elettronica)
511        																	--	68: Indicatore che l'indirizzo e-mail del destinatario è un idirizzo di Posta Elettronica Certificata. Valore fisso 1.
512        																	--	69: Estremi del gestore della casella e-mail del destinatario se è di Posta Elettronica Certificata.
513        																	--	70: Indicatore che l'indirizzo e-mail del destinatario è dichiarato all'Indice PA. Valore fisso 1.
514        																	--	71: Indicatore che l'indirizzo e-mail del destinatario è una casella istituzionale di un'AOO. Valore fisso 1.
515        																	-- 	72: Nro fax del destinatario (se invio tramite fax)
516        																	--	73: Identificativo del record del destinatario esterno (ID_RELAZIONE)
517        			AltriSoggettiEsterniOut		OUT		NOCOPY CLOB,					--	Lista con i dati di altri soggetti esterni (firmatari, conraenti ecc) in relazione con il documento
518        																	--	Ogni nominativo è un tag "Riga" che può contenere le seguenti colonne:
519        																	--	1: Identificativo del soggetto nella rubrica soggetti del sistema
520        																	--	2: Codice identificativo del soggetto nell'anagrafe residenti o ditte
521        																	--	3: Se 1 indica che il soggetto è una persona fisica (altrimenti si intende essere una persona giuridica)
522        																	--	4: Denominazione (se persona giuridica) o cognome (se persona fisica)
523        																	--	5: Nome (se persona fisica)
524        																	--	6: Codice fiscale
525        																	--	7: Partita IVA
526        																	--	8: Sesso (valori F/M/NULL) (se persona fisica)
527        																	--	9: Data di nascita/istituzione (nel formato dato dal parametro FMT_STD_DATA)
528        																	--	10: Codice ISTAT del comune di nascita/istituzione
529        																	--	11: Nome del comune (se italiano) o città estera di nascita/istituzione
530        																	--	12: Codice ISTAT dello stato estero di nascita/istituzione
531        																	--	13: Nome dello stato estero di nascita/istituzione
532        																	--	14: Codice ISTAT dello stato di cittadinanza
533        																	--	15: Nome dello stato di cittadinanza
534        																	--	16: <non utilizzata>
535        																	--	17: Codice della natura della relazione del soggetto con il documento (firmatario, contraente ecc). Valori da dizionario.
536        																	--	18: Descrizione della natura della relazione del soggetto con il documento (firmatario, contraente ecc). Valori da dizionario.
537        																	--	19: Dettagli sulla natura della relazione tra soggetto e documento
538        																	--	20: Titolo di studio/professionale
539        																	--	21: Targa della provincia del comune di nascita del soggetto
540        																	--	22: Identificativo del record del soggetto esterno (ID_RELAZIONE)
541        			DocNonPrimariOut			OUT     NOCOPY CLOB,						-- Lista degli eventuali documenti allegati e altri documenti non primari associati all'unità documentaria (XML conforme a schema LISTA_STD.xsd)
542        																	-- Ogni documento allegato/non primario è un tag "Riga" che contiene le seguenti colonne:
543        																	-- 1: Identificativo (ID_DOC) del documento
544        																	-- 2: Codice del tipo di relazione del doc. con l'unità documentaria (tra cui ALL=Allegato)
545        																	-- 3: Descrizione del tipo di relazione del doc. con l'unità documentaria (tra Allegato)
546        																	-- 4: Identificativo del tipo di documento
547        																	-- 5: Nome del tipo di documento
548        																	-- 6: Descrizione/oggetto dell'allegato
549        																	-- 7: N.ro dell'eventuale ultima versione elettronica dell'allegato visibile all'utente
550        																	-- 8: N.ro dell'eventuale ultima versione elettronica del doc. allegato (visibile o meno all'utente)
551        																	-- 9: Nome con cui mostrare il file corrispondente all'eventuale ultima versione elettronica dell'allegato visibile all'utente
552        																	-- 10: (valori 1/NULL) Indica lo stato di pubblicata (1) o meno (NULL) dell'ultima versione elettronica dell'allegato visibile all'utente
553        																	-- 11: (valori 1/NULL) Indica (se 1) che l'ultima versione elettronica dell'allegato visibile all'utente deriva da una scansione
554        																	-- 12: Note dell'ultima versione elettronica dell'allegato visibile all'utente
555        																	-- 13: Bitmap (stringa di 1/0) di abilitazioni alle operazioni sul file dell'allegato (l'ultima versione visibile)
556        																	-- 	I significati dei bit (caratteri di posizione i-esima) sono:
557        																	-- 	1° carattere: Abilitazione al versioning/modifica del file
558        																	-- 	2° carattere: Abilitazione alla firma del file
559        																	-- 	3° carattere: Abilitazione alla cancellazione di tutte le versioni del file
560        																	-- 	4° carattere: Abilitazione alla modifica delle note del file
561        																	-- 	5° carattere: Abilitazione alla modifica dello stato di pubblicazione del file
562        																	--	6° carattere: Abilitazione al lock del documento
563        																	--	7° carattere: Abilitazione al unlock del documento
564        																	--	8° carattere: Abilitazione al creare nuova versione non pubblicata
565        																	--	9° carattere: Abilitazione alla riproduzione - i.e. downolad, copia, stampa - del file
566        																	-- 14: Codice che indica il supporto originale dell'allegato (cartaceo, informatico ecc)
567        																	-- 15: Descrizione del supporto originale dell'allegato (cartaceo, informatico ecc)
568        																	-- 16: (1/0) Flag che indica se allegato originariamente cartaceo (1) o elettronico (0)
569        																	-- 17: Indica se il cartaceo è: originale unico (OU), originale non unico (ONU), copia (C)
570        																	-- 18: N.ro di pagine del cartaceo
571        																	-- 19: (1/0) Indica se il cartaceo è stato eliminato
572        																	-- 20: Data dell'eliminazione del cartaceo
573        																	-- 21: Id. (interno ad AURIGA) dell'utente che ha eliminato il cartaceo
574        																	-- 22: Nome dell'utente che ha eliminato il cartaceo
575        																	-- 23: Id. (interno ad AURIGA) dell'utente che ha autorizzato l'eliminazione del cartaceo
576        																	-- 24: Nome dell'utente che ha autorizzato l'eliminazione del cartaceo
577        																	-- 25: Parole chiave legate all'allegato
578        																	-- 26: Dati di un eventuale lock sul documento
579        																	-- 27: Rowid del record del documento
580        																	-- 28: (1/0) Abilitazione alla riproduzione - i.e. downolad, copia, stampa - del file se presente
581        			ContenitoriOut			OUT     NOCOPY CLOB,						-- Lista dei folder/workspace e aree lavoro dell'utente in cui si trova il documento
582        																	-- Ogni contenitore è un tag "Riga" che contiene le seguenti colonne:
583        																	-- 1: F/W/A Indica se trattasi di Folder (F), Workspace (W) o Area lavoro utente (A)
584        																	-- 2: Id. del folder o workspace
585        																	-- 3: Path e nome del folder o nome del workspace/area lavoro utente
586        																	-- 4: Indica se il folder rappresenta: LIB = Libreria; CLS = Voce del titolario di classificazione; SER=Serie; UA = Unità archivistica (fascicolo basato sul titolario di classificazione); GEN = Folder generico
587        																	-- 5: Descrizione del tipo di folder (di dettaglio se specificato, se non quello generale)
588        																	-- 6: Data e ora di inserimento/ingresso nel contenitore (nel formato dato dal parametro di config. FMT_STD_TIMESTAMP)
589        																	-- 7: Motivi dell'inserimento nel folder/workspace/area lavoro utente
590        																	-- 8: Codice del ruolo dell'unità documentaria nel folder
591        																	-- 9: Descrizione del ruolo dell'unità documentaria nel folder
592        																	-- 10:Rowid del record di relazione unità documentaria vs folder/workspace
593        																	-- 11: Id. e nomi dei folder che compongono il percorso del folder (nel formato <Id>|*|<Nome>|*|<Id>|*|<Nome>...)
594        																	-- 12: Flag (1/0) che indica se il contenitore può propagare o meno i suoi permessi agli oggetti contenuti
595        																	-- 13: Flag (1/NULL) che se 1 indica che l'unità doc. di lavoro eredita i permessi da quelli del contenitore
596        			ParoleChiavePrimarioOut		OUT		VARCHAR2,						-- Parole chiave legate al documento primario
597        			EstensoriOut			OUT		VARCHAR2,						-- Nomi degli estensori seguiti, tra quadre, dalla username dell'estensore (se più di uno separati da ;) (es: Rossi Mario [ROSSI_M]; Ferrari Francesco [FERRARI_F])
598        			ListaRelazioniVsUDOut		OUT		NOCOPY CLOB,					-- XML con la lista delle relazioni dell'unità documentaria con altre unità documentarie (relazioni di precedente-successivo ecc.)
599        																	-- Ogni relazione è un tag "Riga" che contiene le seguenti colonne:
600        																	-- 1: Identificativo dell'unità documentaria collegata
601        																	-- 2: Categoria di una registrazione/numerazione dell'unità documentaria collegata; valori ammessi: PG = Protocollo Generale; PP = Protocollo Particolare; R = Repertorio; E = Registrazione d'emergenza; A = Altro tipo di numerazione
602        																	-- 3: Sigla di una registrazione/numerazione dell'unità documentaria collegata
603        																	-- 4: Anno di una registrazione/numerazione dell'unità documentaria collegata
604        																	-- 5: N.ro di una registrazione/numerazione dell'unità documentaria collegata
605        																	-- 6: Codice della categoria/natura generale della relazione tra le due unità doc. (valori da dizionario)
606        																	-- 7: Descrizione della categoria/natura generale della relazione tra le due unità doc. (valori da dizionario)
607        																	-- 8: Codice del ruolo che svolge nella relazione l'unità documentaria di cui si sta caricando il dettaglio (valori da dizionario)
608        																	-- 9: Descrizione del ruolo che svolge nella relazione l'unità documentaria di cui si sta caricando il dettaglio (valori da dizionario)
609        																	-- 10: Codice del ruolo che svolge nella relazione l'unità documentaria collegata a quella di cui si sta caricando il dettaglio (valori da dizionario)
610        																	-- 11: Descrizione del ruolo che svolge nella relazione l'unità documentaria collegata a quella di cui si sta caricando il dettaglio (valori da dizionario)
611        																	-- 12: Dettagli della relazione (campo descrittivo)
612        																	-- 13: Oggetto dell'unità documentaria collegata
613        																	-- 14: ID_DOC del documento primario dell'unità documentaria collegata
614        																	-- 15: N.ro dell'ultima versione visibile del documento primario dell'unità documentaria collegata
615        																	-- 16: Nome con cui mostrare il file dell'ultima versione visibile del documento primario dell'unità documentaria collegata
616        																	-- 17: Nome dell'unità documentaria collegata
617        																	-- 18: Estremi di registrazione/numerazione dell'unità documentaria collegata
618        																	-- 19: Dati di trace sul collegamento tra le due UD (creato da chi, quando)
619        																	-- 20: Rowid del record della relazione
620        																	-- 21: (flag 1/0) Se 1 indica che l'utente di lavoro NON ha diritti di accesso sull'unità documentaria collegata, o che non può vederne tutti i dati e file in chiaro
621        																	--				  Se 1 il collegamento NON può essere rimosso nè variato dall'utente di lavoro
622        			CodStatoOut				OUT		VARCHAR2,						-- Codice dello stato (generale e di dettaglio) dell'unità documentaria
623        																	-- E' composto da: <cod_stato>;<cod_stato_dett>
624        			DesStatoOut				OUT		VARCHAR2,						-- Descrizione dello stato (di dettaglio se valorizzato, se no quello generale) dell'unità documentaria
625        			NoteUDOut				OUT		VARCHAR2,						-- Note dell'unità documentaria
626        			AbilitazioniAzioniOut		OUT		VARCHAR2,						-- E' una stringa di 1/0 in cui ogni carattere rappresenta l'abilitazione (1) o meno (0) ad una certa azione sull'unità documentaria
627        																	-- 1° carattere: Editing/modifica dei metadati
628        																	-- 2° carattere: Cancellazione dell'unità documentaria
629        																	-- 3° carattere: Invio dell'unità documentaria
630        																	-- 4° carattere: Notifica dell'unità documentaria
631        																	-- 5° carattere: Presa in carico dell'unità documentaria
632        																	-- 6° carattere: Avvio di un processo sull'unità documentaria
633        																	-- 7° carattere: Lock dell'unità documentaria
634        																	-- 8° carattere: Unlock dell'unità documentaria
635        																	-- 9° carattere: Aggiunta ai preferiti
636        																	-- 10°carattere: Eliminazione dai preferiti
637        																	-- 11°carattere: Abilitazione a creare prima versione non pubblicata di un nuovo documento non primario
638        																	-- 12°carattere: Presa visione dell'unità documentaria
639        																	-- 13° carattere: Abilitazione a creare la prima versione per un nuovo documento non primario
640        																	-- 14° carattere: Abilitazione alla modifica dei permessi
641        			InfoSuLockOut			OUT		VARCHAR2,						-- Dati di un eventuale lock sull'unità documentaria o oggetti che la contengono o suoi documenti/file
642        			IdProcessOut			OUT		DMT_PROCESSES.ID_PROCESS%type,		-- Id. del processo/procedimento in corso sull'unità doc. (valorizzato solo se ve n'è uno solo)
643        			FlgProcGuidatoDaWFOut		OUT		PLS_INTEGER,					-- (valori 1/0) Indica se il processo/procedimento IdProcessOut è guidato o meno dal motore di workflow
644        			RowidOut				OUT		VARCHAR2,						-- Rowid del record del documento primario dell'unità doc.
645        			AttributiAddOut			OUT		NOCOPY CLOB,					-- Lista degli eventuali ulteriori attributi con cui sono caratterizzati l'unità documentaria e il suo doc. primario (XML conforme a schema LISTA_STD.xsd)
646        																	-- Ogni attributo è un tag "Riga" che contiene le seguenti colonne:
647        																	-- 1: N.ro (valori da 1 a n) del riquadro (fieldset) in cui mostrare l'attributo
648        																	-- 2: Nome identificativo dell'attributo (ATTR_NAME)
649        																	-- 3: Label del campo con cui rappresentare l'attributo
650        																	-- 4: Tipo di attributo. Valori: DATE, DATETIME, TEXT, TEXT-AREA, CHECK, INTEGER, EURO, DECIMAL, COMBO-BOX, LISTA
651        																	-- 5: N.ro massimo di caratteri/cifre
652        																	-- 6: Larghezza del campo con cui rappresentare l'attributo (size)
653        																	-- 7: Valore dell'attributo
654        																	-- 8: Label del riquadro (fieldset) in cui mostrare l'attributo
655        																	-- 9: (valori 1/0) 1 indica che l'attributo è obbligatorio, 0 che è facoltativo
656        																	-- 10: Altezza (in nro righe) del campo con cui rappresentare l'attributo (se TEXT-AREA)
657        																	-- 11:(valori 1/0) 1 indica se l'attributo è modificabile, 0 che è in sola visualizzazione
658        			FlgMostraAltriAttrOut		OUT		PLS_INTEGER,					-- (valori 1/0) Se 1 nella GUI vanno mostrati gli attributi addizionali (ce ne sono di visibile all'utente), se 0 no
659        			NomeUDCreatoInAutomaticoOut	OUT		PLS_INTEGER,					-- (valori 1/NULL) Se 1 il nome dell'unità documentaria è quello creato in automatico e quindi dopo l'aggiornamento di oggetto o versionamento file primario il NomeUD va forzato a NULL.
660        			NomeUnitaDocOut			OUT		DMT_UNITA_DOC.NOME_UD%type,			-- Nome dell'unità documentaria
661        			StatoConsPrimarioOut		OUT		VARCHAR2,						-- Stato conservazione legato al documento primario			
662              			FlgInvioInConservazioneOut	OUT		DMT_DOCUMENTS.FLG_INVIO_IN_CONSERV%type,				-- valori 1/0: 1= da inviare in conservazione
663        			FlgUrgenzaInvioInConservOut 	OUT		DMT_DOCUMENTS.FLG_URGENZA_INVIO_IN_CONSERV%type,		-- urgenza dell'invio in conservazione
664        			IdInConservazioneOut		OUT		DMT_DOCUMENTS.ID_IN_CONSERVAZIONE%type,				-- Id. dato dal sistema di conservazione (se il doc. è in conservazione)
665        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
666        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
667        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
668        			return PLS_INTEGER;											-- 1 in caso di successo, 0 in caso di errore
669        
670        
671        	/******* restituisce i dati di una registrazione a protocollo o ad altro registro, anche provvisorio, indicata attraverso il suo ID_UD 	*********/
672        	/******* i dati sono restituiti come XML secondo schema SezioneCache.xsd.																*********/ 
673        	/******* utilizzata per caricare i dati della registrazione nelle GUI del modulo protocollo di Auriga									*********/
674        	function LoadDettUDXGUIModProt(
675        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
676        																					-- (obblig). Codice identificativo del token di connessione
677        			IdUserLavoroIn				IN		DMT_USERS.ID_USER%type DEFAULT NULL,-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
678        			IdUDIn   					IN    	DMT_UNITA_DOC.ID_UD%type, 			-- (obblig.) Identificativo dell'unità documentaria di cui caricare il dettaglio
679        			DatiUDXMLOut				OUT		NOCOPY CLOB,						-- Dati della registrazione (XML conforme a schema SezioneCache.xsd), con l'eccezione degli attributi custom che sono restituiti nell'argomento AttributiAddOut
680        																					-- I dati restituiti corrispondono ai seguenti tag Variabile:
681        																					-- ##############TODO
682        			AttributiAddOut				OUT		NOCOPY CLOB,						-- Lista degli eventuali ulteriori attributi - attributi custom - con cui sono caratterizzati l'unità documentaria e il suo doc. primario (XML conforme a schema LISTA_STD.xsd)
683        																					-- Ogni attributo è un tag "Riga" che contiene le seguenti colonne:
684        																					-- 1: N.ro (valori da 1 a n) del riquadro (fieldset) in cui mostrare l'attributo
685        																					-- 2: Nome identificativo dell'attributo (ATTR_NAME)
686        																					-- 3: Label del campo con cui rappresentare l'attributo
687        																					-- 4: Tipo di attributo. Valori: DATE, DATETIME, TEXT, TEXT-AREA, CHECK, INTEGER, EURO, DECIMAL, COMBO-BOX, LISTA
688        																					-- 5: N.ro massimo di caratteri/cifre
689        																					-- 6: Larghezza del campo con cui rappresentare l'attributo (size)
690        																					-- 7: Valore dell'attributo
691        																					-- 8: Label del riquadro (fieldset) in cui mostrare l'attributo
692        																					-- 9: (valori 1/0) 1 indica che l'attributo è obbligatorio, 0 che è facoltativo
693        																					-- 10: Altezza (in nro righe) del campo con cui rappresentare l'attributo (se TEXT-AREA)
694        																					-- 11:(valori 1/0) 1 indica se l'attributo è modificabile, 0 che è in sola visualizzazione
695        			FlgMostraAltriAttrOut		OUT		PLS_INTEGER,						-- (valori 1/0) Se 1 nella GUI vanno mostrati gli attributi addizionali (ce ne sono di visibile all'utente), se 0 no
696        			ErrContextOut				OUT		VARCHAR2,							-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
697        			ErrCodeOut					OUT		PLS_INTEGER,						-- N.ro errore di uscita
698        			ErrMsgOut					OUT 	VARCHAR2,							-- Messaggio d'errore
699        			FlgSoloAbilAzioniIn			IN		PLS_INTEGER DEFAULT NULL,			-- Se 1 indica che la funzione non deve caricare tutti i dati del dettaglio unità doc. ma solo le abilitazioni alle azioni 
700        			TsAnnDatiIn					IN		VARCHAR2 DEFAULT NULL,				-- Timestamp di un annullamento dati, nel formato DD/MM/RRRR HH24:MI:SS, un istante prima del quale deve essere restituito il dettaglio - dati e file - dell'unità documentaria
701        			IdProcessIn					IN		INTEGER DEFAULT NULL,				-- Id. del processo all'interno del quale viene eventualmente chiamata la maschera di dettaglio UD
702        			TaskNameIn					IN		VARCHAR2 DEFAULT NULL,				-- Nome identificativo del task di processo all'interno del quale viene eventualmente chiamata la maschera di dettaglio UD			
703        			IdPubblicazioneIn			IN		DMT_STORICO_PUBBL.ID_PUBBLICAZIONE%type DEFAULT NULL,
704        																					-- Id. pubblicazione dell'UD di cui visualizzare i dati. Se 0 si intende una richiesta di pubblicazione ancora da evadere
705        			CINodoScrivaniaIn			IN		VARCHAR2 DEFAULT NULL,				-- Cod. nodo scrivania da cui viene richiamato il dettaglio
706        			ListaIdUDScansioniDaAssIn	IN		VARCHAR2 DEFAULT NULL				-- Lista con gli ID_UD delle scansioni da associare. Se più di una sono separate da ;
707        			) return PLS_INTEGER;													-- 1 in caso di successo, 0 in caso di errore
708        
709        	/******* restituisce i file di una fatturaPA e/o ricevute collegate, indicata attraverso il suo ID_UD 		*********/
710        	/******* i dati sono restituiti come XML secondo schema SezioneCache.xsd.									*********/ 
711        	/******* può restituire solo i file della fattura o solo le ricevute SDICollegate							*********/
712        	function LoadFileFatturaPA(
713        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
714        																					-- (obblig). Codice identificativo del token di connessione
715        			IdUserLavoroIn				IN		DMT_USERS.ID_USER%type DEFAULT NULL,-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
716        			IdUDIn   					IN    	DMT_UNITA_DOC.ID_UD%type, 			-- (obblig.) Identificativo dell'unità documentaria di cui caricare il dettaglio
717        			FlgFileFatturaIn			IN		PLS_INTEGER DEFAULT 1,				-- (valori 1/0) Se 1 sono restituiti i file della fattura (fatturaPA in xml e suoi eventuali allegati)
718        			FlgRicevuteIn				IN		PLS_INTEGER DEFAULT 1,				-- (valori 1/0) Se 1 sono restituiti i file delle ricevute inviate da SdI a fronte della data fattura
719        			DatiUDXMLOut				OUT		NOCOPY CLOB,						-- Dati dei file (XML conforme a schema SezioneCache.xsd), con l'eccezione degli attributi custom che sono restituiti nell'argomento AttributiAddOut
720        																					-- I dati restituiti corrispondono ai seguenti tag Variabile:
721        																					-- quelli del file primario con la FatturaPA:
722        																					--  #IdDocPrimario
723        																					--	#FilePrimario.NroLastVisibleVer
724        																					--	#FilePrimario.NroLastVer
725        																					--	#FilePrimario.DisplayFilename
726        																					--	#FilePrimario.URI
727        																					--	#FilePrimario.URI_VerNonFirmata
728        																					--	#FilePrimario.Dimensione
729        																					--	#FilePrimario.FlgFirmato (valori 1/0)
730        																					--	#FilePrimario.Impronta
731        																					--	#FilePrimario.AlgoritmoImpronta
732        																					--	#FilePrimario.EncodingImpronta (hex o base64)
733        																					--	#FilePrimario.Mimetype
734        																					--	#FilePrimario.FlgConvertibilePdf (valori 1/0)
735        																					-- @Allegati, lista con le seguenti colonne:
736        																					--        1: ID_DOC
737        																					--        2: Id. del tipo documento
738        																					--        3: Nome del tipo documento
739        																					--        4: Descrizione
740        																					--        5: N.ro ultima versione visibile all'utente
741        																					--        6: Nro Ultima versione valida
742        																					--        7: Nome file
743        																					--        8: URI
744        																					--        9: Dimensione (in bytes)
745        																					--        10: Flag file firmato digitalmente (valori 1/0)
746        																					--        11: mimetype
747        																					--        12: Flag di formato pdf o convertibile in pdf (valori 1/0)
748        																					--        13: impronta
749        																					--        14: Algortitmo impronta
750        																					--        14: Encoding impronta (hex o base64)
751        																					-- @RicevuteSdI, lista con le seguenti colonne:
752        																					--        1: ID_DOC
753        																					--        2: tipo di ricevuta
754        																					--        3: data e ora di arrivo della ricevuta (formato dato dal parametro FMT_STD_TIMESTAMP)
755        																					--        4: descrizione
756        																					--        5: nome file
757        																					--        6: URI
758        																					--        7: Dimensione (in bytes)
759        																					--        8: Flag file firmato digitalmente (valori 1/0)
760        																					--        9: Flag di formato pdf o convertibile in pdf (valori 1/0)
761        																					--        10: mimetype
762        																					--        11: ID_FORMATO su Auriga
763        																					--        12: impronta
764        																					--        13: Algortitmo impronta
765        																					--        14: Encoding impronta (hex o base64)
766        			ErrContextOut				OUT		VARCHAR2,							-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
767        			ErrCodeOut					OUT		PLS_INTEGER,						-- N.ro errore di uscita
768        			ErrMsgOut					OUT 	VARCHAR2)							-- Messaggio d'errore
769        			return PLS_INTEGER;														-- 1 in caso di successo, 0 in caso di errore
770        		
771        	/******* restituisce i file di una fattura archiviata (non PA) o in generale di un doc. archiviato			*********/
772        	/******* i dati sono restituiti come XML secondo schema SezioneCache.xsd.									*********/
773        	function LoadFileFattura(
774        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
775        																					-- (obblig). Codice identificativo del token di connessione
776        			IdUserLavoroIn				IN		DMT_USERS.ID_USER%type DEFAULT NULL,-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
777        			IdUDIn   					IN    	DMT_UNITA_DOC.ID_UD%type, 			-- (obblig.) Identificativo dell'unità documentaria di cui caricare il dettaglio
778        			FlgFileFatturaIn			IN		PLS_INTEGER DEFAULT 1,				-- non utilizzato
779        			FlgRicevuteIn				IN		PLS_INTEGER DEFAULT 1,				-- non utilizzato
780        			DatiUDXMLOut				OUT		NOCOPY CLOB,						-- Dati dei file (XML conforme a schema SezioneCache.xsd), con l'eccezione degli attributi custom che sono restituiti nell'argomento AttributiAddOut
781        																					-- I dati restituiti corrispondono ai seguenti tag Variabile:
782        																					-- quelli del file primario con la FatturaPA:
783        																					--  #IdDocPrimario
784        																					--	#FilePrimario.NroLastVisibleVer
785        																					--	#FilePrimario.NroLastVer
786        																					--	#FilePrimario.DisplayFilename
787        																					--	#FilePrimario.URI
788        																					--	#FilePrimario.URI_VerNonFirmata
789        																					--	#FilePrimario.Dimensione
790        																					--	#FilePrimario.FlgFirmato (valori 1/0)
791        																					--	#FilePrimario.Impronta
792        																					--	#FilePrimario.AlgoritmoImpronta
793        																					--	#FilePrimario.EncodingImpronta (hex o base64)
794        																					--	#FilePrimario.Mimetype
795        																					--	#FilePrimario.FlgConvertibilePdf (valori 1/0)
796        																					-- @Allegati, lista con le seguenti colonne:
797        																					--        1: ID_DOC
798        																					--        2: Id. del tipo documento
799        																					--        3: Nome del tipo documento
800        																					--        4: Descrizione
801        																					--        5: N.ro ultima versione visibile all'utente
802        																					--        6: Nro Ultima versione valida
803        																					--        7: Nome file
804        																					--        8: URI
805        																					--        9: Dimensione (in bytes)
806        																					--        10: Flag file firmato digitalmente (valori 1/0)
807        																					--        11: mimetype
808        																					--        12: Flag di formato pdf o convertibile in pdf (valori 1/0)
809        																					--        13: impronta
810        																					--        14: Algortitmo impronta
811        																					--        14: Encoding impronta (hex o base64)
812        																					-- @RicevuteSdI, lista con le seguenti colonne:
813        																					--        1: ID_DOC
814        																					--        2: tipo di ricevuta
815        																					--        3: data e ora della ricevuta (formato dato dal parametro FMT_STD_TIMESTAMP)
816        																					--        4: descrizione
817        																					--        5: nome file
818        																					--        6: URI
819        																					--        7: Dimensione (in bytes)
820        																					--        8: Flag file firmato digitalmente (valori 1/0)
821        																					--        9: Flag di formato pdf o convertibile in pdf (valori 1/0)
822        																					--        10: mimetype
823        																					--        11: ID_FORMATO su Auriga
824        																					--        12: impronta
825        																					--        13: Algortitmo impronta
826        																					--        14: Encoding impronta (hex o base64)
827        			ErrContextOut				OUT		VARCHAR2,							-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
828        			ErrCodeOut					OUT		PLS_INTEGER,						-- N.ro errore di uscita
829        			ErrMsgOut					OUT 	VARCHAR2,							-- Messaggio d'errore
830        			FlgNoScambioAllPrimarioIn	IN		PLS_INTEGER DEFAULT 0)				-- Se 1 indica che NON devono essere scambiati in alcun caso 1° allegato e primario in ciò che viene restituito in output
831        			return PLS_INTEGER;														-- 1 in caso di successo, 0 in caso di errore
832        
833        	function LoadDettFolder(
834        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
835        																	-- (obblig). Codice identificativo del token di connessione
836        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
837        			IdFolderIO   			IN OUT   	DMT_FOLDER.ID_FOLDER%type, 			-- (obblig) Identificativo del folder di cui caricare il dettaglio
838        			FlgParticolaritaFolderOut	OUT		VARCHAR2,						-- Indica se il folder è:
839        																	-- L = Libreria
840        																	-- C = Classificazione
841        																	-- FA = Fascicolo archivistico basato sul titolario di classificazione
842        																	-- SF = Sottofascicolo di fascicolo basato sul titolario di classificazione
843        																	-- I = Inserto di Sottofascicolo di fascicolo basato sul titolario di classificazione
844        																	-- FO = Forum di discussione
845        																	-- TH = Thread di discussione in un forum
846        																	-- S = Serie
847        																	-- non valorizzato per i folder che non ricadono nelle tipologie di cui sopra
848        			NomeFolderOut			OUT		VARCHAR2,						-- Nome del folder
849        			DtAperturaOut			OUT		VARCHAR2,						-- Data di apertura/creazione del folder (nel formato dato dal parametro di conf. FMT_STD_DATA)
850        			IdClassificazioneOut		OUT		DMT_TITOLARIO.ID_CLASSIFICAZIONE%type,	-- Id. della classificazione del folder
851        			LivelliClassificazioneOut	OUT		VARCHAR2,						-- Stringa con i n.ri livello della classificazione del folder (sono separati dal separatore dei livelli di classificazione valido per il soggetto produttore/AOO)
852        			DesClassificazioneOut		OUT		VARCHAR2,						-- Descrizione della classificazione del folder
853        			AnnoAperturaOut			OUT		DMT_FOLDER.ANNO_APERTURA%type,		-- Anno di apertura del folder (se fascicolo di titolario)
854        			NroProgrFascOut			OUT		DMT_FOLDER.NRO_PROGR_FASC%type,		-- N.ro progressivo di fascicolo (se fascicolo di titolario) (è il progressivo annuale nella classificazione)
855        			NroProgrSottoFascOut		OUT		DMT_FOLDER.NRO_PROGR_SOTTOFASC%type,	-- N.ro di sottofascicolo, progressivo nel fascicolo (se fascicolo di titolario)
856        			NroProgrInsertoOut		OUT		DMT_FOLDER.NRO_INSERTO%type,			-- N.ro di inserto, progressivo nel sottofascicolo (se fascicolo di titolario)
857        			IdTipoFolderOut			OUT		DMT_FOLDER_TYPES.ID_FOLDER_TYPE%type,	-- Id. del tipo del folder (quello di dettaglio se specificato, se no quello generale)
858        			NomeTipoFolderOut			OUT		DMT_FOLDER_TYPES.NOME_FOLDER_TYPE%type,	-- Nome del tipo del folder (quello di dettaglio se specificato, se no quello generale)
859        			NroSecondarioOut			OUT		VARCHAR2,						-- Stringa di identificazione alternativa del folder
860        			OggettoOut				OUT		DMT_FOLDER.DES_OGG%type,			-- Oggetto/descrizione del folder
861        			DtChiusuraOut			OUT		VARCHAR2,						-- Data di eventuale chiusura del folder (nel formato dato dal parametro di conf. FMT_STD_DATA)
862        			FlgMovimentatoOut			OUT		PLS_INTEGER,					-- (valori 1/0) Indica se è folder che è stato movimentato (1) oppure no (0)
863        			EstremiSoggInCaricoAOut		OUT		VARCHAR2,						-- Estremi di chi ha in carico il folder senza che ci sia stato un invio: sigla del tipo di soggetto (UT = Utente, UO = Unità Operativa, SV = Scrivania virtuale) seguita dal suo identificativo (es: UT101, UO1004)
864        			SoggettiEsterniOut		OUT		NOCOPY CLOB,					-- Lista con i dati di soggetti esterni in relazione con il folder
865        																	--	Ogni nominativo è un tag "Riga" che può contenere le seguenti colonne:
866        																	--	1: Identificativo del soggetto nella rubrica soggetti del sistema
867        																	--	2: Codice identificativo del soggetto nell'anagrafe residenti o ditte
868        																	--	3: Se 1 indica che il soggetto è una persona fisica (altrimenti si intende essere una persona giuridica)
869        																	--	4: Denominazione (se persona giuridica) o cognome (se persona fisica)
870        																	--	5: Nome (se persona fisica)
871        																	--	6: Codice fiscale
872        																	--	7: Partita IVA
873        																	--	8: Sesso (valori F/M/NULL) (se persona fisica)
874        																	--	9: Data di nascita/istituzione (nel formato dato dal parametro FMT_STD_DATA)
875        																	--	10: Codice ISTAT del comune di nascita/istituzione
876        																	--	11: Nome del comune (se italiano) o città estera di nascita/istituzione
877        																	--	12: Codice ISTAT dello stato estero di nascita/istituzione
878        																	--	13: Nome dello stato estero di nascita/istituzione
879        																	--	14: Codice ISTAT dello stato di cittadinanza
880        																	--	15: Nome dello stato di cittadinanza
881        																	--	16: <non utilizzata>
882        																	--	17: Codice della natura della relazione del soggetto con il folder. Valori da dizionario.
883        																	--	18: Descrizione della natura della relazione del soggetto con il folder. Valori da dizionario.
884        																	--	19: Dettagli sulla natura della relazione tra soggetto e folder
885        																	--	20: Titolo di studio/professionale
886        																	--	21: Targa della provincia del comune di nascita del soggetto
887        																	--	22: Identificativo del record del soggetto esterno (ID_RELAZIONE)
888        			ContenitoriOut			OUT     	NOCOPY CLOB,					-- Lista dei folder e aree lavoro dell'utente in cui si trova il folder
889        																	-- Ogni contenitore è un tag "Riga" che contiene le seguenti colonne:
890        																	-- 1: F/A Indica se trattasi di Folder (F) o Area lavoro utente (A)
891        																	-- 2: Id. del folder
892        																	-- 3: Path e nome del folder o nome dell'area lavoro utente
893        																	-- 4: Indica se il folder rappresenta: LIB = Libreria; CLS = Voce del titolario di classificazione; SER=Serie; UA = Unità archivistica (fascicolo basato sul titolario di classificazione); GEN = Folder generico
894        																	-- 5: Descrizione del tipo di folder (di dettaglio se specificato, se non quello generale)
895        																	-- 6: Data e ora di inserimento/ingresso nel contenitore (nel formato dato dal parametro di config. FMT_STD_TIMESTAMP)
896        																	-- 7: Motivi dell'inserimento nel folder/area lavoro utente
897        																	-- 8: Rowid del record di relazione folder vs folder superiore
898        																	-- 9: Flag 1/0 che indica se relazione riservata dal sistema
899        																	-- 11: Id. e nomi dei folder che compongono il percorso del folder (nel formato <Id>|*|<Nome>|*|<Id>|*|<Nome>...)
900        																	-- 12: Flag (1/0) che indica se il contenitore può propagare o meno i suoi permessi agli oggetti contenuti
901        																	-- 13: Flag (1/NULL) che se 1 indica cheil folder di lavoro eredita i permessi da quelli del contenitore
902        			ListaRelazioniVsFolderOut	OUT		NOCOPY CLOB,					-- XML con la lista delle relazioni - NON di appartenenza / inclusione - della cartella con altre cartelle (relazioni di precedente-successivo ecc.)
903        																	-- Ogni relazione è un tag "Riga" che contiene le seguenti colonne:
904        																	-- 1: Identificativo della cartella
905        																	-- 2: Percorso e nome della cartella
906        																	-- 3: Anno di apertura della cartella (se basata sul titolario di classificazione)
907        																	-- 4: Livelli di classificazione della cartella se basata sul titolario di classificazione (separati dal separatore standard previsto per i livelli di classificazione nel dominio)
908        																	-- 5: N.ro di fascicolo (se cartella basata sul titolario di classificazione)
909        																	-- 6: Codice della categoria/natura generale della relazione tra le cartelle (valori da dizionario)
910        																	-- 7: Descrizione della categoria/natura generale della relazione tra le due cartelle (valori da dizionario)
911        																	-- 8: Codice del ruolo che svolge nella relazione la cartella di cui si sta caricando il dettaglio (valori da dizionario)
912        																	-- 9: Descrizione del ruolo che svolge nella relazione la cartella di cui si sta caricando il dettaglio (valori da dizionario)
913        																	-- 10: Codice del ruolo che svolge nella relazione la cartella collegata a quella di cui si sta caricando il dettaglio (valori da dizionario)
914        																	-- 11: Descrizione del ruolo che svolge nella relazione la cartella collegata a quella di cui si sta caricando il dettaglio (valori da dizionario)
915        																	-- 12: Dettagli della relazione (campo descrittivo)
916        																	-- 13: Oggetto della cartella collegata
917        																	-- 14: N.ro di sotto-fascicolo (se sottofascicolo basato sul titolario di classificazione)
918        																	-- 15: N.ro di inserto (se inserto di sottofascicolo basato sul titolario di classificazione)
919        																	-- 16: N.ro secondario della cartella collegata
920        																	-- 17: Nome della cartella collegata
921        																	-- 18: <non utilizzata>
922        																	-- 19: Tipo, oggetto + dati di trace sulla cartella collegata da usare come alt della stessa
923        																	-- 20: Rowid del record della relazione
924        			ParoleChiaveOut			OUT		VARCHAR2,						-- Parole chiave legate al folder
925        			CodStatoOut				OUT		VARCHAR2,						-- Codice dello stato (generale e di dettaglio) del folder
926        																	-- E' composto da: <cod_stato>;<cod_stato_dett>
927        			DesStatoOut				OUT		VARCHAR2,						-- Descrizione dello stato (di dettaglio se valorizzato, se no quello generale) del folder
928        			NoteOut				OUT		DMT_FOLDER.NOTE%type,				-- Annotazioni sul folder
929        			AbilitazioniAzioniOut		OUT		VARCHAR2,						-- E' una stringa di 1/0 in cui ogni carattere rappresenta l'abilitazione (1) o meno (0) ad una certa azione sull'unità documentaria
930        																	-- 1° carattere: Editing/modifica
931        																	-- 2° carattere: Cancellazione
932        																	-- 3° carattere: Invio
933        																	-- 4° carattere: Notifica
934        																	-- 5° carattere: Presa visione/presa in carico
935        																	-- 6° carattere: Avvio di un processo sul folder
936        																	-- 7° carattere: Lock
937        																	-- 8° carattere: Unlock
938        																	-- 9° carattere: Aggiunta ai preferiti
939        																	-- 10° carattere: Eliminazione dai preferiti
940        																	-- 11° carattere: Modifica di n.ro fascicolo, sottofascicolo e n.ro inserto
941        																	-- 12° carattere: Modifica del nome del folder e della data di apertura e chiusura
942        																	-- 14° carattere: Abilitazione alla modifica dei permessi
943        			InfoSuLockOut			OUT		VARCHAR2,						-- Dati di un eventuale lock sul folder o oggetti che lo contengono
944        			IdProcessOut			OUT		DMT_PROCESSES.ID_PROCESS%type,		-- Id. del processo/procedimento in corso sul folder (valorizzato solo se ve n'è uno solo)
945        			FlgProcGuidatoDaWFOut		OUT		PLS_INTEGER,					-- (valori 1/0) Indica se il processo/procedimento IdProcessOut è guidato o meno dal motore di workflow
946        			RowidOut				OUT		VARCHAR2,						-- Rowid del record del folder
947        			AttributiAddOut			OUT		NOCOPY CLOB,					-- Lista degli eventuali ulteriori attributi con cui caratterizzare il folder (XML conforme a schema LISTA_STD.xsd)
948        																	-- Ogni attributo è un tag "Riga" che contiene le seguenti colonne:
949        																	-- 1: N.ro (valori da 1 a n) del riquadro (fieldset) in cui mostrare l'attributo
950        																	-- 2: Nome identificativo dell'attributo (ATTR_NAME)
951        																	-- 3: Label del campo con cui rappresentare l'attributo
952        																	-- 4: Tipo di attributo. Valori: DATE, DATETIME, TEXT, TEXT-AREA, CHECK, INTEGER, EURO, DECIMAL, COMBO-BOX, LISTA
953        																	-- 5: N.ro massimo di caratteri/cifre
954        																	-- 6: Larghezza del campo con cui rappresentare l'attributo (size)
955        																	-- 7: Valore dell'attributo
956        																	-- 8: Label del riquadro (fieldset) in cui mostrare l'attributo
957        																	-- 9: (valori 1/0) 1 indica che l'attributo è obbligatorio, 0 che è facoltativo
958        																	-- 10: Altezza (in nro righe) del campo con cui rappresentare l'attributo (se TEXT-AREA)
959        																	-- 11:(valori 1/0) 1 indica se l'attributo è modificabile, 0 che è in sola visualizzazione
960        			FlgMostraAltriAttrOut		OUT		PLS_INTEGER,					-- (valori 1/0) Se 1 nella GUI vanno mostrati gli attributi addizionali (ce ne sono di visibile all'utente), se 0 no
961        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
962        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
963        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
964        			return PLS_INTEGER;											-- 1 in caso di successo, 0 in caso di errore
965        
966        	/******* restituisce i dati di un fascicolo (o sotto-fascicolo o inserto) basato sul piano di classificazione e indicato attraverso il suo ID_FOLDER 	*********/
967        	/******* i dati sono restituiti come XML secondo schema SezioneCache.xsd.																				*********/ 
968        	/******* utilizzata per caricare i dati del fascicolo nelle GUI del modulo protocollo di Auriga															*********/
969        	/******* serve anche ad ottenere i dati da preimpostare nella maschera du creazione di un nuovo fascicolo di cui si indica il folder padre				*********/
970        	function LoadDettFascXGUIModProt(
971        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
972        																					-- (obblig). Codice identificativo del token di connessione
973        			IdUserLavoroIn				IN		DMT_USERS.ID_USER%type DEFAULT NULL,-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
974        			IdFolderIn   				IN    	DMT_FOLDER.ID_FOLDER%type, 			-- (obblig.) Identificativo - ID_FOLDER - del fascicolo o sotto-fascicolo o inserto di cui caricare il dettaglio
975        																					-- se FlgFascInCreazioneIn=1 è l'ID del folder in cui creare il fascicolo (classifica o fascicolo o sotto-fascicolo di appartenenza)
976        			DatiFascXMLOut				OUT		NOCOPY CLOB,						-- Dati del fascicolo (XML conforme a schema SezioneCache.xsd), con l'eccezione degli attributi custom che sono restituiti nell'argomento AttributiAddOut
977        																					-- I dati restituiti corrispondono ai seguenti tag Variabile:
978        																					-- ##############TODO
979        			AttributiAddOut				OUT		NOCOPY CLOB,						-- Lista degli eventuali ulteriori attributi - attributi custom - con cui è caratterizzato il fascicolo (o sotto-fascicolo o inserto) (XML conforme a schema LISTA_STD.xsd)
980        																					-- Ogni attributo è un tag "Riga" che contiene le seguenti colonne:
981        																					-- 1: N.ro (valori da 1 a n) del riquadro (fieldset) in cui mostrare l'attributo
982        																					-- 2: Nome identificativo dell'attributo (ATTR_NAME)
983        																					-- 3: Label del campo con cui rappresentare l'attributo
984        																					-- 4: Tipo di attributo. Valori: DATE, DATETIME, TEXT, TEXT-AREA, CHECK, INTEGER, EURO, DECIMAL, COMBO-BOX, LISTA
985        																					-- 5: N.ro massimo di caratteri/cifre
986        																					-- 6: Larghezza del campo con cui rappresentare l'attributo (size)
987        																					-- 7: Valore dell'attributo
988        																					-- 8: Label del riquadro (fieldset) in cui mostrare l'attributo
989        																					-- 9: (valori 1/0) 1 indica che l'attributo è obbligatorio, 0 che è facoltativo
990        																					-- 10: Altezza (in nro righe) del campo con cui rappresentare l'attributo (se TEXT-AREA)
991        																					-- 11:(valori 1/0) 1 indica se l'attributo è modificabile, 0 che è in sola visualizzazione
992        			FlgMostraAltriAttrOut		OUT		PLS_INTEGER,						-- (valori 1/0) Se 1 nella GUI vanno mostrati gli attributi addizionali (ce ne sono di visibile all'utente), se 0 no
993        			ErrContextOut				OUT		VARCHAR2,							-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
994        			ErrCodeOut					OUT		PLS_INTEGER,						-- N.ro errore di uscita
995        			ErrMsgOut					OUT 	VARCHAR2,							-- Messaggio d'errore
996        			FlgSoloAbilAzioniIn			IN		PLS_INTEGER DEFAULT NULL,			-- Se 1 indica che la funzione non deve caricare tutti i dati del dettaglio fascicolo ma solo le abilitazioni alle azioni 
997        			FlgFascInCreazioneIn		IN		PLS_INTEGER DEFAULT NULL,			-- Se 1 indica che si vogliono i dati da preimpostare nella maschera di creazione di un nuovo fascicolo da creare nel foolder indicato in IdFolderIn
998        			CINodoScrivaniaIn			IN		VARCHAR2 DEFAULT NULL)				-- Cod. nodo scrivania da cui viene richiamato il dettaglio
999        			return PLS_INTEGER;														-- 1 in caso di successo, 0 in caso di errore
1000        
1001        	/******* funzione per ottenere la lista degli oggetti acceduti di recente da un utente (non uno della DMT_USERS) autenticato o da un browser identificato da cookie 	*****/
1002        	/******* gli oggetti sono ordinati in ordine decrescente per data di ultimo accesso															*****/
1003        	function GetObjRecentlyAccessed(
1004        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1005        																	-- (obblig). Codice identificativo del token di connessione utilizzato
1006        			CookieIn				IN		DMT_COOKIE_INFO.COOKIE%type DEFAULT NULL,	-- (obblig. se UsernameIn non è valorizzato) Cookie che identifica il browser per cui estrarre gli oggetti acceduti di recente
1007        			UsernameIn				IN		DMT_COOKIE_INFO.COOKIE%type DEFAULT NULL, -- (obblig. se CookieIn non è valorizzato) Username con cui si è autenticato l'utente (non di sistema) per cui estrarre gli oggetti acceduti di recente
1008        			FlgTyObjIn				IN		VARCHAR2,						-- (obblig.) Indica il tipo di oggetti acceduti di recente da estrarre. Valori ammessi:
1009        																	-- F = Folder
1010        																	-- UD = Unità documentaria
1011        																	-- D = Documento
1012        																	-- V = Versione elettronica di documento
1013        																	-- W = Workspace
1014        			FlgAccessoInLavorazioneIn	IN		VARCHAR2 DEFAULT NULL,				-- (valori 1/0/NULL) Se 1 si ricercano oggetti acceduti non solo in visualizzazione, altrimenti quelli acceduti sia in sola visualizzazione che in lavorazione
1015        			NroMaxOggettiIn			IN		PLS_INTEGER DEFAULT 10,				-- Massimo n.ro di oggetti da estarre (se ce ne sono di più vengono estratti gli ultimi NroMaxOggettiIn acceduti)
1016        			ListaXMLOut				OUT		NOCOPY CLOB,					-- Lista degli oggetti acceduti di recente (XML conforme a schema LISTA_STD.xsd)
1017        																	-- Ogni oggetto è un tag "Riga" con le seguenti colonne:
1018        																	-- 1: Data e ora di ultimo accesso (nel formato del parametro di config. FMT_STD_TIMESTAMP)
1019        																	-- 2: Data e ora di ultimo accesso in lavorazione (nel formato del parametro di config. FMT_STD_TIMESTAMP)
1020        																	-- 3: Id. del documento / folder/ unità documentaria / workspace
1021        																	-- 4: N.ro di versione (valorizzato se FlgTyObjIn=V)
1022        																	-- 5: Descrizione dell'oggetto
1023        																	-- 6: Rowid del record della DMT_COOKIE_INFO
1024        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1025        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1026        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
1027        			return PLS_INTEGER;											-- 1 in caso di successo, 0 in caso di errore
1028        
1029        
1030        	/******* funzione per ottenere la lista dei file (ultime versioni visibili) associati ad un atto in pubblicazione che devono essere scaricabili dall'Albo Virtuale *****/
1031        	/******* per gli atti gestiti da ePraxi estrae i file di tutti i documenti "in pubblicazione" contenuti nel folder dell'atto						   	 *****/
1032        	function GetFilesAttoInAlbo(
1033        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1034        																	-- (obblig). Codice identificativo del token di connessione utilizzato dall'applicazione dell'Albo Virtuale
1035        			IdDocPrimarioAttoIn		IN		DMT_DOCUMENTS.ID_DOC%type,			-- (obblig.) ID_DOC del documento primario dell'atto di cui estrarre i file
1036        			ListaXMLOut				OUT		NOCOPY CLOB,					-- Lista dei file scaricabili dall'Albo(XML conforme a schema LISTA_STD.xsd)
1037        																	-- Ogni file è un tag "Riga" con le seguenti colonne:
1038        																	-- 1: Id. del documento
1039        																	-- 2: N.ro di versione
1040        																	-- 3: Nome con cui visualizzare il file
1041        																	-- 4: Dettagli sul file (da usare come alt)
1042        																	-- 5: Tipo di documento
1043        																	-- 6: Estremi di registrazione del documento
1044        																	-- 7: Oggetto/descrizione del documento
1045        																	-- 8: Uffici/Enti competenti
1046        																	-- 9: Periodo/i di pubblicazione
1047        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1048        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1049        			ErrMsgOut				OUT 		VARCHAR2,						-- Messaggio d'errore
1050        			FlgEscludiPrimarioIn		IN		PLS_INTEGER DEFAULT NULL)			-- (Valori 1/0) Se vale 1 nei file estratti ci sono solo gli allegati, altrimenti si include il dispositivo atto/file primario
1051        			return PLS_INTEGER;											-- 1 in caso di successo, 0 in caso di errore
1052        
1053        	------ funzione per ottenere le variazioni dei dati (e file) di un'unità documentaria che compiano nella stampa del registro ufficiale (ad esempio di protocollo) in cui l'unità è stata registrata e che sono pertanto storicizzati
1054        	------ la funzione al momento non fa alcun controllo di autorizzazione dell'accesso all'unità documentaria da parte dell'utente collegato/di lavoro
1055        	------ le variazioni sono ordinate in ordine di data crescente (dalle più vecchie alle più recenti) e NON sono paginate
1056        	function GetListaVariazioniDatiReg(
1057        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
1058        																					-- (obblig). Codice identificativo del token di connessione
1059        			IdUserLavoroIn				IN		DMT_USERS.ID_USER%type DEFAULT NULL,-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1060        			IdUDIn   					IN    	DMT_UNITA_DOC.ID_UD%type, 			-- (obblig.) Identificativo dell'unità documentaria di cui le variazioni dei dati presenti nel registro
1061        			ListaVariazioniOut			OUT		NOCOPY CLOB,						-- Lista delle variazioni dei dati compresi nel registro (XML conforme a schema LISTA_STD.xsd)
1062        																					-- Ogni variazione è un tag "Riga" che contiene le seguenti colonne:
1063        																					-- 1: Data e ora della variazione (nel formato dato dal parametro di config. FMT_STD_TIMESTAMP)
1064        																					-- 2: Timestamp della variazione nel formato fisso GG/MM/AAAA HH24:MI:SS (comprensivo di secondi)
1065        																					-- 3: Id. dell'utente che ha effettuato la variazione
1066        																					-- 4: Decodifica dell'utente che ha effettuato la variazione
1067        																					-- 5: Motivi a corredo della variazione
1068        																					-- 6: Indicazione di quali dati e file sono stati variati
1069        			ErrContextOut				OUT		VARCHAR2,							-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1070        			ErrCodeOut					OUT		PLS_INTEGER,						-- N.ro errore di uscita
1071        			ErrMsgOut					OUT 	VARCHAR2)							-- Messaggio d'errore
1072        			return PLS_INTEGER;														-- 1 in caso di successo, 0 in caso di errore
1073        
1074        	----- funzione per ottenere i log delle operazioni più rilevanti avvenute (o anche solo tentate) su un'unità documentaria o su un fascicolo del modulo protocollo 
1075        	function GetLogUDFascXGUIModProt(
1076        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
1077        																					-- (obblig). Codice identificativo del token di connessione
1078        			IdUserLavoroIn				IN		DMT_USERS.ID_USER%type DEFAULT NULL,-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1079        			FlgFascUDIn					IN		VARCHAR2,							-- (obblig., valori F/U) Tipo di oggetto di cui estrarre i log: F = Fascicolo, U = Unità documentaria 
1080        			IdObjLoggedIn				IN		INTEGER,							-- (obblig.) Identificativo (ID_FOLDER o ID_UD) del fascicolo o unità documentaria di cui estarre i log
1081        			ListaLogOut					OUT		NOCOPY CLOB,						-- Lista con i log delle operazioni avvenute sul fascicolo / unità documentaria (XML conforme a schema LISTA_STD.xsd)
1082        																					-- Ogni variazione è un tag "Riga" che contiene le seguenti colonne:
1083        																					-- 1: Timestamp dell'operazione (nel formato dato dal parametro di config. FMT_STD_TIMESTAMP)
1084        																					-- 2: Progressivo operazione per ordinamento cronologico
1085        																					-- 3: Id. dell'utente che ha effettuato l'operazione
1086        																					-- 4: Decodifica dell'utente che ha effettuato l'operazione
1087        																					-- 5: Id. dell'utente a nome di cui stava lavorando chi ha effettuato l'operazione
1088        																					-- 6: Decodifica dell'utente a nome di cui stava lavorando chi ha effettuato l'operazione
1089        																					-- 7: Codice del tipo di operazione
1090        																					-- 8: Decodifica del tipo di operazione
1091        																					-- 9: Descrizione/dettagli dell'operazione
1092        																					-- 10:Esito dell'operazione (valori: successo; fallita)
1093        																					-- 11:Messaggio di errore (nel caso di operazione fallita)
1094        			FlgIncludiOpFalliteIn		IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 nel log vengono inserite anche le operazioni tentate ma NON andate a buon fine, altrimenti sono estratte solo le operazioni andate a buon fine
1095        			ErrContextOut				OUT		VARCHAR2,							-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1096        			ErrCodeOut					OUT		PLS_INTEGER,						-- N.ro errore di uscita
1097        			ErrMsgOut					OUT 	VARCHAR2)							-- Messaggio d'errore
1098        			return PLS_INTEGER;														-- 1 in caso di successo, 0 in caso di errore
1099        			
1100        	----- funzione per ottenere informazioni da pgweb tramite identificativo di protocollo
1101            function GetProtDaPGWEB(
1102                     CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
1103        																							-- (obblig). Codice identificativo del token di connessione
1104                    IdUserLavoroIn				IN		DMT_USERS.ID_USER%type DEFAULT NULL,		-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1105                    SiglaProtIn                 IN		VARCHAR2,                           		-- (obblig., sigla del protocollo con cui ricercare i dati
1106        																							-- se PG è u protocollo Generale, altrimenti un protocollo di settore
1107                    AnnoProtIn                	IN		INTEGER,                            		-- (obblig.) anno del protocollo con cui ricercare i dati
1108                    NumProtIn                	IN      INTEGER,                            		-- (obblig.) numero del protocollo con cui ricercare i dati
1109                    SubProtIn                 	IN      INTEGER,                            		-- sub protocollo per i protocollo di settore
1110                    ListaOut                    OUT    	NOCOPY CLOB,                        		-- Lista con le vie del protocollo (XML conforme a schema LISTA_STD.xsd)
1111        			ErrContextOut               OUT    	VARCHAR2,                           		-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1112                    ErrCodeOut                  OUT     PLS_INTEGER,                        		-- N.ro errore di uscita
1113                    ErrMsgOut                   OUT     VARCHAR2)                            		-- Messaggio d'errore
1114        			return PLS_INTEGER;                                                  			-- 1 in caso di successo, 0 in caso di errore
1115        
1116        	----- funzione per ottenere i dati di un contribuente da ACSOR tramite codice ACSOR
1117            function GetDatiDaACSOR(
1118                    CodIdConnectionTokenIn        IN        DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
1119                                                                                                     -- (obblig). Codice identificativo del token di connessione
1120                    IdUserLavoroIn                IN        DMT_USERS.ID_USER%type DEFAULT NULL,     -- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1121                    CodACSORIn                 IN        VARCHAR2,                                   -- (obblig.) codice ACSOR
1122                    ListaOut                    OUT        NOCOPY CLOB,                              -- Lista i dati (XML conforme a schema LISTA_STD.xsd)
1123                    
1124                    ErrContextOut               OUT        VARCHAR2,                                -- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1125                    ErrCodeOut                  OUT     PLS_INTEGER,                                -- N.ro errore di uscita
1126                    ErrMsgOut                   OUT     VARCHAR2)                                   -- Messaggio d'errore
1127                    return PLS_INTEGER;                                                            	-- 1 in caso di successo, 0 in caso di errore
1128            
1129        	---------- funzione per ottenere gli ID delle unità documentarie collegate - anche indirettamente - ad una adata UD in input
1130        	---------- valide, e visibili all'utente di lavoro in input
1131        	function GetIdUDCatenaUDCollegate(
1132        			FlgTpDominioAutIn			IN			INTEGER,								 -- (obblig.) Tipo di dominio (2 o 3)
1133        			IdDominioAutIn				IN			DMT_SOGGETTI_PROD_AOO.ID_SP_AOO%type,	 -- (obblig.) Id. del dominio di lavoro (ID_SP_AOO)
1134        			IdUserLavoroIn              IN        	DMT_USERS.ID_USER%type DEFAULT NULL,     -- (obblig)Id. dell'utente di lavoro
1135        			IdUDIn						IN			DMT_UNITA_DOC.ID_UD%type)				 -- (obblig). Id. dell'unita documentaria di cui trovare le UD collegate (anche indirettamente) visibili all'utente di lavoro
1136        			return DMTO_ID;																	 -- restituisce la lista degli ID_UD delle UD collegate									
1137        
1138        	---------- funzione per ottenere i soggetti contenuti in un gruppo destinatario/assegnatario di un'UD	
1139        	---------- serve anche per ottenere in generale i componenti - come soggetti di rubrica - di un gruppo di sogggetti rubrica usato/che si sta impostando come destinatario/assegnatario/dest. di invio in conoscenza
1140        	function GetCompGruppoAssDestUD(
1141        			CodIdConnectionTokenIn      IN        	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
1142                                                                                                    -- (obblig). Codice identificativo del token di connessione
1143                    IdUserLavoroIn              IN        	DMT_USERS.ID_USER%type DEFAULT NULL,    -- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1144                    IdUDIn						IN			DMT_UNITA_DOC.ID_UD%type,				-- Id. dell'unità documentaria
1145        																							-- può essere lasciato vuoto se si vuole la composizione attuale di un gruppo
1146        			FlgAssDestIn				IN			VARCHAR2,								-- (valori A/D/C) Indica se il gruppo da esplodere è un destinatario (=D) o assegnatario dell'UD (=A) o destinatario di invio in conoscenza (=C)
1147        																							-- si può lasciare vuoto nel caso di gruppo destinatario di invio per conoscenza (NULL viene inteso come C)
1148        			IdGruppoSoggEstIn			IN			DMT_GRUPPI_SOGG_EST.ID_GRUPPO%type,		-- (obblig).Id. del gruppo destinatario/assegnatario da esplodere
1149        			------------- inizio argomenti standard di tutte le funzioni che devono restituire una lista di risultati--------------
1150        			ColOrderByIO				IN OUT	VARCHAR2,									-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso. Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
1151        																							-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
1152        																							-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
1153        			FlgDescOrderByIO  			IN OUT	VARCHAR2,									-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
1154        																							-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.			
1155        			FlgSenzaPaginazioneIn 		IN 		PLS_INTEGER DEFAULT NULL,            		-- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
1156        			NroPaginaIO      			IN OUT	PLS_INTEGER,                  				-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
1157           			BachSizeIO					IN OUT	PLS_INTEGER,								-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)  
1158        																							-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro				
1159        			OverFlowLimitIn				IN		PLS_INTEGER DEFAULT NULL,					-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow
1160        			FlgSenzaTotIn				IN		PLS_INTEGER DEFAULT NULL,					-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
1161        			NroTotRecOut				OUT		PLS_INTEGER,								-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina)
1162             		NroRecInPaginaOut 			OUT   	PLS_INTEGER,                     			-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
1163        			------------- fine argomenti standard di tutte le funzioni che devono restituire una lista di risultati--------------
1164        			ListaXMLOut					OUT NOCOPY CLOB,									-- Lista xml (conforme a schema ListaStd.xsd) con i componenti del gruppo assegnatario/destinatario
1165        																							-- Ogni tag riga è un soggetto destinatario ed è composta dalle colonne
1166        																							-- 1: Id. in rubrica soggetti
1167        																							-- 2: Tipo di soggetto: #APA=Altra PA, #IAMM= Altra AOO/UO dell'Amministrazione (esterna all'AOO), #AF = Altro (Pers. fisica), #AG=Altro (Pers. giuridica), UO;UOI= U.O./Ufficio interno, UP=Unità di persoanle
1168        																							-- 3: Denominazione / Cognome e Nome
1169        																							-- 4: Cognome
1170        																							-- 5: Nome
1171        																							-- 6: Codice rapido/parlante
1172        																							-- 7: Codice fiscale/partita IVA
1173        																							-- 8: Indirizzo (solo per i destinatari)
1174        																							-- 9: ID_UO o ID_SCRIVANIA o ID_UTENTE corrispondente al destinatario/assegnatario preceduto dal prefisso UO, UT, SV
1175        			ErrContextOut               OUT        	VARCHAR2,                               -- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1176                    ErrCodeOut                  OUT     	PLS_INTEGER,                            -- N.ro errore di uscita
1177                    ErrMsgOut                   OUT     	VARCHAR2)                               -- Messaggio d'errore
1178                    return PLS_INTEGER;                                                            	-- 1 in caso di successo, 0 in caso di errore
1179        
1180        	/******** restituisce i dati da proporre per la registrazione di una risposta di una precedente registrazione in entrata  	*********/
1181        	/*******  i dati sono restituiti come XML secondo schema SezioneCache.xsd.													*********/ 
1182        	/*******  restituisce nell'xml le stesse variabili della LoadDettUDXGUIModProt												*********/
1183        	function GetDatiUDRisposta(
1184        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
1185        																					-- (obblig). Codice identificativo del token di connessione
1186        			IdUserLavoroIn				IN		DMT_USERS.ID_USER%type DEFAULT NULL,-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1187        			IdUDIn   					IN    	DMT_UNITA_DOC.ID_UD%type, 			-- (obblig.) Identificativo dell'unità documentaria in entrata da cui ricavare i dati dell'unità documentaria di risposta
1188        			DatiUDXMLOut				OUT		NOCOPY CLOB,						-- Dati della registrazione (XML conforme a schema SezioneCache.xsd), con l'eccezione degli attributi custom che sono restituiti nell'argomento AttributiAddOut
1189        																					-- Dati da preimpostare nell'UD di risposta. XML SezioneCache
1190        																					-- Le variabili presenti sono le stesse dell'omonimo output della funzione LoadDettUD
1191        			ErrContextOut				OUT		VARCHAR2,							-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1192        			ErrCodeOut					OUT		PLS_INTEGER,						-- N.ro errore di uscita
1193        			ErrMsgOut					OUT 	VARCHAR2							-- Messaggio d'errore
1194        			) return PLS_INTEGER;													-- 1 in caso di successo, 0 in caso di errore
1195        
1196        	
1197        	----- funzione per ottenere i dati degli emendamenti (ed eventuali sub) collegati ad una proposta di atto o emendamento
1198        	function GetListaEmendamenti(
1199        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
1200        																					-- (obblig). Codice identificativo del token di connessione
1201        			IdUserLavoroIn				IN		DMT_USERS.ID_USER%type DEFAULT NULL,-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1202        			IdUDIn   					IN    	DMT_UNITA_DOC.ID_UD%type, 			-- (obblig.) ID_UD della delibera/mozione ecc cui si riferiscono gli emendamenti da caricare.
1203        																					-- Può essere l'ID_UD di un emendamento (nel qual caso la lista carica i sub-emendamenti)
1204        			FlgInclSubIn				IN		PLS_INTEGER DEFAULT 1,				-- Se 1 qualora IdUDIn sia l'ID_UD di una proposta vengono mostrati anche i sub-emendamenti, altrimenti solo gli emendamenti																	
1205        			EmendamentiOut				OUT		NOCOPY CLOB,						-- Lista degli emendamenti  (XML conforme a LISTA_STD.xsd)
1206        																					-- Ogni riga rappresente un emendamento o sub e contiene le colonne:
1207        																					-- 1: ID_UD
1208        																					-- 2: N.ro emendamento
1209        																					-- 3: N.ro sub-emendamento
1210        																					-- 4: Data e ora di caricamento (nel formato FMT_STD_TIMESTAMP)
1211        																					-- 5: Struttura proponente
1212        																					-- 6: CdC struttura proponente
1213        																					-- 7: Firmatario/i
1214        																					-- 8: Data e ora di perfezionamento (nel formato FMT_STD_TIMESTAMP)
1215        																					-- 9: Indica se l'emendamento è sul testo principale o su allegato
1216        																					-- 10: N.ro di allegato cui è relativo l'emendamento
1217        																					-- 11: Pagina cui è relativo l'emendamento
1218        																					-- 12: N.ro riga da cui deve agire l'emendamento
1219        																					-- 13: Effetto dell'emendamento: indicazione se sostituisce (S), aggiunge (A) o elimina (E)
1220        																					-- 14: (valori 1/0) Flag "emendamento integrale": se 1 e se emendamento su allegato indica che l'emendamento sostituisce integralmente l'allegato
1221        																					-- 15: Testo html dell'emendamento (CKEDITOR)
1222        																					-- 16: URI del file dell'emendamento
1223        																					-- 17: Nome del file dell'emendamento
1224        																					-- 18: (valori 1/0) Flag di emendamento firmato digitamente
1225        																					-- 19: Mimetype del file dell'emendamento
1226        																					-- 20: (valori 1/0) Flag di file pdf o pdfizzabile
1227        																					-- 21: Pareri espressi: data e autore
1228        																					-- 22: File dei pareri: NomeFile1|*|URI1||FlgFirmato1|*|DataPerfezionamento1|*|NomeFile2|*|URI2|*|FlgFirmato2|*|DataPerfezionamento2....
1229        																					--	   I file dei pareri sono tutti pdf
1230        																					-- 23: Id del processo di lavorazione dell'emendamento (se presente)
1231        																					-- 24: Dimensione del file (in bytes)
1232        																					-- 25: N° identificativo univoco (quello nel registro EM)
1233        			NroEmendamentiOut			OUT		PLS_INTEGER,						-- Nro totale di emendamenti e sub mostrati in lista
1234        			NroSubEmendamentiOut		OUT		PLS_INTEGER,						-- N.ro di sub-emendamenti in lista
1235        			FlgBloccoRiordAutoOut		OUT		PLS_INTEGER,						-- Se 1 indica che è diasttivato il riordino automatico degli emendamenti p
1236        			ErrContextOut				OUT		VARCHAR2,							-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1237        			ErrCodeOut					OUT		PLS_INTEGER,						-- N.ro errore di uscita
1238        			ErrMsgOut					OUT 	VARCHAR2							-- Messaggio d'errore
1239        			) return PLS_INTEGER;													-- 1 in caso di successo, 0 in caso di errore
1240        		
1241        
1242        			
1243        	----- funzione per ottenere i dati delle firme e visti apposti su un atto/proposta di atto o su un emendamento
1244        	function LoadFirmeVistiAtto(
1245        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
1246        																					-- (obblig). Codice identificativo del token di connessione
1247        			IdUserLavoroIn				IN		DMT_USERS.ID_USER%type DEFAULT NULL,-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1248        			IdUDIn   					IN    	DMT_UNITA_DOC.ID_UD%type, 			-- (obblig.) ID_UD dell'atto/proposta di atto/emendamento
1249        			EstremiAttoOut				OUT		VARCHAR2,							-- Estremi dell'atto/proposta/emendamento da usare come titolo della maschera che mostra le firme/visti																	
1250        			ListaFirmeXMLOut			OUT		NOCOPY CLOB,						-- Lista delle firme/visti apposti  (XML conforme a LISTA_STD.xsd)
1251        																					-- Ogni riga rappresente un emendamento o sub e contiene le colonne:
1252        																					-- 1: Data e ora di firma (nel formato FMT_STD_TIMESTAMP)
1253        																					-- 2: Tipo di firma. D = Digitale, E = Elettronica (ovvero visto o firma leggera)
1254        																					-- 3: Nominativo firmatario
1255        																					-- 4: Ruolo con cui ha firmato/vistato
1256        			ErrContextOut				OUT		VARCHAR2,							-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1257        			ErrCodeOut					OUT		PLS_INTEGER,						-- N.ro errore di uscita
1258        			ErrMsgOut					OUT 	VARCHAR2							-- Messaggio d'errore
1259        			) return PLS_INTEGER;													-- 1 in caso di successo, 0 in caso di errore
1260        	
1261        	--- funzione che restituisce i file da mettere nella busta timbrata di un'UD
1262        	function LoadFilePerTimbroConBusta(
1263        			CodIdConnectionTokenIn		IN		DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%type,
1264        																					-- (obblig). Codice identificativo del token di connessione
1265        			IdUserLavoroIn				IN		DMT_USERS.ID_USER%type DEFAULT NULL,-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1266        			IdUDIn   					IN    	DMT_UNITA_DOC.ID_UD%type, 			-- (obblig.) ID_UD
1267        			FlgPubblConOmissisOut		OUT		PLS_INTEGER,						-- Se restituisce 1 significa che esiste una version pubblicabile con omissis rispetto alla versione integrale
1268        			ListaFileOut				OUT		NOCOPY CLOB,						-- Lista xml con i file (ListaStd.xml)
1269        																					-- Ogni riga corrisponde ad un file e contiene le colonne seguenti:
1270        																					-- 1) indicazione se file I = solo Versione integrale, P = solo Versione per pubblicazione, IP = di entrambe
1271        																					-- 2) URI del file
1272        																					-- 3) DisplayFilename del file
1273        			ErrContextOut				OUT		VARCHAR2,							-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1274        			ErrCodeOut					OUT		PLS_INTEGER,						-- N.ro errore di uscita
1275        			ErrMsgOut					OUT 	VARCHAR2,							-- Messaggio d'errore
1276        			IdDocIn						IN		INTEGER DEFAULT NULL				-- Id. documento dello specifico documento da cui si richiama la timbratura
1277        			) return PLS_INTEGER;													-- 1 in caso di successo, 0 in caso di errore
1278        	
1279        END DMPK_REPOSITORY_GUI;