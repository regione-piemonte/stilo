1        PACKAGE DMPK_ANAGRAFICA AUTHID CURRENT_USER IS
2        
3        	/****************************************************		INFORMAZIONI GENERALI		***********************************************************/
4        	/************** Argomenti delle stored per il controllo della transazione:																	*******/
5        	/************** FlgRollBckFullIn -> se 1 in caso di errore viene fatta la rollback completa (non a savepoint), 								*******/
6        	/************** 				altrimenti la rollback delle sole modifiche effettuate nella stored											*******/
7        	/************** 				ATTENZIONE: la rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log						*******/
8        	/************** FlgAutoCommitIn  -> se vale 1, dopo la rollback e qualunque sia l'esito (positivo o no), la stored esegue una commit finale *******/
9        	/************** Tutte le funzioni/procedure che NON hanno gli argomenti in input FlgRollBckFullIn e FlgAutoCommitIn 						*******/
10        	/************** NON ESEGUONO AL LORO INTERNO ALCUNA COMMIT nè ROLLBACK 																		*******/
11        
12        	/************** Tutte le funzioni, tranne quelle da utilizzarsi nelle select, restituiscono 1 in caso di successo, altrimenti 0				*******/
13        	/************** Tali funzioni restituiscono, in caso di result 0, un n.ro, un contesto e un messaggio di errore:							*******/
14        	/************** il n.ro è: <0 se errore ORACLE non specificamente gestito 																	*******/
15        	/**************		   da 1->1000 errore "grave" (SEVERE_ERROR) gestito																		*******/
16        	/**************		   >1000 errore non grave gestito																						*******/
17        	/************** il contesto indica il package e/o funzione/procedura in cui si è verificato l'errore										*******/
18        
19        
20        	/**** Funzione per testare se un soggetto di rubrica o un gruppo appartiene ad un dato gruppo di soggetti rubrica					*****/
21        	function TestAppartenenzaAGruppo (
22        			IdGruppoIn			IN		DMT_GRUPPI_SOGG_EST.ID_GRUPPO%type,	-- (obblig.) Identificativo del gruppo a cui si deve testare l'appartenenza
23        			FlgTpObjToTestIn	IN		VARCHAR2,							-- (obblig.) Indica il tipo di oggetto che si vuole testare se appartiene al gruppo IdGruppoIn
24        																			-- Valori ammessi:
25        																			-- S	=	Soggetto rubrica
26        																			--	G	=	Gruppo
27        			IdObjToTestIn		IN		INTEGER)							-- (obblig.)  Identificativo (ID_SOGG_RUBRICA o ID_GRUPPO) dell'oggetto che si vuole testare se appartiene al gruppo IdGruppoIn
28        			return PLS_INTEGER;												-- Valori possibili:
29        																			--	1	=	test positivo
30        																			--	0	=	test negativo
31        																			--	interi negativi = errore (il result è il codice d'errore)
32        
33        	/***** Table function per esplodere un gruppo di soggetti rubrica nell'insieme di soggetti rubrica e/o altri gruppi che ricomprende	******/
34        	function EsplodiGruppo(
35        			IdDominioIn			IN		DMT_SOGGETTI_PROD_AOO.ID_SP_AOO%type,
36        																			-- Id. del dominio di lavoro in cui esplodere
37        			IdSpAppIn			IN		DMT_SOGGETTI_PROD_AOO.ID_SP_AOO%type,
38        																			-- Id. del sogg. produttore di appartenenza del dominio IdDominioIn (se questo è una AOO)
39        			IdGruppoIn			IN		DMT_GRUPPI_SOGG_EST.ID_GRUPPO%type,	-- (obblig.) Identificativo del gruppo da esplodere
40        			TpObjToExtractIn	IN		VARCHAR2,							-- Se valorizzato indica che esplodendo si devono estrarre solo oggetti di un certo tipo
41        																			-- Valori ammessi:
42        																			--	S	=	Soggetti rubrica
43        																			--	G	=	Gruppi
44        																			--	NULL	=	Qualsiasi tipo
45        			TsVldIn			IN		VARCHAR2 default TO_CHAR(sysdate, 'DD/MM/RRRR HH24:MI:SS')
46        																			-- Stringa con il timestamp (nel formato GG/MM/AAAA HH24:MI:SS) a cui devono essere validi gli oggetti da estrarre. Se non valorizzato si intende che si debbano estrarre oggetti validi a qualsiasi timestamp
47        			)return DMTO_STRING;											-- Lista con i soggetti rubrica e/o gruppi in cui è stato esploso il gruppo
48        																			-- Ogni record contiene la sigla del tipo di oggetto che rappresenta (S o G) concatenata con l'id. dell'oggetto stesso (ID_SOGG_RUBRICA o ID_GRUPPO) (es: G1001; S99; S56)
49        
50        	/******* serve a ricercare un gruppo di soggetti rubrica a partire da id. e/o nome e/o cod. rapido						******/
51        	/******* restituisce l'Id. del gruppo solo se a partire dagli estremi immessi riesce a identificarlo univocamente		******/
52        	function FindGruppo(
53        			IdSpAOOIn			IN		DMT_SOGGETTI_PROD_AOO.ID_SP_AOO%type,
54        																			-- Identificativo del soggetto produttore o AOO per cui deve esistere il gruppo
55        			IdGruppoIn			IN		DMT_GRUPPI_SOGG_EST.ID_GRUPPO%type DEFAULT NULL,
56        																			-- Identificativo univoco del gruppo
57        			NomeGruppoIn		IN		DMT_GRUPPI_SOGG_EST.NOME_GRUPPO%type DEFAULT NULL,
58        																			-- Nome del gruppo (o suo inizio; ricerca case insensitive in like)
59        			CodRapidoIn			IN		DMT_GRUPPI_SOGG_EST.COD_RAPIDO%type DEFAULT NULL,
60        																			-- Codice rapido del gruppo (ricerca case insensitive esatta)
61        			FlgSoloVldIn		IN		PLS_INTEGER DEFAULT 1,				-- (valori 1/0/NULL) Indica se il gruppo deve essere valido (1) o no (al timestamp indicato nell'argomento soccessivo)
62        			TsRifIn				IN		VARCHAR2 default TO_CHAR(sysdate, 'DD/MM/RRRR HH24:MI:SS'),
63        																			-- Stringa con il timestamp (nel formato GG/MM/AAAA HH24:MI:SS) di riferimento al quale il gruppo deve essere valido ed evere gli estremi indicati in input. Se non valorizzato si intende sysdate
64        			FlgNoPercFinaleSuNomeIn	IN		PLS_INTEGER	DEFAULT NULL		-- (valori 1/0/NULL) Se 1 la ricerca sul nome non forza il % finale (a meno che non ci sia espressamente)
65        			) return INTEGER;												-- restituisce ID_GRUPPO del gruppo se individuato, altrimenti NULL
66        
67        	/**** Funzione per ricercare soggetti della rubrica soggetti esterni ****/
68        	FUNCTION TrovaSoggetti(
69        			CodIdConnectionTokenIn	IN	    DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
70        																					-- (obblig). Codice identificativo del token di connessione
71        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
72        			MatchByIndexerIn		IN		CLOB DEFAULT NULL,						-- Lista dei soggetti che sono stati trovati dal searcher di Lucene (XML conforme a schema LISTA_STD.xsd)
73        																					-- Ogni oggetto di Lucene trovato è un tag Riga che contiene le seguenti colonne:
74        																					-- 1: identificativo del soggetto
75        																					-- 2: non utilizzata
76        																					-- 3: flag 1/0 che indica se il match dell'oggetto richiede attributi "protetti", ovvero che possono contenere dati riservati
77        																					-- 4: score restituito da Lucene
78        			FlgIndexerOverflowIn	IN		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se 1 significa che il searcher di Lucene ha trovato un numero di oggetti superiore ad un limite massimo consentito.
79        																					-- Nel caso il flag valga 1 l’argomento precedente può essere vuoto o se non lo è il suo contenuto viene comunque ignorato
80        			Flg2ndCallIn			IN		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se 1 indica che si tratta della seconda chiamata alla stored che viene fatta a seguito di una ricerca sottomessa.
81        																					-- Può essere 1 solo se MatchByIndexerIn contiene degli oggetti.
82        																					-- E' un flag che serve per velocizzare la ricerca: infatti quando è 1 i filtri vengono ignorati in quanto si considera che il set restituito dall'indicizzatore sia già fatto di oggetti soddisfacenti tutti i filtri; la chiamata alla stored serve solo per verificare l'accesso agli oggetti restituiti dall'indicizzatore, ordinare ed eventualmente paginare il risultato e calcolare tutti i dati degli oggetti da restituire.
83        			--------------- inizio filtri di ricerca-------------------
84        			DenominazioneIO			IN OUT	DMT_RUBRICA_SOGGETTI.DENOMINAZIONE%TYPE,-- 1° filtro di ricerca: stringa contenuta nella denominazione/cognome e nome del soggetto (ricerca case insensitive in like senza forzare il % finale)
85        			FlgInclAltreDenomIO		IN OUT	PLS_INTEGER, 							-- (valori 1/0/NULL) Se 1 la ricerca per il 1° filtro si estende alle denominazioni/intestazioni non primarie (pseudonimi, altre denom. ecc)
86        			FlgInclDenomStoricheIO	IN OUT	PLS_INTEGER, 							-- (valori 1/0/NULL) Se 1 la ricerca per il 1° filtro si estende alle denominazioni/intestazioni passate
87        			CFIO					IN OUT	DMT_RUBRICA_SOGGETTI.CF%TYPE,			-- 2° filtro di ricerca: stringa contenuta nel codice fiscale del soggetto (ricerca case-insensitive in like senza forzare il % finale)
88          			PIVAIO					IN OUT	DMT_RUBRICA_SOGGETTI.PIVA%TYPE,			-- 3° filtro di ricerca: stringa contenuta nella partita IVA del soggetto (ricerca case-insensitive in like senza forzare il % finale)
89        			FlgFisicaGiuridicaIn	IN			VARCHAR2 DEFAULT NULL,				-- (valori F/G) filtro per restringere la ricerca alle sole persone fisiche o giuridiche
90        			FlgNotCodTipiSottoTipiIn IN			PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) è legato al filtro ListaCodTipiSottoTipiIO: se 1 la condizione sui tipi specificati è NOT IN
91        			ListaCodTipiSottoTipiIO	IN OUT	VARCHAR2,								-- 4° filtro di ricerca: Lista di codice di tipi e/o sottotipi dei soggetti da ricercare (se più di uno sono separati con ";")
92        																					-- se FlgNotCodTipiSottoTipiIn=1 sono i tipi e/o sottotipi che NON devono avere i soggetti
93        			eMailIO					IN OUT	VARCHAR2,								-- 13° filtro di ricerca: stringa contenuta in un indirizzo e-mail del soggetto (ricerca case-insensitive in like senza forzare % finale)
94        			CodRapidoIO				IN OUT	DMT_RUBRICA_SOGGETTI.COD_RAPIDO%TYPE,
95        																					-- 6° filtro di ricerca: Codice rapido del soggetto o sua parte iniziale (ricerca case-sensitive in like senza forzare il % finale)
96        			CIProvSoggIO			IN OUT	DMT_RUBRICA_SOGGETTI.PROV_CI_SOGG%TYPE,	-- 7° filtro di ricerca: Codice identificativo del soggetto nel sistema di provenienza (ad esempio l'anagrafe residenti/ditte): ricerca case-sensitive in like senza forzare il % finale
97        																					-- se il soggetto corrisponde ad una soggetto produttore, AOO, UO o utente del sistema il CI_PROV è ID_SP_AOO o ID_UO o ID_USER preceduto dal prefisso [SPAOO], [UO], [USER]
98        			FlgSoloVldIO 			IN OUT 	PLS_INTEGER, 							-- (valori 1/0/NULL) 8° filtro di ricerca: Se 1 indica se si devono estrarre solo le posizioni anagrafiche attive alla data odierna
99        			TsVldIO					IN OUT	VARCHAR2,								-- 9° filtro di ricerca: Stinga con il timestamp (nel formato GG/MM/AAAA HH24:MI:SS) a cui devono essere attive le posizioni anagrafiche (se non specificato si intendono la data e ora correnti)
100        			CodApplOwnerIO			IN OUT	VARCHAR2,								-- 10° filtro di ricerca: Codice dell'applicazione "proprietaria" dei soggetti. Se valorizzata pari a #BY_CONN_TKN e si è connessi da un'applicazione esterna si ricercano solo soggetti di cui è proprietaria quell'applicazione
101        			CodIstApplOwnerIO		IN OUT	VARCHAR2,								-- 11° filtro di ricerca: Codice dell'istanza di applicazione "proprietaria" dei soggetti. Se valorizzata pari a #BY_CONN_TKN e si è connessi da un'applicazione esterna si ricercano solo soggetti di cui è proprietaria l'istanza di applicazione esterna da cui si è connessi
102        			FlgRestrApplOwnerIO		IN OUT	PLS_INTEGER,							-- (valori 1/0/NULL) Se 1 vengono estratti solo soggetti di cui è proprietaria l'applicazione proprietaria (ed eventuale istanza) specificata in CodApplOwnerIn; se 0 o NULL e se CodApplOwnerIn è valorizzata vengono estratti solo i soggetti senza applicazione proprietaria o con applicazione proprietria pari a quella specificata
103        			FlgCertificatiIO		IN OUT	PLS_INTEGER,							-- (valori 1/0/NULL) 12° filtro di ricerca: se 1 vengono estratti solo i soggetti i cui dati sono "certificati", se 0 solo quelli con dati non sono certificati
104        			FlgInclAnnullatiIO		IN OUT	PLS_INTEGER,							-- (valori 1/0/NULL) 13° filtro di ricerca: se 1 vengono estratti anche i soggetti logicamente annullati, altrimenti no
105        			IdSoggRubricaIO			IN OUT	DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,
106        																					-- 12° filtro di ricerca: Identificativo del soggetto da ricercare
107        			FlgInIndicePAIO			IN OUT	PLS_INTEGER,							-- 13° (valori 1/0/NULL) Se 1 la ricerca viene ristretta ai soggetti - enti, AOO e UO - censiti all'Indice PA
108        			CodAmmIPAIO				IN OUT	VARCHAR2,								-- 14°: codice dell'Amministrazione di appartenenza (o con cui coindice il soggetto) sull'Indice PA. Ricerca case insensitive in like
109        			CodAOOIPAIO				IN OUT	VARCHAR2,								-- 15°: codice dell'AOO di appartenenza (o con cui coindice il soggetto) sull'Indice PA. Ricerca case insensitive in like
110        			IsSoggRubricaAppIO		IN OUT 	DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,
111        																					-- 16°: id. del soggetto della rubrica cui devono appartenere i soggetti da ricercare
112        			IdGruppoAppIO			IN OUT	DMT_GRUPPI_SOGG_EST.ID_GRUPPO%type,		-- 17° filtro di ricerca: id. di un gruppo di soggetti cui devono apppartenere i soggetti da ricercare
113        			NomeGruppoAppIO			IN OUT	VARCHAR2,								-- 18° filtro di ricerca: nome di un gruppo di soggetti cui devono apppartenere i soggetti da ricercare (ricerca esatta case-insensitive: da nome si deve individuare univocamente un gruppo)
114        			StrInDenominazioneIn	IN 			DMT_RUBRICA_SOGGETTI.DENOMINAZIONE%TYPE DEFAULT NULL, -- 19° filtro di ricerca: stringa contenuta nella denominazione/cognome e nome del soggetto (ricerca di tipo contains)
115        			CriteriPersonalizzatiIO	IN OUT 	NOCOPY CLOB,							-- Altri criteri di ricerca sugli attributi addizionali (XML conforme a schema LISTA_STD.xsd). Se più di uno vengono applicati in AND.
116        																					-- Ogni criterio è un tag Riga che può contenere le seguenti colonne:
117        																					--	1) Nome (ATTR_NAME) dell'attributo cui è relativo il criterio
118        																					--	2) (obblig.) Operatore logico. Valori possibili:
119        																					--		"uguale" (ricerca esatta)
120        																					--		"simile a (case-sensitive)" (ricerca case-sensitive in like)
121        																					--		"simile a (case-insensitive)" (ricerca case-insensitive in like e che ignora i caratteri quali spazi, ., ecc)
122        																					--		"maggiore" (se attributo numerico o data)
123        																					--		"maggiore o uguale" (se attributo numerico o data)
124        																					--		"minore" (se attributo numerico o data)
125        																					--		"minore o uguale" (se attributo numerico o data)
126        																					--		"tra" (se attributo numerico o data)
127        																					--		"non valorizzato"
128        																					--		"valorizzato"
129        																					--		"spuntato" (se attributo di tipo casella di spunta)
130        																					--		"non spuntato" (se attributo di tipo casella di spunta)
131        																					--	3) 1° valore di confronto (obblig. e gestito solo se l'operatore non ha uno dei seguenti valori: valorizzato, non valorizzato, spuntato, non spuntato) (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
132        																					--	4) 2° valore di confronto (obblig. e gestito solo se l'operatore è "tra") (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
133        																					--	5) Label dell''attributo cui è relativo il criterio (se sotto-attributo di complesso <label del complesso> - <label del sotto-attributo>
134        			------------- inizio argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
135        			ColOrderByIO			IN OUT	VARCHAR2,								-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso (si può ordinare solo per le colonne da 1 a 6 + 47 + 52). Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
136        																					-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
137        																					-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
138        			FlgDescOrderByIO  		IN OUT	VARCHAR2,								-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
139        																					-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.
140        			FlgSenzaPaginazioneIn 		IN 		PLS_INTEGER DEFAULT NULL,            -- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
141        			NroPaginaIO      			IN OUT	PLS_INTEGER,                  		-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
142           			BachSizeIO				IN OUT	PLS_INTEGER,							-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)
143        																					-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro
144        			OverFlowLimitIn			IN		PLS_INTEGER DEFAULT NULL,				-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow
145        			FlgSenzaTotIn			IN		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
146        			NroTotRecOut			OUT		PLS_INTEGER,							-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina)
147             		NroRecInPaginaOut 		OUT   	PLS_INTEGER,                     		-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
148        			FlgBatchSearchIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che la stored è utilizzata da un processo batch, altrimenti da un processo online.
149        																					-- Serve affinchè in caso l'input OverFlowLimitIn non sia valorizzato vengano applicati i limiti di overflow per processo batch o online che sono parametri di configurazione del sistema.
150        			ColToReturnIn			IN		VARCHAR2 DEFAULT NULL,					-- Stringa con i n.ri delle colonne dell'XML di output ListaXMLOut che si vuole siano presenti.
151        																					-- Se la stringa è vuota saranno presenti tutte le colonne.
152        																					-- La colonna 1 sarà presente comunque.
153        																					-- I n.ri delle varie colonne vanno separati con , o ; e se si vuole indicare un intervallo di colonne gli estremi dell'intervallo vanno separati con - (es: "1-5;7;10" significa colonne da 1 a 5 più le colonne 7 e 10)
154        			------------- fine argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
155        			ListaXMLOut				OUT		NOCOPY CLOB,							-- Lista dei soggetti trovati (XML conforme a schema LISTA_STD.xsd)
156        																					-- Ogni soggetto è un tag Riga che può contenere le seguenti colonne:
157        																					-- 1:  Identificativo del soggetto
158        																					-- 2:  Denominazione primaria/cognome e nome
159        																					-- 3:  Codice fiscale
160        																					-- 4:  Partita IVA
161        																					-- 5:  Data di nascita/istituzione (nel formato dato dal parametro FMT_STD_DATA)
162        																					-- 6:  Data di cessazione (nel formato dato dal parametro FMT_STD_DATA)
163        																					-- 7:  Flag di persona fisica (1) o giuridica (0)
164        																					-- 8:  Cognome (se persona fisica)
165        																					-- 9:  Nome (se persona fisica)
166        																					-- 10: Sesso (se persona fisica)
167        																					-- 11: Titolo
168        																					-- 12: Descrizione del tipo o sottotipo di soggetto
169        																					-- 13: Condizione giuridica
170        																					-- 14: Causale di cessazione
171        																					-- 15: Comune di nascita/istituzione
172        																					-- 16: Stato di nascita/istituzione
173        																					-- 17: Stato di cittadinanza (se persona fisica)
174        																					-- 18: Flag di annullamento logico (valori 1/0)
175        																					-- 19: Altre denominazioni (parallele, secondarie ecc)
176        																					-- 20: Vecchie denominazioni
177        																					-- 21: Indirizzo di ultima residenza/sede/recapito
178        																					-- 22: Flag di soggetto con dati "certificati" (valori 1/0)
179        																					-- 23: Estremi di certificazione (chi e quando)
180        																					-- 24: Flag che indica che il soggetto è di "proprietà" dell'applicazione CodApplOwnerIO ed eventuale istanza CodIstApplOwnerIO
181        																					-- 25: Descrizione dell'applicazione (ed eventuale istanza) proprietaria del soggetto
182        																					-- 26: Cod. identificativo del soggetto nel sistema di provenienza (es: anagrafe residenti/ditte)
183        																					-- 27: Codice del soggetto nell'indice PA (se Pubblica Amministrazione)
184        																					-- 28: Timestamp di creazione del soggetto (nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
185        																					-- 29: Descrizione dell'utente di creazione del soggetto
186        																					-- 30: Timestamp di ultima modifica dei dati identificativi del soggetto (nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
187        																					-- 31: Descrizione dell'utente di ultima modifica dei dati identificativi del soggetto
188        																					-- 32: (valori 1/0) Indicatore di soggetto non modificabile da GUI
189        																					-- 33: (valori 1/0) Indicatore di soggetto attivo e non annullato
190        																					-- 34: Codice rapido del soggetto
191        																					-- 35: Cod. Amministrazione su IPA del soggetto o della PA cui il soggetto appartiene
192        																					-- 36: Cod. AOO su IPA del sogetto o dell'AOO cui il soggetto appartiene
193        																					-- 37: Data e ora ultima sincronizzazione soggetto da Indice PA (nel formato FMT_STD_TIMESTAMP)
194        																					-- 38: Denominazione breve / acronimo del soggetto
195        																					-- 39: Id. dell'eventuale soggetto di appartenenza
196        																					-- 40: Indirizzo/i e-mail del soggetto (di qualsiasi tipo)
197        																					-- 41: Indirizzo/i e-mail PEC del soggetto
198        																					-- 42: Indirizzo/i e-mail PEO (i.e. non indicati come PEC) del soggetto
199        																					-- 43: (valori PEC/PEO) Indica se il soggetto ha indirizzi e-mail PEC (=PEC) o solo di posta ordinaria (=PEO)
200        																					-- 44: Riferimenti telefonici
201        																					-- 45: Riferimenti FAX
202        																					-- 46: Cod. che indica il tipo di soggetto interno (interno rispetto al soggetto produttore cui appartiene/con cui coincide il dominio di lavoro). Valori possibili: UP=Unità di personale, AOOI=AOO dell'Amministrazione, UOI=U.O./ufficio interno
203        																					-- 47: Score del record restituito dall'indicizzatore (valori interi da 1 a 5) (valorizzato solo se effettuata ricerca full-text)
204        																					-- 48: ID_SP_AOO dell'eventuale AOO interna all'ente cui si è loggati (o cui appartiene l'AOO cui si è loggati) che corrisponde al soggetto della rubrica se di tipo AOOI
205        																					-- 49: ID_UO dell'eventuale UO (del dominio da cui si è loggati) che corrisponde al soggetto della rubrica se di tipo UOI
206        																					-- 50: ID_UTENTE dell'eventuale utente (accreditato nel dominio da cui si è loggati) che corrisponde al soggetto della rubrica se di tipo UP
207        																					-- 51: ID_SCRIVANIA dell'unica scrivania utente attualmente occupata dall'utente indicato in colonna precedente all'interno dell'AOO/Ente da cui si è loggati (se l'utente occupa più scrivanie la colonna è vuota)
208        																					-- 52: Denominazione breve / acronimo del soggetto e in assenza di questa la denominazione completa
209        																					-- 53: (valori 1/0) Indica se il soggetto è selezionabile per la finalità indicata in FinalitaIn
210        																					-- 54: (valori 1/0) Indice se il soggetto è presente (=1) o meno (=0) nell'organigramma del dominio cui si è loggati
211        																					-- 55: Codice che indica la categoria di soggetto: #APA, #IAMM, #AF, #AG, UO;UOI, UP, PA+
212        																					-- 56: Id. cliente se il soggetto in rubrica è un cliente (valorizzato solo se argomento FlgSoloClientiIn=1)
213        																					-- 57: Billing Account (BA) del cliente
214        																					-- 58: CID del cliente
215        																					-- 59: Cod. IPA in rubrica
216        																					-- 60: Gruppo di riferimento del cliente
217        																					-- 61: Dati di ultima residenza/sede/recapito separati da |*|
218        																					--	   Nell'ordine:
219        																					--	   Via/toponimo
220        																					--	   N. civico completo di appendice
221        																					--	   CAP
222        																					-- 	   Comune / Città
223        																					-- 	   Targa provincia
224        																					--	   Sigla stato
225        																					--	   Cod. via se in toponomastica
226        																					--	   Tipo toponimo
227        																					--	   Cod. ISTAT comune
228        																					-- 	   Cod. ISTAT stato
229        																					--	   Nome stato
230        																					--	   Civico solo parte numerica
231        																					--	   Appendice del civico
232        																					--	   Zona
233        																					--	   Località/frazione
234        																					--	   Complemento/dati aggiuntivi indirizzo
235        																					-- 62: Dati di pagamento del cliente separati da |*|
236        																					--		Nell'ordine
237        																					--		ISTITUTO_FINANZ_CLIENTE
238        																					--		BENEFICIARIO_CLIENTE
239        																					--		IBAN_CLIENTE
240        																					--		ABI_CLIENTE
241        																					--		CAB_CLIENTE
242        																					-- 63: non utilizzata
243        																					-- 64: Flag 1/0 che indica se l'id. fiscale della fatture è un codice fiscale (0) o una partita IVA (1)
244        																					-- 65: non utilizzata
245        																					-- 66: non utilizzata
246        																					-- 67: Esigibilita' Cliente (attributo custom ESIGIBILITA_IVA_CLIENTE)
247        																					-- 68: Segno importi NCD (attributo custom FLG_SEGNO_IMPORTI_CLIENTE)
248        																					-- 69: Comune/citta di ultima residenza/sede/recapito
249        																					-- 70: Id. destinatario documento se il soggetto in rubrica è un destinatario documento (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato)
250        																					-- 71: (valorizzato solo se FlgSoloDestDocIn =1 e se CIDestinatariSocietaIn NON è valorizzato) Società/divisioni aziendali cui è associato il destinatario (se più di uno separate da ;)
251        																					-- 72: (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato) Cod. cliente/i cui è associato il destinatario (se più di uno separati da ;)
252        																					--		Se CIDestinatariSocietaIn è valorizzato solo i clienti a cui è associato nella società indicata da CIDestinatariSocietaIn
253        																					-- 73: (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato) Denominazione del cliente/i cui è associato il destinatario (se più di uno separati da ;)
254        																					--		Se CIDestinatariSocietaIn è valorizzato solo i clienti a cui è associato nella società indicata da CIDestinatariSocietaIn
255        																					-- 74: (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato) Cod. fiscale/Partiva IVA del/i clienti cui è associato il destinatario (se più di uno separati da ;)
256        																					--		Se CIDestinatariSocietaIn è valorizzato solo i clienti a cui è associato nella società indicata da CIDestinatariSocietaIn
257        																					-- 75: (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato) Id. del cliente/i cui è associato il destinatario (se più di uno separati da ;)
258        																					--		Se CIDestinatariSocietaIn è valorizzato solo i clienti a cui è associato nella società indicata da CIDestinatariSocietaIn
259        																					-- 76: (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato) Canale/i di invio al destinatario (se più di uno separati da ;)
260        																					--		Se CIDestinatariSocietaIn è valorizzato solo il/i canali per il/i clienti della società indicata da CIDestinatariSocietaIn
261        																					-- 77: (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato) Metodo di registrazione del destinatario
262        																					-- 78: Denominazioni della/e società cui è associato il cliente
263        																					-- 79: (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato) Cod. committente del cliente/i cui è associato il destinatario (se più di uno separati da ;)
264        																					--		Se CIDestinatariSocietaIn è valorizzato solo i clienti a cui è associato nella società indicata da CIDestinatariSocietaIn
265        																					-- 80: (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato) Commerciale che segue il/i cliente/i cui è associato il destinatario (se più di uno separati da ;)
266        																					--		Se CIDestinatariSocietaIn è valorizzato solo i clienti a cui è associato nella società indicata da CIDestinatariSocietaIn
267        																					-- 81: (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato) Agente che segue il/i cliente/i cui è associato il destinatario (se più di uno separati da ;)
268        																					--		Se CIDestinatariSocietaIn è valorizzato solo i clienti a cui è associato nella società indicata da CIDestinatariSocietaIn
269        																					-- 82: Denominazione della UO nella cui rubrica è definito il soggetto rappresentato dal record
270        																					-- 83: Flag 1/0. Se 1 indica che il soggetto rappresentato dal record è visibile da tutte le sotto-UO di quella indicata in colonna 82
271        																					-- 84: Flag 1/0. Se 1 indica che il soggetto rappresentato dal record è visibile da tutte le sotto-UO di quella indicata in colonna 82
272        																					-- 85: Username dell'eventuale utente (accreditato nel dominio da cui si è loggati) che corrisponde al soggetto della rubrica se di tipo UP
273        																					-- ATTENZIONE: Se FlgIndexerOverflowIn è pari a 1, qualora la stored non vada a sua volta in overflow, dato che il resultset trovato dalla stored dovrà essere ripassato al searcher di Lucene esso non è paginato indipendentemente dal fatto che l'apposito input lo richieda.
274        																					--		   	   Inoltre nel caso di FlgIndexerOverflowIn pari a 1 dato che dopo il nuovo passaggio per il searcher di Lucene si renderà necessaria una nuova chiamata alla stored solo la prima colonna del clob è valorizzata
275        			FlgAbilInsOut	 		OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se 1 si ha abilitazione a inserimento di soggetti
276        			FlgMostraAltriAttrOut	OUT			PLS_INTEGER,						-- (valori 1/0) Se 1 nella GUI vanno mostrati gli attributi addizionali per un nuovo soggetto (ce ne sono di visibile all'utente), se 0 no
277        			ErrContextOut			OUT			VARCHAR2,							-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
278        			ErrCodeOut				OUT			PLS_INTEGER,						-- N.ro errore di uscita
279        			ErrMsgOut				OUT 		VARCHAR2,							-- Messaggio d'errore
280        			FinalitaIn				IN			VARCHAR2 DEFAULT NULL,				-- Indica la finalità per cui si richiama la rubrica
281        																					-- SEL_SOGG_INT: selezione di soggetti interni all'AOO
282        																					-- SEL_SOGG_EST: selezione di soggetti esterni all'AOO
283        																					-- SEL_UOI: selezione di UO/uffici interniall'AOO
284        																					-- SEL_UP: selezione di unità di personale
285        																					-- SEL_PF: selezione di persone fisiche esterne
286        			CodIstatComuneIndIn		IN			VARCHAR2 DEFAULT NULL,				-- Codice ISTAT del comune di residenza/recapito/sede
287        			DesCittaIndIn			IN			VARCHAR2 DEFAULT NULL,				-- Stringa contenuta nel nome del comune/città di residenza/recapito/sede (ricerca case insensitive in like senza forzare il % finale)
288        			RestringiARubricaDiUOIn	IN			CLOB DEFAULT NULL,					-- UO alla/e cui porzioni di rubrica restringere la ricerca. Lista xml conforme a schema ListaSdt.xsd
289        																					--					ogni riga è una UO
290        																					--					in colonna 2) ID_UO; 3) flag 1/0 che indica anche le sotto-UO
291        			FiltriAvanzatiIn		IN			CLOB DEFAULT NULL,					-- XML conforme a schema SezioneCache.xsd con ulteriori filtri
292        																					-- CITiponimo: codice via/toponimo nel viario
293        																					-- DesToponimo: parole contenute nella via/toponimo dell'indirizzo (ricerca per parole fatta con indici context)
294        																					-- OperDesToponimo(considerato solo se filtro precedente valorizzato) Indica l'operatore di ricerca sul filtro precedente (se diverso da contiene); valori: inizia, uguale, finisce, contiene, like
295        																					-- @CodTipiIndirizzi: codici dei tipi di indirizzi su cui ricercare (lista con una solo colonna)
296        			CodIndPAIn				IN			VARCHAR2 DEFAULT NULL,				-- filtro di ricerca: codice del soggetto sull'Indice PA. Ricerca case insensitive in like
297        			RigaTagNameIn			IN			VARCHAR2 DEFAULT NULL,				-- (opzionale) Come rinominare il tag Riga dell'XML ListaXMLOut di output
298        			ColTagNameIn			IN			DMVA_STRING DEFAULT NULL,			-- (opzionale) Come rinominare i tag delle colonne in alternativa a Colonna Nro=.. nell'XML ListaXMLOut di output
299        			IdSoggRubricaToForceIn	IN			DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE DEFAULT NULL,
300        																					-- Id. di un soggetto della rubrica da mettere comunque nel result set restituito anche se non matcha tutti i filtri di ricerca
301        			DenominazioneBreveIn	IN			VARCHAR2 DEFAULT NULL,				-- filtro di ricerca: stringa contenuta nella denominazione breve/acronimo, o in sua assenza nella denominazione completa, del soggetto (ricerca case-insensitive in like senza forzare il % finale)
302        			FlgSoloClientiIn		IN			PLS_INTEGER DEFAULT NULL,			-- Se 1 la ricerca viene ristretta ai soggetti della rubrica che sono dei clienti (inseriti in DMT_CLIENTI)
303        			FlgSoloDestDocIn		IN			PLS_INTEGER DEFAULT NULL,			-- Se 1 la ricerca viene ristretta ai soggetti della rubrica che sono dei destinatari di documenti (inseriti in DMT_DESTINATARI_DOC)
304        			CIDestinatariSocietaIn	IN			VARCHAR2 DEFAULT NULL,				-- Cod. identificativo della società cui devono essere associati i soggetti - destinatari di documenti inseriti in DMT_DESTINATARI_DOC - da estarre
305        			DataInsDaIn				IN			VARCHAR2 DEFAULT NULL,				-- Filtro: estremo inferiore intervallo di ricerca su data creazione (nel formato dato dal parametro FMT_STD_DATA)
306        			DataInsAIn				IN			VARCHAR2 DEFAULT NULL,				-- Filtro: estremo superiore intervallo di ricerca su data creazione (nel formato dato dal parametro FMT_STD_DATA)
307        			DataUltModDaIn			IN			VARCHAR2 DEFAULT NULL,				-- Filtro: estremo inferiore intervallo di ricerca su data ultima modifica (nel formato dato dal parametro FMT_STD_DATA)
308        			DataUltModAIn		    IN			VARCHAR2 DEFAULT NULL,				-- Filtro: estremo superiore intervallo di ricerca su data ultima modifica (nel formato dato dal parametro FMT_STD_DATA)
309        			ListaCommercialiDestIn	IN			VARCHAR2 DEFAULT NULL,				-- (vale solo per soggetti che sono destinatari di doc.) Filtro: Id. user del/dei commerciali che devono avere i destinatari di doc. da estrarre (se più di uno separati da ; o ,)
310        			ListaAgentiDestIn		IN			VARCHAR2 DEFAULT NULL,				-- (vale solo per soggetti che sono destinatari di doc.) Filtro: Id. user del/degli agenti che devono avere i destinatari di doc. da estrarre (se più di uno separati da ; o ,)
311        			CanaliInvioDocIn		IN			VARCHAR2 DEFAULT NULL,				-- (vale solo per soggetti che sono destinatari di doc.) Filtro: Canale/i invio documenti che devono avere i destinatari di doc. da estrarre (se più di uno separati da ; o ,)
312        			CanaliInvDocToExcludeIn	IN			VARCHAR2 DEFAULT NULL				-- (vale solo per soggetti che sono destinatari di doc.) Filtro: Canale/i invio documenti che non devono avere i destinatari di doc. da estrarre (se più di uno separati da ; o ,)
313        			)return PLS_INTEGER;													-- Vale 1 se tutto è andato a buon fine, altrimenti 0
314        
315        	/**** Funzione per ricercare i clienti ****/
316        	FUNCTION TrovaClienti(
317        			CodIdConnectionTokenIn	IN	    DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
318        																					-- (obblig). Codice identificativo del token di connessione
319        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
320        			MatchByIndexerIn		IN		CLOB DEFAULT NULL,						-- Lista dei soggetti che sono stati trovati dal searcher di Lucene (XML conforme a schema LISTA_STD.xsd)
321        																					-- Ogni oggetto di Lucene trovato è un tag Riga che contiene le seguenti colonne:
322        																					-- 1: identificativo del soggetto
323        																					-- 2: non utilizzata
324        																					-- 3: flag 1/0 che indica se il match dell'oggetto richiede attributi "protetti", ovvero che possono contenere dati riservati
325        																					-- 4: score restituito da Lucene
326        			FlgIndexerOverflowIn	IN		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se 1 significa che il searcher di Lucene ha trovato un numero di oggetti superiore ad un limite massimo consentito.
327        																					-- Nel caso il flag valga 1 l’argomento precedente può essere vuoto o se non lo è il suo contenuto viene comunque ignorato
328        			Flg2ndCallIn			IN		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se 1 indica che si tratta della seconda chiamata alla stored che viene fatta a seguito di una ricerca sottomessa.
329        																					-- Può essere 1 solo se MatchByIndexerIn contiene degli oggetti.
330        																					-- E' un flag che serve per velocizzare la ricerca: infatti quando è 1 i filtri vengono ignorati in quanto si considera che il set restituito dall'indicizzatore sia già fatto di oggetti soddisfacenti tutti i filtri; la chiamata alla stored serve solo per verificare l'accesso agli oggetti restituiti dall'indicizzatore, ordinare ed eventualmente paginare il risultato e calcolare tutti i dati degli oggetti da restituire.
331        			--------------- inizio filtri di ricerca-------------------
332        			DenominazioneIO			IN OUT	DMT_RUBRICA_SOGGETTI.DENOMINAZIONE%TYPE,-- 1° filtro di ricerca: stringa contenuta nella denominazione/cognome e nome del soggetto (ricerca case insensitive in like senza forzare il % finale)
333        			FlgInclAltreDenomIO		IN OUT	PLS_INTEGER, 							-- (valori 1/0/NULL) Se 1 la ricerca per il 1° filtro si estende alle denominazioni/intestazioni non primarie (pseudonimi, altre denom. ecc)
334        			FlgInclDenomStoricheIO	IN OUT	PLS_INTEGER, 							-- (valori 1/0/NULL) Se 1 la ricerca per il 1° filtro si estende alle denominazioni/intestazioni passate
335        			CFIO					IN OUT	DMT_RUBRICA_SOGGETTI.CF%TYPE,			-- 2° filtro di ricerca: stringa contenuta nel codice fiscale del soggetto (ricerca case-insensitive in like senza forzare il % finale)
336          			PIVAIO					IN OUT	DMT_RUBRICA_SOGGETTI.PIVA%TYPE,			-- 3° filtro di ricerca: stringa contenuta nella partita IVA del soggetto (ricerca case-insensitive in like senza forzare il % finale)
337        			FlgFisicaGiuridicaIn	IN			VARCHAR2 DEFAULT NULL,				-- (valori F/G) filtro per restringere la ricerca alle sole persone fisiche o giuridiche
338        			FlgNotCodTipiSottoTipiIn IN			PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) è legato al filtro ListaCodTipiSottoTipiIO: se 1 la condizione sui tipi specificati è NOT IN
339        			ListaCodTipiSottoTipiIO	IN OUT	VARCHAR2,								-- 4° filtro di ricerca: Lista di codice di tipi e/o sottotipi dei soggetti da ricercare (se più di uno sono separati con ";")
340        																					-- se FlgNotCodTipiSottoTipiIn=1 sono i tipi e/o sottotipi che NON devono avere i soggetti
341        			eMailIO					IN OUT	VARCHAR2,								-- 13° filtro di ricerca: stringa contenuta in un indirizzo e-mail del soggetto (ricerca case-insensitive in like senza forzare % finale)
342        			CodRapidoIO				IN OUT	DMT_RUBRICA_SOGGETTI.COD_RAPIDO%TYPE,
343        																					-- 6° filtro di ricerca: Codice rapido del soggetto o sua parte iniziale (ricerca case-sensitive in like senza forzare il % finale)
344        			CIProvSoggIO			IN OUT	DMT_RUBRICA_SOGGETTI.PROV_CI_SOGG%TYPE,	-- 7° filtro di ricerca: Codice identificativo del soggetto nel sistema di provenienza (ad esempio l'anagrafe residenti/ditte): ricerca case-sensitive in like senza forzare il % finale
345        																					-- se il soggetto corrisponde ad una soggetto produttore, AOO, UO o utente del sistema il CI_PROV è ID_SP_AOO o ID_UO o ID_USER preceduto dal prefisso [SPAOO], [UO], [USER]
346        			FlgSoloVldIO 			IN OUT 	PLS_INTEGER, 							-- (valori 1/0/NULL) 8° filtro di ricerca: Se 1 indica se si devono estrarre solo le posizioni anagrafiche attive alla data odierna
347        			TsVldIO					IN OUT	VARCHAR2,								-- 9° filtro di ricerca: Stinga con il timestamp (nel formato GG/MM/AAAA HH24:MI:SS) a cui devono essere attive le posizioni anagrafiche (se non specificato si intendono la data e ora correnti)
348        			CodApplOwnerIO			IN OUT	VARCHAR2,								-- 10° filtro di ricerca: Codice dell'applicazione "proprietaria" dei soggetti. Se valorizzata pari a #BY_CONN_TKN e si è connessi da un'applicazione esterna si ricercano solo soggetti di cui è proprietaria quell'applicazione
349        			CodIstApplOwnerIO		IN OUT	VARCHAR2,								-- 11° filtro di ricerca: Codice dell'istanza di applicazione "proprietaria" dei soggetti. Se valorizzata pari a #BY_CONN_TKN e si è connessi da un'applicazione esterna si ricercano solo soggetti di cui è proprietaria l'istanza di applicazione esterna da cui si è connessi
350        			FlgRestrApplOwnerIO		IN OUT	PLS_INTEGER,							-- (valori 1/0/NULL) Se 1 vengono estratti solo soggetti di cui è proprietaria l'applicazione proprietaria (ed eventuale istanza) specificata in CodApplOwnerIn; se 0 o NULL e se CodApplOwnerIn è valorizzata vengono estratti solo i soggetti senza applicazione proprietaria o con applicazione proprietria pari a quella specificata
351        			FlgCertificatiIO		IN OUT	PLS_INTEGER,							-- (valori 1/0/NULL) 12° filtro di ricerca: se 1 vengono estratti solo i soggetti i cui dati sono "certificati", se 0 solo quelli con dati non sono certificati
352        			FlgInclAnnullatiIO		IN OUT	PLS_INTEGER,							-- (valori 1/0/NULL) 13° filtro di ricerca: se 1 vengono estratti anche i soggetti logicamente annullati, altrimenti no
353        			IdSoggRubricaIO			IN OUT	DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,
354        																					-- 12° filtro di ricerca: Identificativo del soggetto da ricercare
355        			FlgInIndicePAIO			IN OUT	PLS_INTEGER,							-- 13° (valori 1/0/NULL) Se 1 la ricerca viene ristretta ai soggetti - enti, AOO e UO - censiti all'Indice PA
356        			CodAmmIPAIO				IN OUT	VARCHAR2,								-- 14°: codice dell'Amministrazione di appartenenza (o con cui coindice il soggetto) sull'Indice PA. Ricerca case insensitive in like
357        			CodAOOIPAIO				IN OUT	VARCHAR2,								-- 15°: codice dell'AOO di appartenenza (o con cui coindice il soggetto) sull'Indice PA. Ricerca case insensitive in like
358        			IsSoggRubricaAppIO		IN OUT 	DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,
359        																					-- 16°: id. del soggetto della rubrica cui devono appartenere i soggetti da ricercare
360        			IdGruppoAppIO			IN OUT	DMT_GRUPPI_SOGG_EST.ID_GRUPPO%type,		-- 17° filtro di ricerca: id. di un gruppo di soggetti cui devono apppartenere i soggetti da ricercare
361        			NomeGruppoAppIO			IN OUT	VARCHAR2,								-- 18° filtro di ricerca: nome di un gruppo di soggetti cui devono apppartenere i soggetti da ricercare (ricerca esatta case-insensitive: da nome si deve individuare univocamente un gruppo)
362        			StrInDenominazioneIn	IN 			DMT_RUBRICA_SOGGETTI.DENOMINAZIONE%TYPE DEFAULT NULL, -- 19° filtro di ricerca: stringa contenuta nella denominazione/cognome e nome del soggetto (ricerca di tipo contains)
363        			CriteriPersonalizzatiIO	IN OUT 	NOCOPY CLOB,							-- Altri criteri di ricerca sugli attributi addizionali (XML conforme a schema LISTA_STD.xsd). Se più di uno vengono applicati in AND.
364        																					-- Ogni criterio è un tag Riga che può contenere le seguenti colonne:
365        																					--	1) Nome (ATTR_NAME) dell'attributo cui è relativo il criterio
366        																					--	2) (obblig.) Operatore logico. Valori possibili:
367        																					--		"uguale" (ricerca esatta)
368        																					--		"simile a (case-sensitive)" (ricerca case-sensitive in like)
369        																					--		"simile a (case-insensitive)" (ricerca case-insensitive in like e che ignora i caratteri quali spazi, ., ecc)
370        																					--		"maggiore" (se attributo numerico o data)
371        																					--		"maggiore o uguale" (se attributo numerico o data)
372        																					--		"minore" (se attributo numerico o data)
373        																					--		"minore o uguale" (se attributo numerico o data)
374        																					--		"tra" (se attributo numerico o data)
375        																					--		"non valorizzato"
376        																					--		"valorizzato"
377        																					--		"spuntato" (se attributo di tipo casella di spunta)
378        																					--		"non spuntato" (se attributo di tipo casella di spunta)
379        																					--	3) 1° valore di confronto (obblig. e gestito solo se l'operatore non ha uno dei seguenti valori: valorizzato, non valorizzato, spuntato, non spuntato) (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
380        																					--	4) 2° valore di confronto (obblig. e gestito solo se l'operatore è "tra") (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
381        																					--	5) Label dell''attributo cui è relativo il criterio (se sotto-attributo di complesso <label del complesso> - <label del sotto-attributo>
382        			------------- inizio argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
383        			ColOrderByIO			IN OUT	VARCHAR2,								-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso (si può ordinare solo per le colonne da 1 a 6 + 47 + 52). Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
384        																					-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
385        																					-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
386        			FlgDescOrderByIO  		IN OUT	VARCHAR2,								-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
387        																					-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.
388        			FlgSenzaPaginazioneIn 		IN 		PLS_INTEGER DEFAULT NULL,            -- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
389        			NroPaginaIO      			IN OUT	PLS_INTEGER,                  		-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
390           			BachSizeIO				IN OUT	PLS_INTEGER,							-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)
391        																					-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro
392        			OverFlowLimitIn			IN		PLS_INTEGER DEFAULT NULL,				-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow
393        			FlgSenzaTotIn			IN		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
394        			NroTotRecOut			OUT		PLS_INTEGER,							-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina)
395             		NroRecInPaginaOut 		OUT   	PLS_INTEGER,                     		-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
396        			FlgBatchSearchIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che la stored è utilizzata da un processo batch, altrimenti da un processo online.
397        																					-- Serve affinchè in caso l'input OverFlowLimitIn non sia valorizzato vengano applicati i limiti di overflow per processo batch o online che sono parametri di configurazione del sistema.
398        			ColToReturnIn			IN		VARCHAR2 DEFAULT NULL,					-- Stringa con i n.ri delle colonne dell'XML di output ListaXMLOut che si vuole siano presenti.
399        																					-- Se la stringa è vuota saranno presenti tutte le colonne.
400        																					-- La colonna 1 sarà presente comunque.
401        																					-- I n.ri delle varie colonne vanno separati con , o ; e se si vuole indicare un intervallo di colonne gli estremi dell'intervallo vanno separati con - (es: "1-5;7;10" significa colonne da 1 a 5 più le colonne 7 e 10)
402        			------------- fine argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
403        			ListaXMLOut				OUT		NOCOPY CLOB,							-- Lista dei soggetti trovati (XML conforme a schema LISTA_STD.xsd)
404        																					-- Ogni soggetto è un tag Riga che può contenere le seguenti colonne:
405        																					-- 1:  Identificativo del soggetto
406        																					-- 2:  Denominazione primaria/cognome e nome
407        																					-- 3:  Codice fiscale
408        																					-- 4:  Partita IVA
409        																					-- 5:  Data di nascita/istituzione (nel formato dato dal parametro FMT_STD_DATA)
410        																					-- 6:  Data di cessazione (nel formato dato dal parametro FMT_STD_DATA)
411        																					-- 7:  Flag di persona fisica (1) o giuridica (0)
412        																					-- 8:  Cognome (se persona fisica)
413        																					-- 9:  Nome (se persona fisica)
414        																					-- 10: Sesso (se persona fisica)
415        																					-- 11: Titolo
416        																					-- 12: Descrizione del tipo o sottotipo di soggetto
417        																					-- 13: Condizione giuridica
418        																					-- 14: Causale di cessazione
419        																					-- 15: Comune di nascita/istituzione
420        																					-- 16: Stato di nascita/istituzione
421        																					-- 17: Stato di cittadinanza (se persona fisica)
422        																					-- 18: Flag di annullamento logico (valori 1/0)
423        																					-- 19: Altre denominazioni (parallele, secondarie ecc)
424        																					-- 20: Vecchie denominazioni
425        																					-- 21: Indirizzo di ultima residenza/sede/recapito
426        																					-- 22: Flag di soggetto con dati "certificati" (valori 1/0)
427        																					-- 23: Estremi di certificazione (chi e quando)
428        																					-- 24: Flag che indica che il soggetto è di "proprietà" dell'applicazione CodApplOwnerIO ed eventuale istanza CodIstApplOwnerIO
429        																					-- 25: Descrizione dell'applicazione (ed eventuale istanza) proprietaria del soggetto
430        																					-- 26: Cod. identificativo del soggetto nel sistema di provenienza (es: anagrafe residenti/ditte)
431        																					-- 27: Codice del soggetto nell'indice PA (se Pubblica Amministrazione)
432        																					-- 28: Timestamp di creazione del soggetto (nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
433        																					-- 29: Descrizione dell'utente di creazione del soggetto
434        																					-- 30: Timestamp di ultima modifica dei dati identificativi del soggetto (nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
435        																					-- 31: Descrizione dell'utente di ultima modifica dei dati identificativi del soggetto
436        																					-- 32: (valori 1/0) Indicatore di soggetto non modificabile da GUI
437        																					-- 33: (valori 1/0) Indicatore di soggetto attivo e non annullato
438        																					-- 34: Codice rapido del soggetto
439        																					-- 35: Cod. Amministrazione su IPA del soggetto o della PA cui il soggetto appartiene
440        																					-- 36: Cod. AOO su IPA del sogetto o dell'AOO cui il soggetto appartiene
441        																					-- 37: Data e ora ultima sincronizzazione soggetto da Indice PA (nel formato FMT_STD_TIMESTAMP)
442        																					-- 38: Denominazione breve / acronimo del soggetto
443        																					-- 39: Id. dell'eventuale soggetto di appartenenza
444        																					-- 40: Indirizzo/i e-mail del soggetto (di qualsiasi tipo)
445        																					-- 41: Indirizzo/i e-mail PEC del soggetto
446        																					-- 42: Indirizzo/i e-mail PEO (i.e. non indicati come PEC) del soggetto
447        																					-- 43: (valori PEC/PEO) Indica se il soggetto ha indirizzi e-mail PEC (=PEC) o solo di posta ordinaria (=PEO)
448        																					-- 44: Riferimenti telefonici
449        																					-- 45: Riferimenti FAX
450        																					-- 46: Cod. che indica il tipo di soggetto interno (interno rispetto al soggetto produttore cui appartiene/con cui coincide il dominio di lavoro). Valori possibili: UP=Unità di personale, AOOI=AOO dell'Amministrazione, UOI=U.O./ufficio interno
451        																					-- 47: Score del record restituito dall'indicizzatore (valori interi da 1 a 5) (valorizzato solo se effettuata ricerca full-text)
452        																					-- 48: ID_SP_AOO dell'eventuale AOO interna all'ente cui si è loggati (o cui appartiene l'AOO cui si è loggati) che corrisponde al soggetto della rubrica se di tipo AOOI
453        																					-- 49: ID_UO dell'eventuale UO (del dominio da cui si è loggati) che corrisponde al soggetto della rubrica se di tipo UOI
454        																					-- 50: ID_UTENTE dell'eventuale utente (accreditato nel dominio da cui si è loggati) che corrisponde al soggetto della rubrica se di tipo UP
455        																					-- 51: ID_SCRIVANIA dell'unica scrivania utente attualmente occupata dall'utente indicato in colonna precedente all'interno dell'AOO/Ente da cui si è loggati (se l'utente occupa più scrivanie la colonna è vuota)
456        																					-- 52: Denominazione breve / acronimo del soggetto e in assenza di questa la denominazione completa
457        																					-- 53: (valori 1/0) Indica se il soggetto è selezionabile per la finalità indicata in FinalitaIn
458        																					-- 54: (valori 1/0) Indice se il soggetto è presente (=1) o meno (=0) nell'organigramma del dominio cui si è loggati
459        																					-- 55: Codice che indica la categoria di soggetto: #APA, #IAMM, #AF, #AG, UO;UOI, UP, PA+
460        																					-- 56: Id. cliente se il soggetto in rubrica è un cliente (valorizzato solo se argomento FlgSoloClientiIn=1)
461        																					-- 57: Billing Account (BA) del cliente
462        																					-- 58: CID del cliente
463        																					-- 59: Cod. IPA in rubrica
464        																					-- 60: Gruppo di riferimento del cliente
465        																					-- 61: Dati di ultima residenza/sede/recapito separati da |*|
466        																					--	   Nell'ordine:
467        																					--	   indirizzo
468        																					--	   N. civico
469        																					--	   CAP
470        																					-- 	   Comune
471        																					-- 	   Targa provincia
472        																					--	   Sigla stato
473        																					-- 62: Dati di pagamento del cliente separati da |*|
474        																					--		Nell'ordine
475        																					--		ISTITUTO_FINANZ_CLIENTE
476        																					--		BENEFICIARIO_CLIENTE
477        																					--		IBAN_CLIENTE
478        																					--		ABI_CLIENTE
479        																					--		CAB_CLIENTE
480        																					-- 63: non utilizzata
481        																					-- 64: Flag 1/0 che indica se l'id. fiscale della fatture è un codice fiscale (0) o una partita IVA (1)
482        																					-- 65: non utilizzata
483        																					-- 66: non utilizzata
484                                                                                            -- 67: Esigibilita' Cliente (attributo custom ESIGIBILITA_IVA_CLIENTE)
485                                                                                            -- 68: Segno importi NCD (attributo custom FLG_SEGNO_IMPORTI_CLIENTE)
486        																					-- 69: Comune/citta di ultima residenza/sede/recapito
487        																					-- 78: Denominazioni della/e società cui è associato il cliente
488        																					-- ATTENZIONE: Se FlgIndexerOverflowIn è pari a 1, qualora la stored non vada a sua volta in overflow, dato che il resultset trovato dalla stored dovrà essere ripassato al searcher di Lucene esso non è paginato indipendentemente dal fatto che l¿apposito input lo richieda.
489        																					--		   	   Inoltre nel caso di FlgIndexerOverflowIn pari a 1 dato che dopo il nuovo passaggio per il searcher di Lucene si renderà necessaria una nuova chiamata alla stored solo la prima colonna del clob è valorizzate
490        			FlgAbilInsOut	 		OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se 1 si ha abilitazione a inserimento di soggetti
491        			FlgMostraAltriAttrOut	OUT			PLS_INTEGER,						-- (valori 1/0) Se 1 nella GUI vanno mostrati gli attributi addizionali per un nuovo soggetto (ce ne sono di visibile all'utente), se 0 no
492        			ErrContextOut			OUT			VARCHAR2,							-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
493        			ErrCodeOut				OUT			PLS_INTEGER,						-- N.ro errore di uscita
494        			ErrMsgOut				OUT 		VARCHAR2,							-- Messaggio d'errore
495        			FinalitaIn				IN			VARCHAR2 DEFAULT NULL,				-- Indica la finalità per cui si richiama la rubrica
496        																					-- SEL_SOGG_INT: selezione di soggetti interni all'AOO
497        																					-- SEL_SOGG_EST: selezione di soggetti esterni all'AOO
498        																					-- SEL_UOI: selezione di UO/uffici interniall'AOO
499        			RigaTagNameIn			IN			VARCHAR2 DEFAULT NULL,				-- (opzionale) Come rinominare il tag Riga dell'XML ListaXMLOut di output
500        			ColTagNameIn			IN			DMVA_STRING DEFAULT NULL,			-- (opzionale) Come rinominare i tag delle colonne in alternativa a Colonna Nro=.. nell'XML ListaXMLOut di output
501        			IdSoggRubricaToForceIn	IN			DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE DEFAULT NULL,
502        																					-- Id. di un soggetto della rubrica da mettere comunque nel result set restituito anche se non matcha tutti i filtri di ricerca
503        			DenominazioneBreveIn	IN			VARCHAR2 DEFAULT NULL,				-- filtro di ricerca: stringa contenuta nella denominazione breve/acronimo, o in sua assenza nella denominazione completa, del soggetto (ricerca case-insensitive in like senza forzare il % finale)
504        			CodIstatComuneIndIn		IN			VARCHAR2 DEFAULT NULL,				-- Codice ISTAT del comune di residenza/recapito/sede
505        			DesCittaIndIn			IN			VARCHAR2 DEFAULT NULL				-- Stringa contenuta nel nome del comune/città di residenza/recapito/sede (ricerca case insensitive in like senza forzare il % finale)
506        			)return PLS_INTEGER;													-- Vale 1 se tutto è andato a buon fine, altrimenti 0
507        
508        	/**** Funzione per ricercare destinatari documenti censiti in DMT_DESTINATARI_DOC ****/
509        	FUNCTION TrovaDestinatariDoc(
510        			CodIdConnectionTokenIn	IN	    DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
511        																					-- (obblig). Codice identificativo del token di connessione
512        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
513        			MatchByIndexerIn		IN		CLOB DEFAULT NULL,						-- Lista dei soggetti che sono stati trovati dal searcher di Lucene (XML conforme a schema LISTA_STD.xsd)
514        																					-- Ogni oggetto di Lucene trovato è un tag Riga che contiene le seguenti colonne:
515        																					-- 1: identificativo del soggetto
516        																					-- 2: non utilizzata
517        																					-- 3: flag 1/0 che indica se il match dell'oggetto richiede attributi "protetti", ovvero che possono contenere dati riservati
518        																					-- 4: score restituito da Lucene
519        			FlgIndexerOverflowIn	IN		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se 1 significa che il searcher di Lucene ha trovato un numero di oggetti superiore ad un limite massimo consentito.
520        																					-- Nel caso il flag valga 1 l’argomento precedente può essere vuoto o se non lo è il suo contenuto viene comunque ignorato
521        			Flg2ndCallIn			IN		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se 1 indica che si tratta della seconda chiamata alla stored che viene fatta a seguito di una ricerca sottomessa.
522        																					-- Può essere 1 solo se MatchByIndexerIn contiene degli oggetti.
523        																					-- E' un flag che serve per velocizzare la ricerca: infatti quando è 1 i filtri vengono ignorati in quanto si considera che il set restituito dall'indicizzatore sia già fatto di oggetti soddisfacenti tutti i filtri; la chiamata alla stored serve solo per verificare l'accesso agli oggetti restituiti dall'indicizzatore, ordinare ed eventualmente paginare il risultato e calcolare tutti i dati degli oggetti da restituire.
524        			--------------- inizio filtri di ricerca-------------------
525        			DenominazioneIO			IN OUT	DMT_RUBRICA_SOGGETTI.DENOMINAZIONE%TYPE,-- 1° filtro di ricerca: stringa contenuta nella denominazione/cognome e nome del soggetto (ricerca case insensitive in like senza forzare il % finale)
526        			FlgInclAltreDenomIO		IN OUT	PLS_INTEGER, 							-- (valori 1/0/NULL) Se 1 la ricerca per il 1° filtro si estende alle denominazioni/intestazioni non primarie (pseudonimi, altre denom. ecc)
527        			FlgInclDenomStoricheIO	IN OUT	PLS_INTEGER, 							-- (valori 1/0/NULL) Se 1 la ricerca per il 1° filtro si estende alle denominazioni/intestazioni passate
528        			CFIO					IN OUT	DMT_RUBRICA_SOGGETTI.CF%TYPE,			-- 2° filtro di ricerca: stringa contenuta nel codice fiscale del soggetto (ricerca case-insensitive in like senza forzare il % finale)
529          			PIVAIO					IN OUT	DMT_RUBRICA_SOGGETTI.PIVA%TYPE,			-- 3° filtro di ricerca: stringa contenuta nella partita IVA del soggetto (ricerca case-insensitive in like senza forzare il % finale)
530        			FlgFisicaGiuridicaIn	IN			VARCHAR2 DEFAULT NULL,				-- (valori F/G) filtro per restringere la ricerca alle sole persone fisiche o giuridiche
531        			FlgNotCodTipiSottoTipiIn IN			PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) è legato al filtro ListaCodTipiSottoTipiIO: se 1 la condizione sui tipi specificati è NOT IN
532        			ListaCodTipiSottoTipiIO	IN OUT	VARCHAR2,								-- 4° filtro di ricerca: Lista di codice di tipi e/o sottotipi dei soggetti da ricercare (se più di uno sono separati con ";")
533        																					-- se FlgNotCodTipiSottoTipiIn=1 sono i tipi e/o sottotipi che NON devono avere i soggetti
534        			eMailIO					IN OUT	VARCHAR2,								-- 13° filtro di ricerca: stringa contenuta in un indirizzo e-mail del soggetto (ricerca case-insensitive in like senza forzare % finale)
535        			CodRapidoIO				IN OUT	DMT_RUBRICA_SOGGETTI.COD_RAPIDO%TYPE,
536        																					-- 6° filtro di ricerca: Codice rapido del soggetto o sua parte iniziale (ricerca case-sensitive in like senza forzare il % finale)
537        			CIProvSoggIO			IN OUT	DMT_RUBRICA_SOGGETTI.PROV_CI_SOGG%TYPE,	-- 7° filtro di ricerca: Codice identificativo del soggetto nel sistema di provenienza (ad esempio l'anagrafe residenti/ditte): ricerca case-sensitive in like senza forzare il % finale
538        																					-- se il soggetto corrisponde ad una soggetto produttore, AOO, UO o utente del sistema il CI_PROV è ID_SP_AOO o ID_UO o ID_USER preceduto dal prefisso [SPAOO], [UO], [USER]
539        			FlgSoloVldIO 			IN OUT 	PLS_INTEGER, 							-- (valori 1/0/NULL) 8° filtro di ricerca: Se 1 indica se si devono estrarre solo le posizioni anagrafiche attive alla data odierna
540        			TsVldIO					IN OUT	VARCHAR2,								-- 9° filtro di ricerca: Stinga con il timestamp (nel formato GG/MM/AAAA HH24:MI:SS) a cui devono essere attive le posizioni anagrafiche (se non specificato si intendono la data e ora correnti)
541        			CodApplOwnerIO			IN OUT	VARCHAR2,								-- 10° filtro di ricerca: Codice dell'applicazione "proprietaria" dei soggetti. Se valorizzata pari a #BY_CONN_TKN e si è connessi da un'applicazione esterna si ricercano solo soggetti di cui è proprietaria quell'applicazione
542        			CodIstApplOwnerIO		IN OUT	VARCHAR2,								-- 11° filtro di ricerca: Codice dell'istanza di applicazione "proprietaria" dei soggetti. Se valorizzata pari a #BY_CONN_TKN e si è connessi da un'applicazione esterna si ricercano solo soggetti di cui è proprietaria l'istanza di applicazione esterna da cui si è connessi
543        			FlgRestrApplOwnerIO		IN OUT	PLS_INTEGER,							-- (valori 1/0/NULL) Se 1 vengono estratti solo soggetti di cui è proprietaria l'applicazione proprietaria (ed eventuale istanza) specificata in CodApplOwnerIn; se 0 o NULL e se CodApplOwnerIn è valorizzata vengono estratti solo i soggetti senza applicazione proprietaria o con applicazione proprietria pari a quella specificata
544        			FlgCertificatiIO		IN OUT	PLS_INTEGER,							-- (valori 1/0/NULL) 12° filtro di ricerca: se 1 vengono estratti solo i soggetti i cui dati sono "certificati", se 0 solo quelli con dati non sono certificati
545        			FlgInclAnnullatiIO		IN OUT	PLS_INTEGER,							-- (valori 1/0/NULL) 13° filtro di ricerca: se 1 vengono estratti anche i soggetti logicamente annullati, altrimenti no
546        			IdSoggRubricaIO			IN OUT	DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,
547        																					-- 12° filtro di ricerca: Identificativo del soggetto da ricercare
548        			FlgInIndicePAIO			IN OUT	PLS_INTEGER,							-- 13° (valori 1/0/NULL) Se 1 la ricerca viene ristretta ai soggetti - enti, AOO e UO - censiti all'Indice PA
549        			CodAmmIPAIO				IN OUT	VARCHAR2,								-- 14°: codice dell'Amministrazione di appartenenza (o con cui coindice il soggetto) sull'Indice PA. Ricerca case insensitive in like
550        			CodAOOIPAIO				IN OUT	VARCHAR2,								-- 15°: codice dell'AOO di appartenenza (o con cui coindice il soggetto) sull'Indice PA. Ricerca case insensitive in like
551        			IsSoggRubricaAppIO		IN OUT 	DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,
552        																					-- 16°: id. del soggetto della rubrica cui devono appartenere i soggetti da ricercare
553        			IdGruppoAppIO			IN OUT	DMT_GRUPPI_SOGG_EST.ID_GRUPPO%type,		-- 17° filtro di ricerca: id. di un gruppo di soggetti cui devono apppartenere i soggetti da ricercare
554        			NomeGruppoAppIO			IN OUT	VARCHAR2,								-- 18° filtro di ricerca: nome di un gruppo di soggetti cui devono apppartenere i soggetti da ricercare (ricerca esatta case-insensitive: da nome si deve individuare univocamente un gruppo)
555        			StrInDenominazioneIn	IN 			DMT_RUBRICA_SOGGETTI.DENOMINAZIONE%TYPE DEFAULT NULL, -- 19° filtro di ricerca: stringa contenuta nella denominazione/cognome e nome del soggetto (ricerca di tipo contains)
556        			CriteriPersonalizzatiIO	IN OUT 	NOCOPY CLOB,							-- Altri criteri di ricerca sugli attributi addizionali (XML conforme a schema LISTA_STD.xsd). Se più di uno vengono applicati in AND.
557        																					-- Ogni criterio è un tag Riga che può contenere le seguenti colonne:
558        																					--	1) Nome (ATTR_NAME) dell'attributo cui è relativo il criterio
559        																					--	2) (obblig.) Operatore logico. Valori possibili:
560        																					--		"uguale" (ricerca esatta)
561        																					--		"simile a (case-sensitive)" (ricerca case-sensitive in like)
562        																					--		"simile a (case-insensitive)" (ricerca case-insensitive in like e che ignora i caratteri quali spazi, ., ecc)
563        																					--		"maggiore" (se attributo numerico o data)
564        																					--		"maggiore o uguale" (se attributo numerico o data)
565        																					--		"minore" (se attributo numerico o data)
566        																					--		"minore o uguale" (se attributo numerico o data)
567        																					--		"tra" (se attributo numerico o data)
568        																					--		"non valorizzato"
569        																					--		"valorizzato"
570        																					--		"spuntato" (se attributo di tipo casella di spunta)
571        																					--		"non spuntato" (se attributo di tipo casella di spunta)
572        																					--	3) 1° valore di confronto (obblig. e gestito solo se l'operatore non ha uno dei seguenti valori: valorizzato, non valorizzato, spuntato, non spuntato) (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
573        																					--	4) 2° valore di confronto (obblig. e gestito solo se l'operatore è "tra") (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
574        																					--	5) Label dell''attributo cui è relativo il criterio (se sotto-attributo di complesso <label del complesso> - <label del sotto-attributo>
575        			CIDestinatariSocietaIn	IN			VARCHAR2 DEFAULT NULL,				-- Cod. identificativo della società cui devono essere associati i soggetti - destinatari di documenti inseriti in DMT_DESTINATARI_DOC - da estarre
576        			------------- inizio argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
577        			ColOrderByIO			IN OUT	VARCHAR2,								-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso (si può ordinare solo per le colonne da 1 a 6 + 47 + 52). Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
578        																					-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
579        																					-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
580        			FlgDescOrderByIO  		IN OUT	VARCHAR2,								-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
581        																					-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.
582        			FlgSenzaPaginazioneIn 		IN 		PLS_INTEGER DEFAULT NULL,            -- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
583        			NroPaginaIO      			IN OUT	PLS_INTEGER,                  		-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
584           			BachSizeIO				IN OUT	PLS_INTEGER,							-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)
585        																					-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro
586        			OverFlowLimitIn			IN		PLS_INTEGER DEFAULT NULL,				-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow
587        			FlgSenzaTotIn			IN		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
588        			NroTotRecOut			OUT		PLS_INTEGER,							-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina)
589             		NroRecInPaginaOut 		OUT   	PLS_INTEGER,                     		-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
590        			FlgBatchSearchIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che la stored è utilizzata da un processo batch, altrimenti da un processo online.
591        																					-- Serve affinchè in caso l'input OverFlowLimitIn non sia valorizzato vengano applicati i limiti di overflow per processo batch o online che sono parametri di configurazione del sistema.
592        			ColToReturnIn			IN		VARCHAR2 DEFAULT NULL,					-- Stringa con i n.ri delle colonne dell'XML di output ListaXMLOut che si vuole siano presenti.
593        																					-- Se la stringa è vuota saranno presenti tutte le colonne.
594        																					-- La colonna 1 sarà presente comunque.
595        																					-- I n.ri delle varie colonne vanno separati con , o ; e se si vuole indicare un intervallo di colonne gli estremi dell'intervallo vanno separati con - (es: "1-5;7;10" significa colonne da 1 a 5 più le colonne 7 e 10)
596        			------------- fine argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
597        			ListaXMLOut				OUT		NOCOPY CLOB,							-- Lista dei soggetti trovati (XML conforme a schema LISTA_STD.xsd)
598        																					-- Ogni soggetto è un tag Riga che può contenere le seguenti colonne:
599        																					-- 1:  Identificativo del soggetto
600        																					-- 2:  Denominazione primaria/cognome e nome
601        																					-- 3:  Codice fiscale
602        																					-- 4:  Partita IVA
603        																					-- 5:  Data di nascita/istituzione (nel formato dato dal parametro FMT_STD_DATA)
604        																					-- 6:  Data di cessazione (nel formato dato dal parametro FMT_STD_DATA)
605        																					-- 7:  Flag di persona fisica (1) o giuridica (0)
606        																					-- 8:  Cognome (se persona fisica)
607        																					-- 9:  Nome (se persona fisica)
608        																					-- 10: Sesso (se persona fisica)
609        																					-- 11: Titolo
610        																					-- 12: Descrizione del tipo o sottotipo di soggetto
611        																					-- 13: Condizione giuridica
612        																					-- 14: Causale di cessazione
613        																					-- 15: Comune di nascita/istituzione
614        																					-- 16: Stato di nascita/istituzione
615        																					-- 17: Stato di cittadinanza (se persona fisica)
616        																					-- 18: Flag di annullamento logico (valori 1/0)
617        																					-- 19: Altre denominazioni (parallele, secondarie ecc)
618        																					-- 20: Vecchie denominazioni
619        																					-- 21: Indirizzo di ultima residenza/sede/recapito
620        																					-- 22: Flag di soggetto con dati "certificati" (valori 1/0)
621        																					-- 23: Estremi di certificazione (chi e quando)
622        																					-- 24: Flag che indica che il soggetto è di "proprietà" dell'applicazione CodApplOwnerIO ed eventuale istanza CodIstApplOwnerIO
623        																					-- 25: Descrizione dell'applicazione (ed eventuale istanza) proprietaria del soggetto
624        																					-- 26: Cod. identificativo del soggetto nel sistema di provenienza (es: anagrafe residenti/ditte)
625        																					-- 27: Codice del soggetto nell'indice PA (se Pubblica Amministrazione)
626        																					-- 28: Timestamp di creazione del soggetto (nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
627        																					-- 29: Descrizione dell'utente di creazione del soggetto
628        																					-- 30: Timestamp di ultima modifica dei dati identificativi del soggetto (nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
629        																					-- 31: Descrizione dell'utente di ultima modifica dei dati identificativi del soggetto
630        																					-- 32: (valori 1/0) Indicatore di soggetto non modificabile da GUI
631        																					-- 33: (valori 1/0) Indicatore di soggetto attivo e non annullato
632        																					-- 34: Codice rapido del soggetto
633        																					-- 35: Cod. Amministrazione su IPA del soggetto o della PA cui il soggetto appartiene
634        																					-- 36: Cod. AOO su IPA del sogetto o dell'AOO cui il soggetto appartiene
635        																					-- 37: Data e ora ultima sincronizzazione soggetto da Indice PA (nel formato FMT_STD_TIMESTAMP)
636        																					-- 38: Denominazione breve / acronimo del soggetto
637        																					-- 39: Id. dell'eventuale soggetto di appartenenza
638        																					-- 40: Indirizzo/i e-mail del soggetto (di qualsiasi tipo)
639        																					-- 41: Indirizzo/i e-mail PEC del soggetto
640        																					-- 42: Indirizzo/i e-mail PEO (i.e. non indicati come PEC) del soggetto
641        																					-- 43: (valori PEC/PEO) Indica se il soggetto ha indirizzi e-mail PEC (=PEC) o solo di posta ordinaria (=PEO)
642        																					-- 44: Riferimenti telefonici
643        																					-- 45: Riferimenti FAX
644        																					-- 46: Cod. che indica il tipo di soggetto interno (interno rispetto al soggetto produttore cui appartiene/con cui coincide il dominio di lavoro). Valori possibili: UP=Unità di personale, AOOI=AOO dell'Amministrazione, UOI=U.O./ufficio interno
645        																					-- 47: Score del record restituito dall'indicizzatore (valori interi da 1 a 5) (valorizzato solo se effettuata ricerca full-text)
646        																					-- 48: ID_SP_AOO dell'eventuale AOO interna all'ente cui si è loggati (o cui appartiene l'AOO cui si è loggati) che corrisponde al soggetto della rubrica se di tipo AOOI
647        																					-- 49: ID_UO dell'eventuale UO (del dominio da cui si è loggati) che corrisponde al soggetto della rubrica se di tipo UOI
648        																					-- 50: ID_UTENTE dell'eventuale utente (accreditato nel dominio da cui si è loggati) che corrisponde al soggetto della rubrica se di tipo UP
649        																					-- 51: ID_SCRIVANIA dell'unica scrivania utente attualmente occupata dall'utente indicato in colonna precedente all'interno dell'AOO/Ente da cui si è loggati (se l'utente occupa più scrivanie la colonna è vuota)
650        																					-- 52: Denominazione breve / acronimo del soggetto e in assenza di questa la denominazione completa
651        																					-- 53: (valori 1/0) Indica se il soggetto è selezionabile per la finalità indicata in FinalitaIn
652        																					-- 54: (valori 1/0) Indice se il soggetto è presente (=1) o meno (=0) nell'organigramma del dominio cui si è loggati
653        																					-- 55: Codice che indica la categoria di soggetto: #APA, #IAMM, #AF, #AG, UO;UOI, UP, PA+
654        																					-- 56: Id. cliente se il soggetto in rubrica è un cliente (valorizzato solo se argomento FlgSoloClientiIn=1)
655        																					-- 57: Billing Account (BA) del cliente
656        																					-- 58: CID del cliente
657        																					-- 59: Cod. IPA del cliente (in particolare quello di fatturazione se destinatario di fattura)
658        																					-- 60: Nro di contratto
659        																					-- 61: Dati di ultima residenza/sede/recapito separati da |*|
660        																					--	   Nell'ordine:
661        																					--	   indirizzo
662        																					--	   N. civico
663        																					--	   CAP
664        																					-- 	   Comune
665        																					-- 	   Targa provincia
666        																					--	   Sigla stato
667        																					-- 62: CUP
668        																					-- 63: Rif. INPS
669        																					-- 64: Flag 1/0 che indica se l'id. fiscale della fatture è un codice fiscale (0) o una partita IVA (1)
670        																					-- 65: Posizione Finanziaria  (attributo custom POS_FIN_CLIENTE)
671        																					-- 66: Anno posizione finanziaria (attributo custom ANN_FIN_CLIENTE)
672                                                                                            -- 67: Esigibilita' Cliente (attributo custom ESIGIBILITA_IVA_CLIENTE)
673        																					-- 68: Segno importi NCD (attributo custom FLG_SEGNO_IMPORTI_CLIENTE)
674        																					-- 69: Comune/citta di ultima residenza/sede/recapito
675        																					-- 70: Id. destinatario documento se il soggetto in rubrica è un destinatario documento (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato)
676        																					-- 71: (valorizzato solo se FlgSoloDestDocIn =1 e se CIDestinatariSocietaIn NON è valorizzato) Società/divisioni aziendali cui è associato il destinatario (se più di uno separate da ;)
677        																					-- 72: (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato) Cod. cliente/i cui è associato il destinatario (se più di uno separati da ;)
678        																					--		Se CIDestinatariSocietaIn è valorizzato solo i clienti a cui è associato nella società indicata da CIDestinatariSocietaIn
679        																					-- 73: (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato) Denominazione del cliente/i cui è associato il destinatario (se più di uno separati da ;)
680        																					--		Se CIDestinatariSocietaIn è valorizzato solo i clienti a cui è associato nella società indicata da CIDestinatariSocietaIn
681        																					-- 74: (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato) Cod. fiscale/Partiva IVA del/i clienti cui è associato il destinatario (se più di uno separati da ;)
682        																					--		Se CIDestinatariSocietaIn è valorizzato solo i clienti a cui è associato nella società indicata da CIDestinatariSocietaIn
683        																					-- 75: (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato) Id. del cliente/i cui è associato il destinatario (se più di uno separati da ;)
684        																					--		Se CIDestinatariSocietaIn è valorizzato solo i clienti a cui è associato nella società indicata da CIDestinatariSocietaIn
685        																					-- 76: (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato) Canale/i di invio al destinatario (se più di uno separati da ;)
686        																					--		Se CIDestinatariSocietaIn è valorizzato solo il/i canali per il/i clienti della società indicata da CIDestinatariSocietaIn
687        																					-- 77: (valorizzato solo se FlgSoloDestDocIn =1 o se CIDestinatariSocietaIn è valorizzato) Metodo di registrazione del destinatario
688        																					-- ATTENZIONE: Se FlgIndexerOverflowIn è pari a 1, qualora la stored non vada a sua volta in overflow, dato che il resultset trovato dalla stored dovrà essere ripassato al searcher di Lucene esso non è paginato indipendentemente dal fatto che l'apposito input lo richieda.
689        																					--		   	   Inoltre nel caso di FlgIndexerOverflowIn pari a 1 dato che dopo il nuovo passaggio per il searcher di Lucene si renderà necessaria una nuova chiamata alla stored solo la prima colonna del clob è valorizzata
690        			FlgAbilInsOut	 		OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se 1 si ha abilitazione a inserimento di soggetti
691        			FlgMostraAltriAttrOut	OUT			PLS_INTEGER,						-- (valori 1/0) Se 1 nella GUI vanno mostrati gli attributi addizionali per un nuovo soggetto (ce ne sono di visibile all'utente), se 0 no
692        			ErrContextOut			OUT			VARCHAR2,							-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
693        			ErrCodeOut				OUT			PLS_INTEGER,						-- N.ro errore di uscita
694        			ErrMsgOut				OUT 		VARCHAR2,							-- Messaggio d'errore
695        			FinalitaIn				IN			VARCHAR2 DEFAULT NULL,				-- Indica la finalità per cui si richiama la rubrica
696        																					-- SEL_SOGG_INT: selezione di soggetti interni all'AOO
697        																					-- SEL_SOGG_EST: selezione di soggetti esterni all'AOO
698        																					-- SEL_UOI: selezione di UO/uffici interniall'AOO
699        			CodIstatComuneIndIn		IN			VARCHAR2 DEFAULT NULL,				-- Codice ISTAT del comune di residenza/recapito/sede
700        			DesCittaIndIn			IN			VARCHAR2 DEFAULT NULL,				-- Stringa contenuta nel nome del comune/città di residenza/recapito/sede (ricerca case insensitive in like senza forzare il % finale)
701        			RigaTagNameIn			IN			VARCHAR2 DEFAULT NULL,				-- (opzionale) Come rinominare il tag Riga dell'XML ListaXMLOut di output
702        			DataInsDaIn				IN			VARCHAR2 DEFAULT NULL,				-- Filtro: estremo inferiore intervallo di ricerca su data creazione (nel formato dato dal parametro FMT_STD_DATA)
703        			DataInsAIn				IN			VARCHAR2 DEFAULT NULL,				-- Filtro: estremo superiore intervallo di ricerca su data creazione (nel formato dato dal parametro FMT_STD_DATA)
704        			DataUltModDaIn			IN			VARCHAR2 DEFAULT NULL,				-- Filtro: estremo inferiore intervallo di ricerca su data ultima modifica (nel formato dato dal parametro FMT_STD_DATA)
705        			DataUltModAIn		    IN			VARCHAR2 DEFAULT NULL,				-- Filtro: estremo superiore intervallo di ricerca su data ultima modifica (nel formato dato dal parametro FMT_STD_DATA)
706        			IdSoggRubricaToForceIn	IN			DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE DEFAULT NULL,
707        																					-- Id. di un soggetto della rubrica da mettere comunque nel result set restituito anche se non matcha tutti i filtri di ricerca
708        			DenominazioneBreveIn	IN			VARCHAR2 DEFAULT NULL,				-- filtro di ricerca: stringa contenuta nella denominazione breve/acronimo, o in sua assenza nella denominazione completa, del soggetto (ricerca case-insensitive in like senza forzare il % finale)
709        			ListaCommercialiDestIn	IN			VARCHAR2 DEFAULT NULL,				-- (vale solo per soggetti che sono destinatari di doc.) Filtro: Id. user del/dei commerciali che devono avere i destinatari di doc. da estrarre (se più di uno separati da ; o ,)
710        			ListaAgentiDestIn		IN			VARCHAR2 DEFAULT NULL,				-- (vale solo per soggetti che sono destinatari di doc.) Filtro: Id. user del/degli agenti che devono avere i destinatari di doc. da estrarre (se più di uno separati da ; o ,)
711        			CanaliInvioDocIn		IN			VARCHAR2 DEFAULT NULL,				-- (vale solo per soggetti che sono destinatari di doc.) Filtro: Canale/i invio documenti che devono avere i destinatari di doc. da estrarre (se più di uno separati da ; o ,)
712        			CanaliInvDocToExcludeIn	IN			VARCHAR2 DEFAULT NULL,				-- filtro di ricerca: Canale/i invio documenti che non devono avere i destinatari di doc. da estrarre (se più di uno separati da ; o ,)
713              		ColTagNameIn			IN			DMVA_STRING DEFAULT NULL			-- (opzionale) Come rinominare i tag delle colonne in alternativa a Colonna Nro=.. nell'XML ListaXMLOut di output
714        			)return PLS_INTEGER;													-- Vale 1 se tutto è andato a buon fine, altrimenti 0
715        
716        	/***** Funzione per inserire o aggiornare un soggetto in rubrica soggetti, compresi i suoi indirizzi (tranne quelli cessati) *****/
717        	function IUSoggetto(
718        			CodIdConnectionTokenIn	IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
719        																	-- (obblig). Codice identificativo del token di connessione
720        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,
721        																	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
722        			IdSoggRubrIO   			IN OUT   	DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,
723        																	-- Identificativo del soggetto di rubrica da modificare. Se non valorizzato il soggetto è da inserire ex-novo
724        																	-- In output, salvo in caso di errore, è sempre valorizzato
725        			FlgPersonaFisicaIn		IN		NUMBER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
726        																	-- (valori 1/0/NULL) Se 1 il soggetto è una persona fisica, altrimenti giuridica
727        			DenomCognomeIn			IN		DMT_RUBRICA_SOGGETTI.DENOMINAZIONE%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
728        																	-- (obblig.) Denominazione (se persona giuridica) o cognome (se persona fisica)
729        			NomeIn					IN		DMT_RUBRICA_SOGGETTI.NOME%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
730        																	-- (obblig. se persona fisica) Nome
731        			CFIn					IN 		DMT_RUBRICA_SOGGETTI.CF%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
732        																	-- Codice fiscale del soggetto
733          			PIVAIn					IN 		DMT_RUBRICA_SOGGETTI.PIVA%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
734        																	-- Partita IVA del soggetto
735        			CodTipoSottoTipoIn		IN 		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
736        																	-- Codice del tipo ed eventuale sottotipo di soggetto (se si indica il sottotipo il suo codice va separato con ";" da quello del tipo)
737        			CodCondGiuridicaIn		IN		DMT_RUBRICA_SOGGETTI.COD_COND_GIURIDICA%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
738        																	-- Codice della condizione giuridica (valori da dizionario)
739        			DtNascitaIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
740        																	-- Data di nascita/istituzione (nel formato dato dal parametro di conf. FMT_STD_DATA).
741        			CodIstatComuneNascIn	IN		DMT_RUBRICA_SOGGETTI.COD_ISTAT_COMUNE_NASC%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
742        																	-- Codice ISTAT del comune italiano di nascita/istituzione
743        			NomeComuneNascIn		IN		DMT_COMUNI_ITALIANI.NOME_COMUNE%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
744        																	-- Nome del comune italiano o estero di nascita/istituzione
745        			CodIstatStatoNascIn		IN		DMT_RUBRICA_SOGGETTI.COD_ISTAT_STATO_NASC%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
746        																	-- Codice ISTAT dello stato di nascita/istituzione
747        			NomeStatoNascIn			IN		DMT_STATI_NAZIONALI.NOME_STATO%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
748        																	-- Nome dello stato di nascita/istituzione
749        			DtCessazioneIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
750        																	-- Data di cessazione/morte (nel formato dato dal parametro di conf. FMT_STD_DATA).
751        			CodCausaleCessazioneIn	IN		DMT_RUBRICA_SOGGETTI.COD_CAUS_CESSAZIONE%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
752        																	-- Codice della causa di cessazione/morte (valori da dizionario)
753        			FlgSexIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
754        																	-- (valori M/F) Flag del sesso (per persona fisica)
755        			CodIstatStatoCittIn		IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
756        																	-- Codice ISTAT dello stato di cittadinanza (per persona fisica)
757        			NomeStatoCittIn			IN		DMT_STATI_NAZIONALI.NOME_STATO%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
758        																	-- Nome dello stato di cittadinanza (per persona fisica)
759        			TitoloIn				IN		DMT_RUBRICA_SOGGETTI.TITOLO%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
760        																	-- Titolo (per persona fisica)
761        			CodIndPAIn				IN		DMT_RUBRICA_SOGGETTI.COD_INDPA%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
762        																	-- Codice con cui il soggetto (se PA, AOO o UO ) è registrato nell'indice PA
763        			CodAmmIPAIn				IN		DMT_RUBRICA_SOGGETTI.COD_AMM_IPA%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
764        																	-- Codice Amministrazione su Indice PA del soggetto (se PA) o dell'Amministrazione di appartenenza del soggetto (se AOO/UO)
765        			CodAOOIPAIn				IN		DMT_RUBRICA_SOGGETTI.COD_AOO_IPA%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
766        																	-- Codice AOO su Indice PA del soggetto (se Area Organizzativa Omogenea) o dell'AOO di appartenenza del soggetto (se UO)
767        			IdSoggAppIn				IN		DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
768        																	-- Identificativo del soggetto di rubrica cui appartiene il soggetto da creare/modificare (appartenenza diretta)
769        																	-- Se non specificato può essere comunque settato se ricavabile da CodAmmIPAIn e/o CodAOOIPAIn
770        			CIProvSoggIn			IN 		DMT_RUBRICA_SOGGETTI.PROV_CI_SOGG%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
771        																	-- Codice identificativo del soggetto nel sistema di provenienza (ad esempio l'anagrafe residenti/ditte)
772        			UsernameIn				IN		DMT_RUBRICA_SOGGETTI.USERNAME%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
773        																	-- Username con cui il soggetto può accedere al sistema
774        			PasswordIn				IN		DMT_RUBRICA_SOGGETTI.PASSWORD%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
775        																	-- Password con cui il soggetto può accedere al sistema
776        			CodRapidoIn				IN		DMT_RUBRICA_SOGGETTI.COD_RAPIDO%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
777        																	-- Codice rapido che identifica il soggetto (univoco tra quelli dei soggetti visibili dallo stesso dominio)
778        			FlgLockedIn				IN		NUMBER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
779        																	-- (valori 1/0/NULL) Indicatore di soggetto riservato dal sistema e non modificabile/cancellabile da GUI
780        			FlgModIndirizziIn		IN		VARCHAR2 DEFAULT 'I',	-- (valori I/C) Indica se gli indirizzi del soggetto indicate nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelle da inserire/modificare/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutti gli indirizzi NON storici già specificati in caso di soggetto da aggiornare
781        			XMLIndirizziIn			IN		CLOB DEFAULT NULL,		-- Lista degli indirizzi (tranne quelli cessati) del soggetto (XML conforme a schema LISTA_STD.xsd)
782        																			-- Ogni indirizzo è un tag Riga che può contenere le seguenti colonne:
783        																			-- 1: Identificativo dell'indirizzo/luogo (rowid)
784        																			-- 2: Codice del tipo di indirizzo/luogo
785        																			-- 3: Tipo di indirizzo/luogo
786        																			-- 4: Dettaglio del tipo
787        																			-- 5: <non utilizzata>
788        																			-- 6: <non utilizzata>
789        																			-- 7: Data di inzio validità dell'indirizzo/luogo (nel formato dato dal parametro di conf. FMT_STD_DATA)
790        																			-- 8: Data di fine validità dell'indirizzo/luogo (nel formato dato dal parametro di conf. FMT_STD_DATA)
791        																			-- 9: Codice identificativo toponomastico (se indirizzo censito nella toponomastica del sistema; viene considerato solo se è valorizzata anche la colonna successiva)
792        																			-- 10: Indirizzo (senza civico) (alternativo o ridondante rispetto al campo precedente) e senza tipo toponimo se questo è separato in colonna 24 (che quindi è valorizzata)
793        																			-- 11: N.° civico (senza eventuali appendici)
794        																			-- 12: Interno
795        																			-- 13: Scala
796        																			-- 14: Piano
797        																			-- 15: CAP
798        																			-- 16: Frazione
799        																			-- 17: Codice ISTAT del comune italiano (viene considerato solo se è valorizzata anche la colonna successiva)
800        																			-- 18: Nome del comune italiano o della città (se estera)
801        																			-- 19: Codice ISTAT dello stato (viene considerato solo se è valorizzata anche la colonna successiva)
802        																			-- 20: Nome dello stato
803        																			-- 21: Targa provincia
804        																			-- 22: Zona dell'indirizzo
805        																			-- 23: Complemento dell'indirizzo
806        																			-- 24: Tipo toponimo (i.e. via, piazza ecc) dell'indirizzo
807        																			-- 25: Appendici (esponente, bis/ter, colore ecc) del N.ro civico
808        																			-- 26: (valori 1/0/NULL) Flag di indirizzo da eliminare
809        			FlgModAltreDenomIn		IN		VARCHAR2 DEFAULT 'I',	-- (valori I/C) Indica se le denominazioni alternative del soggetto indicate nell'argomento successivo sono fornite in modo incrementale (=I) (solo quelle da inserire/modificare/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutte quelle già specificate in caso di soggetto da aggiornare
810        			XMLAltreDenominazioniIn	IN		CLOB DEFAULT NULL,		-- Lista con le denominazioni alternative, correlate ecc. del soggetto (XML conforme a schema LISTA_STD.xsd)
811        																	-- Ogni denominazione è un tag "Riga" che può contenere le seguenti colonne:
812        																	-- 1: Identificativo (ROWID) con cui la denominazione è già stata registrata in banca dati
813        																	-- 2: Tipo di denominazione (parallela, correlata, pseudonimo)
814        																	-- 3: Denominazione
815        																	-- 4: (valori 1/0/NULL) Flag di denominazione da eliminare
816        			FlgModContattiIn		IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se i contatti (rif. telefonici, fax, e-mail) del soggetto indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da inserire/modificare/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già specificati in caso di soggetto da aggiornare
817        			XMLContattiIn			IN		CLOB DEFAULT NULL,				-- Lista con i contatti (rif. telefonici, fax, e-mail) del soggetto (XML conforme a schema LISTA_STD.xsd)
818        																	-- Ogni contatto è tag "Riga" che può contenere le seguenti colonne:
819        																	-- 1: Identificativo (ROWID preceduto da Tipo - T/F/E) con cui il contatto è già stata registrato in banca dati
820        																	-- 2: (obblig.) Flag che indica il tipo di contatto. Valori possibili: T=Telefono; F=Fax; E=e-Mail
821        																	-- 3: N.ro di telefono/fax o indirizzo e-mail
822        																	-- 4: Tipo di numero di telefono (abitazione, ufficio, cell. ecc.) Valori da apposita dictionary entry
823        																	-- 5: (valori 1/0/NULL) Flag di indirizzo e-mail di Posta Elettronica Certificata
824        																	-- 6: (valori 1/0/NULL) Flag di indirizzo e-mail dichiarato all'Indice PA
825        																	-- 7: (valori 1/0/NULL) Flag di indirizzo e-mail che è Casella Istituzionale di una PA
826        																	-- 8: Estremi del gestore della casella se è di Posta Elettronica Certificata
827        																	-- 9: (valori 1/0/NULL) Flag di contatto da eliminare
828        			FlgModGruppiAppIn		IN		VARCHAR2 DEFAULT 'I',	-- (valori I/C) Indica se i gruppi di appartenenza indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da inserire/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già associati al modello da aggiornare
829        			XMLGruppiAppIn			IN		CLOB DEFAULT NULL,		-- Lista con i gruppi di appartenenza del soggetto (solo quelli visibili nel dominio cui si è loggati)(XML conforme a schema LISTA_STD.xsd)
830        																	-- Ogni gruppo è un tag "Riga" che può contenere le seguenti colonne:
831        																	-- 1: Identificativo del gruppo
832        																	-- 2: Codice rapido del gruppo
833        																	-- 3: Nome del gruppo
834        																	-- 4: (valori 1/0/NULL) Flag di tipo di gruppo da eliminare
835        			AttributiAddIn			IN		CLOB DEFAULT NULL,		-- XML contenente nomi e valori degli attributi dinamici da aggiornare (conforme allo schema SezioneCache.xsd)
836        																	-- Gli attributi già presenti in DB e per i quali non c'è corrispondente nell'XML restano invariati
837        																	-- Per tutti gli attributi vale quanto segue:
838        																	-- Un attributo da settare è un tag "Variabile" dell'XML il cui tag "Nome" contiene il nome identificativo dell'attributo (ATTR_NAME di DMT_ATTRIBUTES_DEF)
839        																	-- Un attributo da settare è una variabile con tag "ValoreSemplice" se è un attributo a singolo valore e non strutturato (cioè con tipo diverso da COMPLEX)
840        																	-- altrimenti è una variabile con tag "Lista" che ha un'unica colonna con "Nro" pari a 1 se l'attributo non è strutturato, che ha invece tante colonne quanti gli attributi componenti (ordinate in base al loro NRO_ORD_IN_SUP) se l'attributo è complesso
841        																	-- Nel caso di variabili con tag "Lista" i valori specificati nell'XML si aggiungono o sostituiscono quelli già presenti in DB a seconda che nell'XML sia presente o meno una variabile con tag "Nome" pari a #Append_<Nome attributo> e tag "ValoreSemplice" pari a 1
842        																	-- In particolare se non sono specificati valori nell'XML (tag Lista vuoto) e se i valori non sono da aggiungere significa che tutti i valori dell'attributo già presenti in DB vanno rimossi
843        			FlgIgnoreWarningIn 		IN 		PLS_INTEGER DEFAULT NULL,		-- (valori 1/0/NULL) Se 0 o NULL significa che in presenza di WARNING la stored si comporta come in caso di errore; se 1 gli WARNING vengono ignorati
844        			FlgRollBckFullIn		IN 		PLS_INTEGER DEFAULT NULL,		-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
845        																			-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
846        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,		-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
847        			WarningMsgOut			OUT		VARCHAR2,						-- Messaggio di warning (valorizzato solo se non c'è errore)
848        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
849        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
850        			ErrMsgOut				OUT 	VARCHAR2,						-- Messaggio d'errore
851        			IdUOIn					IN		INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
852        																			-- Id. della UO nella cui rubrica è censito il soggetto
853        			FlgVisibSottoUOIn		IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
854        																			-- Flag 1/0. Se 1 la visibilità del soggetto è estesa a tutte le sotto UO di IdUOIn
855        			FlgGestSottoUOIn		IN		PLS_INTEGER	DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD')
856        																			-- Flag 1/0. Se 1 la modifica/cancellazione del soggetto è estesa a tutte le sotto UO di IdUOIn
857        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
858        
859        	/*** Funzione di eliminazione di un soggetto della rubrica 							***/
860        	/*** Si può specificare se l'eliminazione deve essere fisica o solo logica (annullamento)		***/
861        	/*** Se non lo si specifica il sistema fa quella fisica se possibile, se no quella logica		***/
862        	function DSoggetto(
863        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
864        																	-- (obblig). Codice identificativo del token di connessione
865        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
866        			IdSoggRubrIn   			IN 		DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,-- (obblig.)Identificativo del soggetto di rubrica
867        			FlgCancFisicaIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL): Se 1 si richiede la cancellazione fisica; se 0 l'annullamento logico; se non è valorizzato quella possibile delle 2.
868        			MotiviIn				IN		DMT_RUBRICA_SOGGETTI.MOTIVI_ANN%type,	-- Motivi della cancellazione/annullamento
869        			FlgIgnoreWarningIn 		IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 0 o NULL significa che in presenza di WARNING la stored si comporta come in caso di errore; se 1 gli WARNING vengono ignorati
870        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
871        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
872        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
873        			WarningMsgOut			OUT		VARCHAR2,						-- Messaggio di warning (valorizzato solo se non c'è errore)
874        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
875        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
876        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
877        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
878        
879        	/**** Funzione per estrarre i dati di un soggetto della rubrica (tranne gli indirizzi) ****/
880        	FUNCTION LoadDettSoggetto(
881        			CodIdConnectionTokenIn	IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
882        																	-- (obblig). Codice identificativo del token di connessione
883        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
884        			IdSoggRubrIO   			IN OUT	DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,-- (obblig.)Identificativo del soggetto di rubrica
885        			FlgPersonaFisicaOut		OUT		DMT_RUBRICA_SOGGETTI.FLG_PERSONA_FISICA%type,
886        																	-- (valori 1/NULL) Se 1 il soggetto è una persona fisica, altrimenti giuridica
887        			DenomCognomeOut			OUT		DMT_RUBRICA_SOGGETTI.DENOMINAZIONE%TYPE,  -- Denominazione (se persona giuridica) o cognome (se persona fisica)
888        			NomeOut					OUT		DMT_RUBRICA_SOGGETTI.NOME%TYPE,		-- Nome (se persona fisica)
889        			CFOut					OUT 		DMT_RUBRICA_SOGGETTI.CF%TYPE,			-- Codice fiscale del soggetto
890          			PIVAOut					OUT 		DMT_RUBRICA_SOGGETTI.PIVA%TYPE,		-- Partita IVA del soggetto
891        			CodTipoSottoTipoOut		OUT 		VARCHAR2,						-- Codice del tipo ed eventuale sottotipo di soggetto (se si indica il sottotipo il suo codice viene separato con ";" da quello del tipo)
892        			CodCondGiuridicaOut		OUT		DMT_RUBRICA_SOGGETTI.COD_COND_GIURIDICA%type,
893        																	-- Codice della condizione giuridica
894        			DtNascitaOut			OUT		VARCHAR2,						-- Data di nascita/istituzione (nel formato dato dal parametro di conf. FMT_STD_DATA).
895        			CodIstatComuneNascOut		OUT		DMT_RUBRICA_SOGGETTI.COD_ISTAT_COMUNE_NASC%type,
896        																	-- Codice ISTAT del comune italiano di nascita/istituzione
897        			NomeComuneNascOut			OUT		DMT_COMUNI_ITALIANI.NOME_COMUNE%type,	-- Nome del comune italiano o estero di nascita/istituzione
898        			TargaProvNascOut			OUT		DMT_COMUNI_ITALIANI.TARGA_PROV%type,	-- Targa della provincia di nascita
899        			CodIstatStatoNascOut		OUT		DMT_RUBRICA_SOGGETTI.COD_ISTAT_STATO_NASC%type,
900        																	-- Codice ISTAT dello stato di nascita/istituzione
901        			NomeStatoNascOut			OUT		DMT_STATI_NAZIONALI.NOME_STATO%type,	-- Nome dello stato di nascita/istituzione
902        			DtCessazioneOut			OUT		VARCHAR2,						-- Data di cessazione/morte (nel formato dato dal parametro di conf. FMT_STD_DATA).
903        			CodCausaleCessazioneOut		OUT		DMT_RUBRICA_SOGGETTI.COD_CAUS_CESSAZIONE%type,
904        																	-- Codice della causa di cessazione/morte
905        			FlgSexOut				OUT		DMT_RUBRICA_SOGGETTI.FLG_SEX%TYPE,		-- (valori M/F) Flag del sesso (per persona fisica)
906        			CodIstatStatoCittOut		OUT		DMT_RUBRICA_SOGGETTI.COD_ISTAT_STATO_NASC%type,
907        																	-- Codice ISTAT dello stato di cittadinanza (per persona fisica)
908        			NomeStatoCittOut			OUT		DMT_STATI_NAZIONALI.NOME_STATO%type,	-- Nome dello stato di cittadinanza (per persona fisica)
909        			TitoloOut				OUT		DMT_RUBRICA_SOGGETTI.TITOLO%type,		-- Titolo (per persona fisica)
910        			CodIndPAOut				OUT		DMT_RUBRICA_SOGGETTI.COD_INDPA%type,	-- Codice con cui il soggetto (se PA, AOO o UO ) è registrato nell'indice PA
911        			CodAmmIPAOut			OUT		DMT_RUBRICA_SOGGETTI.COD_AMM_IPA%type,
912        																	-- Codice Amministrazione su Indice PA del soggetto (se PA) o dell'Amministrazione di appartenenza del soggetto (se AOO/UO)
913        			CodAOOIPAOut			OUT		DMT_RUBRICA_SOGGETTI.COD_AOO_IPA%type,
914        																	-- Codice AOO su Indice PA del soggetto (se Area Organizzativa Omogenea) o dell'AOO di appartenenza del soggetto (se UO)
915        			IdSoggAppOut			OUT		DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,
916        																	-- Identificativo del soggetto di rubrica cui appartiene il soggetto da creare/modificare (appartenenza diretta)
917        			CIProvSoggOut			OUT 		DMT_RUBRICA_SOGGETTI.PROV_CI_SOGG%TYPE,	-- Codice identificativo del soggetto nel sistema di provenienza (ad esempio l'anagrafe residenti/ditte)
918        			UsernameOut				OUT		DMT_RUBRICA_SOGGETTI.USERNAME%TYPE,		-- Username con cui il soggetto può accedere al sistema
919        			CodRapidoOut			OUT		DMT_RUBRICA_SOGGETTI.COD_RAPIDO%TYPE,   -- Codice rapido che identifica il soggetto
920        			FlgLockedOut			OUT		DMT_RUBRICA_SOGGETTI.FLG_LOCKED%type,	-- (valori 1/NULL) Indicatore di soggetto riservato dal sistema e non modificabile/cancellabile da GUI
921        			RowidOut				OUT		VARCHAR2,						-- Rowid del record del soggetto
922        			IndirizziOut		OUT		NOCOPY CLOB,						-- Lista degli indirizzi del soggetto (XML conforme a schema LISTA_STD.xsd)
923        																			-- Ogni indirizzo è un tag Riga che può contenere le seguenti colonne:
924        																			-- 1: Identificativo dell'indirizzo/luogo (rowid)
925        																			-- 2: Codice del tipo di indirizzo/luogo
926        																			-- 3: Tipo di indirizzo/luogo
927        																			-- 4: Dettaglio del tipo
928        																			-- 5: Cardinalità del tipo di indirizzo (basata sulla rilevanza del tipo: residenza /sede legale sono i primi)
929        																			-- 6: Descrizione completa dell'indirizzo/luogo
930        																			-- 7: Data di inzio validità dell'indirizzo/luogo (nel formato dato dal parametro di conf. FMT_STD_DATA)
931        																			-- 8: Data di fine validità dell'indirizzo/luogo (nel formato dato dal parametro di conf. FMT_STD_DATA)
932        																			-- 9: Codice identificativo toponomastico (se indirizzo censito nella toponomastica del sistema; viene considerato solo se è valorizzata anche la colonna successiva)
933        																			-- 10: Indirizzo (senza civico) (alternativo o ridondante rispetto al campo precedente) e senza tipo toponimo se questo è separato in colonna 24 (che quindi è valorizzata)
934        																			-- 11: N.° civico (senza eventuali appendici)
935        																			-- 12: Interno
936        																			-- 13: Scala
937        																			-- 14: Piano
938        																			-- 15: CAP
939        																			-- 16: Frazione
940        																			-- 17: Codice ISTAT del comune italiano (viene considerato solo se è valorizzata anche la colonna successiva)
941        																			-- 18: Nome del comune italiano o della città (se estera)
942        																			-- 19: Codice ISTAT dello stato (viene considerato solo se è valorizzata anche la colonna successiva)
943        																			-- 20: Nome dello stato
944        																			-- 21: Targa provincia
945        																			-- 22: Zona dell'indirizzo
946        																			-- 23: Complemento dell'indirizzo
947        																			-- 24: Tipo toponimo (i.e. via, piazza ecc) dell'indirizzo
948        																			-- 25: Appendici (esponente, bis/ter, colore ecc) del N.ro civico
949        			XMLAltreDenominazioniOut	OUT		NOCOPY CLOB,		-- Lista con le denominazioni alternative, correlate ecc. del soggetto (XML conforme a schema LISTA_STD.xsd)
950        																	-- Ogni denominazione è un tag "Riga" che contiene le seguenti colonne:
951        																	-- 1: Identificativo (ROWID) con cui la denominazione è già stata registrata in banca dati
952        																	-- 2: Tipo di denominazione (decodifica) (parallela, correlata, pseudonimo ecc.)
953        																	-- 3: Denominazione
954        			XMLContattiOut			OUT		NOCOPY CLOB,			-- Lista con i contatti (rif. telefonici, fax, e-mail) del soggetto (XML conforme a schema LISTA_STD.xsd)
955        																	-- Ogni contatto è tag "Riga" che contiene le seguenti colonne:
956        																	-- 1: Identificativo (ROWID preceduto da Tipo - T/F/E) con cui il contatto è già stata registrato in banca dati
957        																	-- 2: Flag che indica il tipo di contatto. Valori possibili: T=Telefono; F=Fax; E=e-Mail
958        																	-- 3: N.ro di telefono/fax o indirizzo e-mail
959        																	-- 4: Tipo di numero di telefono (abitazione, ufficio, cell. ecc.) Valori da apposita dictionary entry
960        																	-- 5: (valori 1/0) Flag di indirizzo e-mail di Posta Elettronica Certificata
961        																	-- 6: (valori 1/0) Flag di indirizzo e-mail dichiarato all'Indice PA
962        																	-- 7: (valori 1/0) Flag di indirizzo e-mail che è Casella Istituzionale di una PA
963        																	-- 8: Estremi del gestore della casella se è di Posta Elettronica Certificata
964        			XMLGruppiAppOut			OUT		NOCOPY CLOB,			-- Lista con i gruppi di appartenenza del soggetto (solo quelli visibili nel dominio cui si è loggati)(XML conforme a schema LISTA_STD.xsd)
965        																	-- Ogni gruppo è un tag "Riga" che può contenere le seguenti colonne:
966        																	-- 1: Identificativo del gruppo
967        																	-- 2: Codice rapido del gruppo
968        																	-- 3: Nome del gruppo
969        			AttributiAddOut			OUT		NOCOPY CLOB,			-- Lista degli eventuali ulteriori attributi con cui caratterizzare il soggetto(XML conforme a schema LISTA_STD.xsd)
970        																	-- Ogni attributo è un tag "Riga" che contiene le seguenti colonne:
971        																	-- 1: N.ro (valori da 1 a n) del riquadro (fieldset) in cui mostrare l'attributo
972        																	-- 2: Nome identificativo dell'attributo (ATTR_NAME)
973        																	-- 3: Label del campo con cui rappresentare l'attributo
974        																	-- 4: Tipo di attributo. Valori: DATE, DATETIME, TEXT, TEXT-AREA, CHECK, INTEGER, EURO, DECIMAL, COMBO-BOX, LISTA
975        																	-- 5: N.ro massimo di caratteri/cifre
976        																	-- 6: Larghezza del campo con cui rappresentare l'attributo (size)
977        																	-- 7: Valore dell'attributo
978        																	-- 8: Label del riquadro (fieldset) in cui mostrare l'attributo
979        																	-- 9: (valori 1/0) 1 indica che l'attributo è obbligatorio, 0 che è facoltativo
980        																	-- 10: Altezza (in nro righe) del campo con cui rappresentare l'attributo (se TEXT-AREA)
981        																	-- 11:(valori 1/0) 1 indica se l'attributo è modificabile, 0 che è in sola visualizzazione
982        			FlgMostraAltriAttrOut		OUT		PLS_INTEGER,		-- (valori 1/0) Se 1 nella GUI vanno mostrati gli attributi addizionali (ce ne sono di visibile all'utente), se 0 no
983        			ErrContextOut			OUT		VARCHAR2,				-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
984        			ErrCodeOut				OUT		PLS_INTEGER,			-- N.ro errore di uscita
985        			ErrMsgOut				OUT 		VARCHAR2,			-- Messaggio d'errore
986        			FinalitaIn				IN		VARCHAR2 DEFAULT NULL, 	-- Indica la finalità per cui si è richiamata la rubrica soggetti
987        																	-- SEL_SOGG_INT: selezione di soggetti interni all'AOO
988        																	-- SEL_SOGG_EST: selezione di soggetti esterni all'AOO
989        																	-- SEL_UOI: selezione di UO/uffici interniall'AOO
990        			FlgSelezionabileOut		OUT		PLS_INTEGER,			-- (valori 1/0) Indica se il soggetto è selezionabile per la finalita indicata in FinalitaIn (se questa è NULL è sempre 1)
991        			FlgAttivoOut			OUT		PLS_INTEGER,			-- (valori 1/0) Indica se il soggetto è valido (1) o logicamente annullato (0)
992        			IdUOOut					OUT		INTEGER,				-- Id. della UO nella cui rubrica è censito il soggetto
993        			LivelliUOOut			OUT		VARCHAR2,				-- Livelli della UO nella cui rubrica è censito il soggetto
994        			DesUOOut				OUT		VARCHAR2,				-- Denominazione della UO nella cui rubrica è censito il soggetto
995        			FlgVisibSottoUOout		OUT		PLS_INTEGER,			-- Flag 1/0. Se 1 la visibilità del soggetto è estesa a tutte le sotto UO di IdUOOut
996        			FlgGestSottoUOOut		OUT		PLS_INTEGER				-- Flag 1/0. Se 1 la modifica/cancellazione del soggetto è estesa a tutte le sotto UO di IdUOOut
997        			)return PLS_INTEGER;									-- Vale 1 se tutto è andato a buon fine, altrimenti 0
998        
999        	/**** Funzione per ottenere la lista degli indirizzi/luoghi relativi ad un dato soggetto della rubrica ****/
1000        	FUNCTION TrovaIndLuoghiSogg(
1001        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1002        																	-- (obblig). Codice identificativo del token di connessione
1003        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1004        			IdSoggRubrIO   			IN OUT   	DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,
1005        																	-- Identificativo del soggetto di rubrica di cui estrarre gli indirizzi/luoghi. Il valore in input viene considerato solo se lo è anche l'argomento successivo con la denominazione del soggetto
1006        																	-- In output, salvo in caso di errore, è sempre valorizzato
1007        			DenominazioneSoggIn		IN		DMT_RUBRICA_SOGGETTI.DENOMINAZIONE%TYPE, 	-- (obblig.) Denominazione del soggetto di rubrica di cui estrarre gli indirizzi/luoghi (viene controllata in modo esatto ma case-insensitive).
1008        			CodTipoIndLuogoIn			IN		VARCHAR2 DEFAULT NULL,				-- 1° filtro di ricerca: codice del tipo degli indirizzi/luoghi da estrarre (valori da dizionario)
1009        			FlgSoloVldIn 			IN 		INTEGER DEFAULT 1, 				-- (valori 1/0/NULL) 2° filtro di ricerca: Se 1 indica se si devono estrarre solo gli indirizzi/luoghi validi alla data odierna
1010        			TsVldIn				IN 		VARCHAR2 DEFAULT NULL,				-- 3° filtro di ricerca: Stinga con il timestamp (nel formato GG/MM/AAAA HH24:MI:SS) a cui devono essere validi gli indirizzi/luoghi
1011        			------------- inizio argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
1012        			ColOrderByIO			IN OUT	VARCHAR2,						-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso (si può ordinare per tutte le colonne tranne la 1). Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
1013        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
1014        																	-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
1015        			FlgDescOrderByIO  		IN OUT	VARCHAR2,						-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
1016        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.
1017        			FlgSenzaPaginazioneIn 		IN 		PLS_INTEGER DEFAULT NULL,            	-- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
1018        			NroPaginaIO      			IN OUT	PLS_INTEGER,                  		-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
1019           			BachSizeIO				IN OUT	PLS_INTEGER,					-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)
1020        																	-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro
1021        			OverFlowLimitIn			IN		PLS_INTEGER DEFAULT NULL,			-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow
1022        			FlgSenzaTotIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
1023        			NroTotRecOut			OUT		PLS_INTEGER,					-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina)
1024             		NroRecInPaginaOut 		OUT   	PLS_INTEGER,                     		-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
1025        			------------- fine argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
1026        			ListaXMLOut				OUT		NOCOPY CLOB,					-- Lista degli indirizzi del soggetto trovati (XML conforme a schema LISTA_STD.xsd)
1027        																			-- Ogni indirizzo è un tag Riga che può contenere le seguenti colonne:
1028        																			-- 1: Identificativo dell'indirizzo/luogo (rowid)
1029        																			-- 2: Codice del tipo di indirizzo/luogo
1030        																			-- 3: Tipo di indirizzo/luogo
1031        																			-- 4: Dettaglio del tipo
1032        																			-- 5: Cardinalità del tipo di indirizzo (basata sulla rilevanza del tipo: residenza /sede legale sono i primi)
1033        																			-- 6: Descrizione completa dell'indirizzo/luogo
1034        																			-- 7: Data di inzio validità dell'indirizzo/luogo (nel formato dato dal parametro di conf. FMT_STD_DATA)
1035        																			-- 8: Data di fine validità dell'indirizzo/luogo (nel formato dato dal parametro di conf. FMT_STD_DATA)
1036        																			-- 9: Codice identificativo toponomastico (se indirizzo censito nella toponomastica del sistema; viene considerato solo se è valorizzata anche la colonna successiva)
1037        																			-- 10: Indirizzo (senza civico) (alternativo o ridondante rispetto al campo precedente) e senza tipo toponimo se questo è separato in colonna 24 (che quindi è valorizzata)
1038        																			-- 11: N.° civico (senza eventuali appendici)
1039        																			-- 12: Interno
1040        																			-- 13: Scala
1041        																			-- 14: Piano
1042        																			-- 15: CAP
1043        																			-- 16: Frazione
1044        																			-- 17: Codice ISTAT del comune italiano (viene considerato solo se è valorizzata anche la colonna successiva)
1045        																			-- 18: Nome del comune italiano o della città (se estera)
1046        																			-- 19: Codice ISTAT dello stato (viene considerato solo se è valorizzata anche la colonna successiva)
1047        																			-- 20: Nome dello stato
1048        																			-- 21: Targa provincia
1049        																			-- 22: Zona dell'indirizzo
1050        																			-- 23: Complemento dell'indirizzo
1051        																			-- 24: Tipo toponimo (i.e. via, piazza ecc) dell'indirizzo
1052        																			-- 25: Appendici (esponente, bis/ter, colore ecc) del N.ro civico
1053        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1054        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1055        			ErrMsgOut				OUT 		VARCHAR2,					-- Messaggio d'errore
1056        			FlgCallByGUIIn			IN		PLS_INTEGER DEFAULT 1,			-- (1/0/NULL) Se 1 la stored è chiamata dalla GUI di una web application per cui gli id. dei soggetti non vengono considerati se non sono popolati anche altri campi visibili a video o se non sono congruenti con i valori dei campi stessi
1057        			RigaTagNameIn			IN		VARCHAR2 DEFAULT NULL,			-- (opzionale) Come rinominare il tag Riga dell'XML ListaXMLOut di output
1058        			ColTagNameIn			IN		DMVA_STRING DEFAULT NULL		-- (opzionale) Come rinominare i tag delle colonne in alternativa a Colonna Nro=.. nell'XML ListaXMLOut di output
1059        			)return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1060        
1061        	/*** Funzione di inserimento/aggiornamento dei dati di un indirizzo/luogo per un soggetto in rubrica*****/
1062        	FUNCTION IUIndLuogoSogg(
1063        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1064        																	-- (obblig). Codice identificativo del token di connessione
1065        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1066        			CIIndLuogoIO			IN OUT	VARCHAR2,						-- Codice (è il rowid di DB ) che identifica l'indirizzo/luogo da modificare.
1067        																	-- Se in input non è valorizzato si intende che l'indirizzo/luogo è da creare ex-novo
1068        																	-- In output, salvo in caso di errore, è sempre valorizzato
1069        			IdSoggRubrIO   			IN OUT   	DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,
1070        																	-- Identificativo del soggetto di rubrica di cui inserire/modificare l'indirizzo/luogo. E' obbligatorio se CIIndLuogoIO non è valorizzato in input.
1071        																	-- In output, salvo in caso di errore, è sempre valorizzato
1072        			CodTipoIndLuogoIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1073        																	-- (obblig.) Codice del tipo dell''indirizzo/luogo da inserire/modificare (valori da dizionario)
1074        			DettagliTipoIndLuogoIn		IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1075        																	-- Dettagli sul tipo di indirizzo/luogo
1076        			DtInizioVldIndLuogoIn		IN      	VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
1077        																	-- Data di inizio validità dell'indirizzo/luogo (in formato pari al parametro di conf. FMT_STD_DATA). Se non specificato si intende valido da sempre
1078        			DtFineVldIndLuogoIn		IN      	VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
1079        																	-- Data di fine validità dell'indirizzo/luogo (in formato pari al parametro di conf. FMT_STD_DATA). Se non specificato si intende valido illimitatamente
1080        			CIToponIndirizzoIn		IN		DMT_TOPONOMASTICA.CI_TOPONOMASTICO%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1081        																	-- Codice identificativo toponomastico dell'indirizzo (se indirizzo censito nella toponomastica del sistema; viene considerato solo se è valorizzato anche l'argomento successivo)
1082        			TipoToponimoIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1083        																	-- Tipo toponimo (i.e. via, piazza ecc) dell'indirizzo. Se non valorizzato il sistema cerca di ricavarlo dall'argomento successico IndirizzoIn (come parte prima del primo spazio)
1084        			IndirizzoIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1085        																	-- Indirizzo (senza civico) (alternativo o ridondante rispetto all'argomento precedente)
1086        																	-- Il tipo toponimo può non essere incluso se è specificato nell'argomento precedente TipoToponimoIn
1087        			CivicoIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1088        																	-- N° civico dell'indirizzo (senza appendici quali esponente, colore ecc)
1089        			AppendiciCivicoIn		IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1090        																	-- Eventuali appendici del N° civico quali esponente, colore ecc
1091        			InternoCivIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1092        																	-- Interno del civico
1093        			ScalaCivIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1094        																	-- Scala del civico
1095        			PianoIn				IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1096        																	-- Piano
1097        			CAPIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1098        																	-- CAP
1099        			LocalitaIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1100        																	-- Frazione
1101        			ZonaIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1102        																	-- Zona
1103        			ComplementoIndIn	IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1104        																	-- Eventuali dati di completamento dell'indirizzo
1105        			CodIstatComuneIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1106        																	-- Codice ISTAT del comune italiano
1107        			NomeComuneCittaIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1108        																	-- Nome del comune italiano o della città (se estera)
1109        			CodIstatStatoIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1110        																	-- Codice ISTAT dello stato
1111        			NomeStatoIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1112        																	-- Nome dello stato
1113        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1114        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1115        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1116        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1117        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1118        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
1119        			return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1120        
1121        	/*** Funzione di eliminazione di un singolo indirizzo/luogo relativo ad un soggetto della rubrica ***/
1122        	FUNCTION DIndLuogoSogg(
1123        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1124        																	-- (obblig). Codice identificativo del token di connessione
1125        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1126        			CIIndLuogoIn			IN 		VARCHAR2,						-- (obblig.) Codice (è il rowid di DB ) che identifica l'indirizzo/luogo da cancellare.
1127        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1128        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1129        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1130        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1131        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1132        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
1133        			return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1134        
1135        
1136        	/********** funzione per ricercare i gruppi/liste di distribuzione di soggetti della rubrica **********/
1137        	function TrovaGruppiSoggRubrica(
1138        			CodIdConnectionTokenIn	IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1139        																					-- (obblig). Codice identificativo del token di connessione
1140        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1141        			----------------------inizio filtri di ricerca -----------------------------------------------------------------------
1142        			NomeGruppoIn			IN		VARCHAR2 DEFAULT NULL,					-- Filtro sul nome del gruppo (ricerca case-insensitive in like)
1143        			CodRapidoGruppoIn		IN		VARCHAR2 DEFAULT NULL,					-- Filtro sul codice rapido del gruppo (ricerca case-insensitive in like)
1144        			ProvCIGruppoIn			IN		VARCHAR2 DEFAULT NULL,					-- Filtro sul codice di origine del gruppo (ricerca case-sensitive in like)
1145        			IdGruppoIn				IN		DMT_GRUPPI_SOGG_EST.ID_GRUPPO%type DEFAULT NULL,
1146        																					-- Id. di uno specifico gruppo da ricercare
1147        			FlgSoloGruppiSoggIntIn	IN		PLS_INTEGER DEFAULT NULL,				-- (valori 2/1/0/NULL) Se 2 o 1 la ricerca estrae solo i gruppi composti da almeno un soggetto interno (=1) e anche in organigramma (=2) del soggetto prod./AOO cui si è loggati, se 0 o NULL no. Se 2 il gruppo deve anche avere un corrispondente gruppo in DMT_GRUPPI
1148        			FlgIncludiNonValidiIn	IN		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se 1 la ricerca include anche i gruppi non attualmente validi, se 0 o NULL mostra solo i gruppi validi
1149        			CodApplOwnerIn			IN 		VARCHAR2 DEFAULT NULL,					-- Codice dell'applicazione che ha inserito i gruppi da ricercare. Se pari a #BY_CONN_TKN e si è connessi da un'applicazione esterna si ricercano solo i gruppi creati da quell'applicazione
1150        			CodIstApplOwnerIn		IN 		VARCHAR2 DEFAULT NULL,					-- Codice dell'istanza di applicazione che ha inserito i gruppi da ricercare. Se pari a #BY_CONN_TKN e si è connessi da un'applicazione esterna si ricercano solo i gruppi creati dall'istanza di applicazione esterna da cui si è connessi
1151        			FlgRestrApplOwnerIn		IN 		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se 1 vengono estratti solo i gruppi creati dall'applicazione (ed eventuale istanza) specificata in CodApplOwnerIn (e CodIstApplOwnerIn); se 0 o NULL e se CodApplOwnerIn è valorizzata vengono estratti solo i gruppi senza applicazione creatrice o con applicazione creatrice pari a quella specificata
1152        			------------- inizio argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
1153        			ColOrderByIO			IN OUT	VARCHAR2,								-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso (si può ordinare solo per le colonne da 1 a 10). Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
1154        																					-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
1155        																					-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
1156        			FlgDescOrderByIO  		IN OUT	VARCHAR2,								-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
1157        																					-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.
1158        			FlgSenzaPaginazioneIn 	IN 		PLS_INTEGER DEFAULT NULL,            	-- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
1159        			NroPaginaIO      		IN OUT	PLS_INTEGER,                  			-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
1160           			BachSizeIO				IN OUT	PLS_INTEGER,							-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)
1161        																					-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro
1162        			OverFlowLimitIn			IN		PLS_INTEGER DEFAULT NULL,				-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow o avvertimento
1163        			FlgSenzaTotIn			IN		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
1164        			NroTotRecOut			OUT		PLS_INTEGER,							-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina), salvo che nel caso sia stato superato il limite di overflow (warning) e allora coincide con il n.ro di record estratti che sono pari al limite di overflow
1165             		NroRecInPaginaOut 		OUT   	PLS_INTEGER,                     		-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
1166        			FlgBatchSearchIn		IN		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se 1 significa che la stored è utilizzata da un processo batch, altrimenti da un processo online.
1167        																					-- Serve affinchè in caso l'input OverFlowLimitIn non sia valorizzato vengano applicati i limiti di overflow per processo batch o online che sono parametri di configurazione
1168        			------------- fine argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
1169        			ListaXMLOut				OUT		NOCOPY CLOB,							-- Lista dei toponimi trovati (XML conforme a schema LISTA_STD.xsd)
1170        																					-- Ogni toponimo è un tag Riga che contiene le seguenti colonne:
1171        																					-- 1: Id. (PK) del gruppo
1172        																					-- 2: Cod. rapido del gruppo
1173        																					-- 3: Nome del gruppo
1174        																					-- 4: (valori E/I/O/M) Flag che indica se è un gruppo di soli soggetti interni in organigramma (=O), di soli soggetti interni all'AOO (=I), di soli soggetti esterni (=E) o misto (=M) di soggetti interni ed esterni
1175        																					-- 5: Id. dell'eventuale gruppo interno (in DMT_GRUPPI) che corrisponde al gruppo di sogg. di rubrica
1176        																					-- 6: Data inizio validità (nel formato dato dal parametro di config. FMT_STD_DATA)
1177        																					-- 7: Data fine validità (nel formato dato dal parametro di config. FMT_STD_DATA)
1178        																					-- 8: Cod. di origine del gruppo nel sistema di provenienza
1179        																					-- 9: Cod. applicazione creatrice del gruppo
1180        																					-- 10: Cod. istanza applicazione creatrice del gruppo
1181        																					-- 11: Nome dell'applicazione/istanza di applicazione creatrice del gruppo
1182        																					-- 12: (valori 1/0) Flag che indica che il soggetto è di "proprietà" dell'applicazione CodApplOwnerIn ed eventuale istanza CodIstApplOwnerIn
1183        																					-- 13: Id. utente di creazione
1184        																					-- 14: Descrizione utente di creazione
1185        																					-- 15: Timestamp di creazione
1186        																					-- 16: Id. utente di ultimo aggiornamento
1187        																					-- 17: Descrizione utente di ultimo aggiornamento
1188        																					-- 18: Timestamp di ultimo aggiornamento
1189        																					-- 19: (valori 1/0) Flag di gruppo "riservato di sistema" e non modificabile da GUI
1190        			ErrContextOut			OUT		VARCHAR2,								-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1191        			ErrCodeOut				OUT		PLS_INTEGER,							-- N.ro errore di uscita
1192        			ErrMsgOut				OUT 		VARCHAR2,							-- Messaggio d'errore
1193        			RigaTagNameIn			IN		VARCHAR2 DEFAULT NULL,					-- (opzionale) Come rinominare il tag Riga dell'XML ListaXMLOut di output
1194        			ColTagNameIn			IN		DMVA_STRING DEFAULT NULL,				-- (opzionale) Come rinominare i tag delle colonne in alternativa a Colonna Nro=.. nell'XML ListaXMLOut di output
1195        			IdGruppoToForceIn		IN		DMT_GRUPPI_SOGG_EST.ID_GRUPPO%type DEFAULT NULL,
1196        																					-- Id. di un gruppo da inserire nel resultset anche se non matcha i filtri
1197        			FlgSoloEntiIn			IN		PLS_INTEGER	DEFAULT NULL,				-- (opzionale, valori 1/0/NULL) Serve a restringere la ricerca ai soli gruppi di soggetti appartenenti ad un dato Ente (che quini rappresentano un Ente)
1198        			FinalitaIn				IN		VARCHAR2 DEFAULT NULL					-- Finalità per cui si ricercano i gruppi/liste di distibuzione
1199        																					-- Valori ammessi:
1200        																					-- ASS = Per assegnazione
1201        			)return PLS_INTEGER;													-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1202        
1203        	/****************** funzione per creare o modificare un gruppo di soggetti della rubrica ****************/
1204        	function IUGruppoSoggRubrica(
1205        			CodIdConnectionTokenIn	IN	    DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1206        																					-- (obblig). Codice identificativo del token di connessione
1207        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1208        			IdGruppoIO				IN OUT	DMT_GRUPPI_SOGG_EST.ID_GRUPPO%type,		-- Id. del gruppo da modificare. Se NULL si intende che il gruppo è da creare ex-novo
1209        																					-- in output, salvo in caso di errore, è sempre valorizzato
1210        			NomeGruppoIn			IN 		DMT_GRUPPI_SOGG_EST.NOME_GRUPPO%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1211        																					-- (obblig.) Nome del gruppo
1212        			CodRapidoIn				IN 		DMT_GRUPPI_SOGG_EST.COD_RAPIDO%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1213        																					-- Codice rapido del gruppo
1214        			CIProvGruppoIn			IN 		DMT_GRUPPI_SOGG_EST.PROV_CI_GRUPPO%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1215        																					-- Codice identificativo del gruppo nel sistema di provenienza
1216        			DtInizioVldIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
1217        																					-- Data di decorrenza della validità del gruppo (nel formato dato dal parametro di conf. FMT_STD_DATA)
1218        																					-- Se non specificata si intende valido da sempre
1219        			DtFineVldIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
1220        																					-- Data di fine della validità del gruppo (nel formato dato dal parametro di conf. FMT_STD_DATA)
1221        																					-- Se non specificata si intende valido illimitatatamente
1222        			FlgLockedIn				IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1223        																					-- (valori 1/0/NULL) Indicatore di gruppo riservato dal sistema e non modificabile/cancellabile da GUI
1224        			FlgModMembriIn			IN		VARCHAR2 DEFAULT 'I',					-- (valori I/C) Indica se i membri dle gruppo indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da inserire/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già inclusi nel gruppo da aggiornare
1225        			XMLMembriIn				IN		CLOB DEFAULT NULL,						-- Lista con i membri - sogg. della rubrica o altri gruppi - del gruppo da modificare (XML conforme a schema LISTA_STD.xsd)
1226        																					-- 1: (obblig.) Tipo di membro. Valori possibili: S = Soggetto rubrica; G = Gruppo
1227        																					-- 2: Id. del soggetto rubrica o gruppo membro
1228        																					-- 3: Cod. rapido del soggetto rubrica o gruppo membro
1229        																					-- 4: Denominazione / nome del soggetto rubrica o gruppo membro
1230        																					-- 5: Cod. fiscale del soggetto rubrica membro
1231        																					-- 6: (valori 1/0/NULL) Flag di membro da eliminare
1232        			AttributiAddIn			IN		CLOB DEFAULT NULL,						-- XML contenente nomi e valori degli attributi dinamici da aggiornare (conforme allo schema SezioneCache.xsd)
1233        																					-- Gli attributi già presenti in DB e per i quali non c'è corrispondente nell'XML restano invariati
1234        																					-- Per tutti gli attributi vale quanto segue:
1235        																					-- Un attributo da settare è un tag "Variabile" dell'XML il cui tag "Nome" contiene il nome identificativo dell'attributo (ATTR_NAME di DMT_ATTRIBUTES_DEF)
1236        																					-- Un attributo da settare è una variabile con tag "ValoreSemplice" se è un attributo a singolo valore e non strutturato (cioè con tipo diverso da COMPLEX)
1237        																					-- altrimenti è una variabile con tag "Lista" che ha un'unica colonna con "Nro" pari a 1 se l'attributo non è strutturato, che ha invece tante colonne quanti gli attributi componenti (ordinate in base al loro NRO_ORD_IN_SUP) se l'attributo è complesso
1238        																					-- Nel caso di variabili con tag "Lista" i valori specificati nell'XML si aggiungono o sostituiscono quelli già presenti in DB a seconda che nell'XML sia presente o meno una variabile con tag "Nome" pari a #Append_<Nome attributo> e tag "ValoreSemplice" pari a 1
1239        																					-- In particolare se non sono specificati valori nell'XML (tag Lista vuoto) e se i valori non sono da aggiungere significa che tutti i valori dell'attributo già presenti in DB vanno rimossi
1240        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1241        																					-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1242        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1243        			ErrContextOut			OUT		VARCHAR2,								-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1244        			ErrCodeOut				OUT		PLS_INTEGER,							-- N.ro errore di uscita
1245        			ErrMsgOut				OUT 		VARCHAR2,							-- Messaggio d'errore
1246        			CallingFuncIn			IN			VARCHAR2 DEFAULT NULL				-- Funzione chiamante
1247        			) return PLS_INTEGER;													-- Vale 1 se tutto è andato a buon fine, altrimenti 0 (in caso di errore)
1248        
1249        
1250        	/*** Funzione di eliminazione di un gruppo di soggetti della rubrica										***/
1251        	/*** Si può specificare se l'eliminazione deve essere fisica o solo logica (i.e. cessazione di validità)	***/
1252        	/*** Se non lo si specifica il sistema fa quella fisica se possibile, se no quella logica					***/
1253        	function DGruppoSoggRubrica(
1254        			CodIdConnectionTokenIn	IN	    DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1255        																					-- (obblig). Codice identificativo del token di connessione
1256        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1257        			IdGruppoIn				IN 		DMT_GRUPPI_SOGG_EST.ID_GRUPPO%type,		-- (obblig. se NomeGruppoIn non è valorizzato) Id. del gruppo da cancellare/cessare
1258        			NomeGruppoIn			IN 		DMT_GRUPPI_SOGG_EST.NOME_GRUPPO%type DEFAULT NULL,
1259        																					-- (obblig. se IdGruppoIn non è valorizzato) Nome del gruppo da eliminare.
1260        			FlgCancFisicaIn			IN		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL): Se 1 si richiede la cancellazione fisica; se 0 la cessazione di validità; se non è valorizzato quella possibile delle 2.
1261        			MotiviIn				IN		DMT_ACTIVITIES.NOTE%type,				-- Motivi della cancellazione/cessazione di validità
1262        			FlgRollBckFullIn		IN 		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1263        																					-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1264        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1265        			ErrContextOut			OUT		VARCHAR2,								-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1266        			ErrCodeOut				OUT		PLS_INTEGER,							-- N.ro errore di uscita
1267        			ErrMsgOut				OUT 		VARCHAR2,							-- Messaggio d'errore
1268        			CallingFuncIn			IN			VARCHAR2 DEFAULT NULL				-- Funzione chiamante
1269        			) return PLS_INTEGER;													-- Vale 1 se tutto è andato a buon fine, altrimenti 0 (in caso di errore)
1270        
1271        	/****************** funzione per caricare il dettaglio di un gruppo di soggetti della rubrica ****************/
1272        	function LoadDettGruppoSoggRubrica(
1273        			CodIdConnectionTokenIn	IN	    DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1274        																					-- (obblig). Codice identificativo del token di connessione
1275        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1276        			IdGruppoIO				IN OUT	DMT_GRUPPI_SOGG_EST.ID_GRUPPO%type,		-- (obblig.)Id. del gruppo di cui caricare il dettaglio
1277        			NomeGruppoOut			OUT 	DMT_GRUPPI_SOGG_EST.NOME_GRUPPO%type,
1278        																					-- Nome del gruppo
1279        			CodRapidoOut			OUT 	DMT_GRUPPI_SOGG_EST.COD_RAPIDO%TYPE,	-- Codice rapido del gruppo
1280        			CIProvGruppoOut			OUT		DMT_GRUPPI_SOGG_EST.PROV_CI_GRUPPO%TYPE,-- Codice identificativo del gruppo nel sistema di provenienza
1281        			DtInizioVldOut			OUT		VARCHAR2,								-- Data di decorrenza della validità del gruppo (nel formato dato dal parametro di conf. FMT_STD_DATA)
1282        			DtFineVldOut			OUT		VARCHAR2,								-- Data di fine della validità del gruppo (nel formato dato dal parametro di conf. FMT_STD_DATA)
1283        			FlgLockedOut			OUT		PLS_INTEGER,							-- (valori 1/0) Indicatore di gruppo riservato dal sistema e non modificabile/cancellabile da GUI
1284        			IdGruppoIntOut			OUT		DMT_GRUPPI_SOGG_EST.ID_GRUPPO_INT%type,	-- Id. dell'eventuale gruppo interno che corrisponde al gruppo rubrica
1285        			FlgGruppoInternoOut		OUT		PLS_INTEGER,							-- (valori 1/0) Se 1 indica che è un gruppo di soli soggetti interni all'AOO
1286        			RowidOut				OUT		VARCHAR2,								-- Rowid del record del gruppo
1287        			XMLMembriOut			OUT		NOCOPY CLOB,							-- Lista con i membri - sogg. della rubrica o altri gruppi - del gruppo (XML conforme a schema LISTA_STD.xsd)
1288        																					-- 1: Tipo di membro. Valori possibili: S = Soggetto rubrica; G = Gruppo
1289        																					-- 2: Id. del soggetto rubrica o gruppo membro
1290        																					-- 3: Cod. rapido del soggetto rubrica o gruppo membro
1291        																					-- 4: Denominazione / nome del soggetto rubrica o gruppo membro
1292        																					-- 5: Cod. fiscale del soggetto rubrica membro
1293        																					-- 6: non utilizzata
1294        																					-- 7: Codice della categoria di soggetto (per membro che è soggetto della rubrica): #APA=Altra PA, #IAMM= MDG, #AF = Altro (Pers. fisica), #AG=Altro (Pers. giuridica), UO;UOI= U.O./Ufficio interno, UP=Unità di persoanle
1295        																					-- 8: Flag 1/0 che indica se soggetto in organigramma
1296        			AttributiAddOut			OUT		NOCOPY CLOB,							-- Lista degli eventuali ulteriori attributi con cui caratterizzare il gruppo(XML conforme a schema LISTA_STD.xsd)
1297        																					-- Ogni attributo è un tag "Riga" che contiene le seguenti colonne:
1298        																					-- 1: N.ro (valori da 1 a n) del riquadro (fieldset) in cui mostrare l'attributo
1299        																					-- 2: Nome identificativo dell'attributo (ATTR_NAME)
1300        																					-- 3: Label del campo con cui rappresentare l'attributo
1301        																					-- 4: Tipo di attributo. Valori: DATE, DATETIME, TEXT, TEXT-AREA, CHECK, INTEGER, EURO, DECIMAL, COMBO-BOX, LISTA
1302        																					-- 5: N.ro massimo di caratteri/cifre
1303        																					-- 6: Larghezza del campo con cui rappresentare l'attributo (size)
1304        																					-- 7: Valore dell'attributo
1305        																					-- 8: Label del riquadro (fieldset) in cui mostrare l'attributo
1306        																					-- 9: (valori 1/0) 1 indica che l'attributo è obbligatorio, 0 che è facoltativo
1307        																					-- 10: Altezza (in nro righe) del campo con cui rappresentare l'attributo (se TEXT-AREA)
1308        																					-- 11:(valori 1/0) 1 indica se l'attributo è modificabile, 0 che è in sola visualizzazione
1309        			FlgMostraAltriAttrOut	OUT		PLS_INTEGER,							-- (valori 1/0) Se 1 nella GUI vanno mostrati gli attributi addizionali (ce ne sono di visibile all'utente), se 0 no
1310        			ErrContextOut			OUT		VARCHAR2,								-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1311        			ErrCodeOut				OUT		PLS_INTEGER,							-- N.ro errore di uscita
1312        			ErrMsgOut				OUT 		VARCHAR2							-- Messaggio d'errore
1313        			) return PLS_INTEGER;													-- Vale 1 se tutto è andato a buon fine, altrimenti 0 (in caso di errore)
1314        
1315        	/***** Funzione per inserire o aggiornare un cliente (e il corrispondente soggetto in rubrica) *****/
1316        	function IUCliente(
1317        			CodIdConnectionTokenIn	IN	    DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1318        																	-- (obblig). Codice identificativo del token di connessione
1319        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,
1320        																	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1321        			IdClienteIO				IN OUT	DMT_CLIENTI.ID_CLIENTE%type,
1322        																	-- Id. del cliente. Se null in input è un cliente da registrare ex-novo
1323        																	-- In output è sempre valorizzato salvo in caso di errore
1324        			IdSoggRubrIO   			IN OUT  DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,
1325        																	-- Identificativo del soggetto di rubrica che corrisponde al cliente
1326        																	-- In output, salvo in caso di errore, è sempre valorizzato
1327        			FlgPersonaFisicaIn		IN		NUMBER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1328        																	-- (valori 1/0/NULL) Se 1 il soggetto è una persona fisica, altrimenti giuridica
1329        			DenomCognomeIn			IN		DMT_RUBRICA_SOGGETTI.DENOMINAZIONE%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1330        																	-- (obblig.) Denominazione (se persona giuridica) o cognome (se persona fisica)
1331        			NomeIn					IN		DMT_RUBRICA_SOGGETTI.NOME%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1332        																	-- (obblig. se persona fisica) Nome
1333        			CFIn					IN 		DMT_RUBRICA_SOGGETTI.CF%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1334        																	-- Codice fiscale del soggetto
1335          			PIVAIn					IN 		DMT_RUBRICA_SOGGETTI.PIVA%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1336        																	-- Partita IVA del soggetto
1337        			CodTipoSottoTipoIn		IN 		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1338        																	-- Codice del tipo ed eventuale sottotipo di soggetto (se si indica il sottotipo il suo codice va separato con ";" da quello del tipo)
1339        			CodCondGiuridicaIn		IN		DMT_RUBRICA_SOGGETTI.COD_COND_GIURIDICA%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1340        																	-- Codice della condizione giuridica (valori da dizionario)
1341        			DtNascitaIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
1342        																	-- Data di nascita/istituzione (nel formato dato dal parametro di conf. FMT_STD_DATA).
1343        			CodIstatComuneNascIn	IN		DMT_RUBRICA_SOGGETTI.COD_ISTAT_COMUNE_NASC%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1344        																	-- Codice ISTAT del comune italiano di nascita/istituzione
1345        			NomeComuneNascIn		IN		DMT_COMUNI_ITALIANI.NOME_COMUNE%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1346        																	-- Nome del comune italiano o estero di nascita/istituzione
1347        			CodIstatStatoNascIn		IN		DMT_RUBRICA_SOGGETTI.COD_ISTAT_STATO_NASC%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1348        																	-- Codice ISTAT dello stato di nascita/istituzione
1349        			NomeStatoNascIn			IN		DMT_STATI_NAZIONALI.NOME_STATO%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1350        																	-- Nome dello stato di nascita/istituzione
1351        			DtCessazioneIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
1352        																	-- Data di cessazione/morte (nel formato dato dal parametro di conf. FMT_STD_DATA).
1353        			CodCausaleCessazioneIn	IN		DMT_RUBRICA_SOGGETTI.COD_CAUS_CESSAZIONE%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1354        																	-- Codice della causa di cessazione/morte (valori da dizionario)
1355        			FlgSexIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1356        																	-- (valori M/F) Flag del sesso (per persona fisica)
1357        			CodIstatStatoCittIn		IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1358        																	-- Codice ISTAT dello stato di cittadinanza (per persona fisica)
1359        			NomeStatoCittIn			IN		DMT_STATI_NAZIONALI.NOME_STATO%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1360        																	-- Nome dello stato di cittadinanza (per persona fisica)
1361        			TitoloIn				IN		DMT_RUBRICA_SOGGETTI.TITOLO%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1362        																	-- Titolo (per persona fisica)
1363        			CodIndPAIn				IN		DMT_RUBRICA_SOGGETTI.COD_INDPA%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1364        																	-- Codice con cui il soggetto (se PA, AOO o UO ) è registrato nell'indice PA
1365        			CodAmmIPAIn				IN		DMT_RUBRICA_SOGGETTI.COD_AMM_IPA%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1366        																	-- Codice Amministrazione su Indice PA del soggetto (se PA) o dell'Amministrazione di appartenenza del soggetto (se AOO/UO)
1367        			CodAOOIPAIn				IN		DMT_RUBRICA_SOGGETTI.COD_AOO_IPA%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1368        																	-- Codice AOO su Indice PA del soggetto (se Area Organizzativa Omogenea) o dell'AOO di appartenenza del soggetto (se UO)
1369        			IdSoggAppIn				IN		DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1370        																	-- Identificativo del soggetto di rubrica cui appartiene il soggetto da creare/modificare (appartenenza diretta)
1371        																	-- Se non specificato può essere comunque settato se ricavabile da CodAmmIPAIn e/o CodAOOIPAIn
1372        			CIProvSoggIn			IN 		DMT_RUBRICA_SOGGETTI.PROV_CI_SOGG%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1373        																	-- Codice identificativo del soggetto nel sistema di provenienza (ad esempio l'anagrafe residenti/ditte)
1374        			CIProvClienteIn			IN 		DMT_CLIENTI.PROV_CI_CLIENTE%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1375        																	-- Codice identificativo del cliente nel sistema di provenienza (ad esempio l'anagrafe clienti nel sistema contabile)
1376        			UsernameIn				IN		DMT_RUBRICA_SOGGETTI.USERNAME%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1377        																	-- Username con cui il soggetto può accedere al sistema
1378        			PasswordIn				IN		DMT_RUBRICA_SOGGETTI.PASSWORD%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1379        																	-- Password con cui il soggetto può accedere al sistema
1380        			CodRapidoIn				IN		DMT_RUBRICA_SOGGETTI.COD_RAPIDO%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1381        																	-- Codice rapido che identifica il soggetto (univoco tra quelli dei soggetti visibili dallo stesso dominio)
1382        			FlgLockedIn				IN		NUMBER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1383        																	-- (valori 1/0/NULL) Indicatore di soggetto riservato dal sistema e non modificabile/cancellabile da GUI
1384        			FlgModIndirizziIn		IN		VARCHAR2 DEFAULT 'I',	-- (valori I/C) Indica se gli indirizzi del soggetto indicate nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelle da inserire/modificare/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutti gli indirizzi NON storici già specificati in caso di soggetto da aggiornare
1385        			XMLIndirizziIn			IN		CLOB DEFAULT NULL,		-- Lista degli indirizzi (tranne quelli cessati) del soggetto (XML conforme a schema LISTA_STD.xsd)
1386        																			-- Ogni indirizzo è un tag Riga che può contenere le seguenti colonne:
1387        																			-- 1: Identificativo dell'indirizzo/luogo (rowid)
1388        																			-- 2: Codice del tipo di indirizzo/luogo
1389        																			-- 3: Tipo di indirizzo/luogo
1390        																			-- 4: Dettaglio del tipo
1391        																			-- 5: <non utilizzata>
1392        																			-- 6: <non utilizzata>
1393        																			-- 7: Data di inzio validità dell'indirizzo/luogo (nel formato dato dal parametro di conf. FMT_STD_DATA)
1394        																			-- 8: Data di fine validità dell'indirizzo/luogo (nel formato dato dal parametro di conf. FMT_STD_DATA)
1395        																			-- 9: Codice identificativo toponomastico (se indirizzo censito nella toponomastica del sistema; viene considerato solo se è valorizzata anche la colonna successiva)
1396        																			-- 10: Indirizzo (senza civico) (alternativo o ridondante rispetto al campo precedente) e senza tipo toponimo se questo è separato in colonna 24 (che quindi è valorizzata)
1397        																			-- 11: N.° civico (senza eventuali appendici)
1398        																			-- 12: Interno
1399        																			-- 13: Scala
1400        																			-- 14: Piano
1401        																			-- 15: CAP
1402        																			-- 16: Frazione
1403        																			-- 17: Codice ISTAT del comune italiano (viene considerato solo se è valorizzata anche la colonna successiva)
1404        																			-- 18: Nome del comune italiano o della città (se estera)
1405        																			-- 19: Codice ISTAT dello stato (viene considerato solo se è valorizzata anche la colonna successiva)
1406        																			-- 20: Nome dello stato
1407        																			-- 21: Targa provincia
1408        																			-- 22: Zona dell'indirizzo
1409        																			-- 23: Complemento dell'indirizzo
1410        																			-- 24: Tipo toponimo (i.e. via, piazza ecc) dell'indirizzo
1411        																			-- 25: Appendici (esponente, bis/ter, colore ecc) del N.ro civico
1412        																			-- 26: (valori 1/0/NULL) Flag di indirizzo da eliminare
1413        			FlgModAltreDenomIn		IN		VARCHAR2 DEFAULT 'I',	-- (valori I/C) Indica se le denominazioni alternative del soggetto indicate nell'argomento successivo sono fornite in modo incrementale (=I) (solo quelle da inserire/modificare/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutte quelle già specificate in caso di soggetto da aggiornare
1414        			XMLAltreDenominazioniIn	IN		CLOB DEFAULT NULL,		-- Lista con le denominazioni alternative, correlate ecc. del soggetto (XML conforme a schema LISTA_STD.xsd)
1415        																	-- Ogni denominazione è un tag "Riga" che può contenere le seguenti colonne:
1416        																	-- 1: Identificativo (ROWID) con cui la denominazione è già stata registrata in banca dati
1417        																	-- 2: Tipo di denominazione (parallela, correlata, pseudonimo)
1418        																	-- 3: Denominazione
1419        																	-- 4: (valori 1/0/NULL) Flag di denominazione da eliminare
1420        			FlgModContattiIn		IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se i contatti (rif. telefonici, fax, e-mail) del soggetto indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da inserire/modificare/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già specificati in caso di soggetto da aggiornare
1421        			XMLContattiIn			IN		CLOB DEFAULT NULL,				-- Lista con i contatti (rif. telefonici, fax, e-mail) del soggetto (XML conforme a schema LISTA_STD.xsd)
1422        																	-- Ogni contatto è tag "Riga" che può contenere le seguenti colonne:
1423        																	-- 1: Identificativo (ROWID preceduto da Tipo - T/F/E) con cui il contatto è già stata registrato in banca dati
1424        																	-- 2: (obblig.) Flag che indica il tipo di contatto. Valori possibili: T=Telefono; F=Fax; E=e-Mail
1425        																	-- 3: N.ro di telefono/fax o indirizzo e-mail
1426        																	-- 4: Tipo di numero di telefono (abitazione, ufficio, cell. ecc.) Valori da apposita dictionary entry
1427        																	-- 5: (valori 1/0/NULL) Flag di indirizzo e-mail di Posta Elettronica Certificata
1428        																	-- 6: (valori 1/0/NULL) Flag di indirizzo e-mail dichiarato all'Indice PA
1429        																	-- 7: (valori 1/0/NULL) Flag di indirizzo e-mail che è Casella Istituzionale di una PA
1430        																	-- 8: Estremi del gestore della casella se è di Posta Elettronica Certificata
1431        																	-- 9: (valori 1/0/NULL) Flag di contatto da eliminare
1432        			FlgModGruppiAppIn		IN		VARCHAR2 DEFAULT 'I',	-- (valori I/C) Indica se i gruppi di appartenenza indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da inserire/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già associati al modello da aggiornare
1433        			XMLGruppiAppIn			IN		CLOB DEFAULT NULL,		-- Lista con i gruppi di appartenenza del soggetto (solo quelli visibili nel dominio cui si è loggati)(XML conforme a schema LISTA_STD.xsd)
1434        																	-- Ogni gruppo è un tag "Riga" che può contenere le seguenti colonne:
1435        																	-- 1: Identificativo del gruppo
1436        																	-- 2: Codice rapido del gruppo
1437        																	-- 3: Nome del gruppo
1438        																	-- 4: (valori 1/0/NULL) Flag di tipo di gruppo da eliminare
1439        			AttributiAddIn			IN		CLOB DEFAULT NULL,		-- Attributi addizionali del cliente (memorizzati in DMT_CLIENTI.ALTRI_ATTRIBUTI): XML contenente nomi e valori degli attributi dinamici da aggiornare (conforme allo schema SezioneCache.xsd)
1440        																	-- Gli attributi già presenti in DB e per i quali non c'è corrispondente nell'XML restano invariati
1441        																	-- Per tutti gli attributi vale quanto segue:
1442        																	-- Un attributo da settare è un tag "Variabile" dell'XML il cui tag "Nome" contiene il nome identificativo dell'attributo (ATTR_NAME di DMT_ATTRIBUTES_DEF)
1443        																	-- Un attributo da settare è una variabile con tag "ValoreSemplice" se è un attributo a singolo valore e non strutturato (cioè con tipo diverso da COMPLEX)
1444        																	-- altrimenti è una variabile con tag "Lista" che ha un'unica colonna con "Nro" pari a 1 se l'attributo non è strutturato, che ha invece tante colonne quanti gli attributi componenti (ordinate in base al loro NRO_ORD_IN_SUP) se l'attributo è complesso
1445        																	-- Nel caso di variabili con tag "Lista" i valori specificati nell'XML si aggiungono o sostituiscono quelli già presenti in DB a seconda che nell'XML sia presente o meno una variabile con tag "Nome" pari a #Append_<Nome attributo> e tag "ValoreSemplice" pari a 1
1446        																	-- In particolare se non sono specificati valori nell'XML (tag Lista vuoto) e se i valori non sono da aggiungere significa che tutti i valori dell'attributo già presenti in DB vanno rimossi
1447        			FlgIgnoreWarningIn 		IN 		PLS_INTEGER DEFAULT NULL,		-- (valori 1/0/NULL) Se 0 o NULL significa che in presenza di WARNING la stored si comporta come in caso di errore; se 1 gli WARNING vengono ignorati
1448        			FlgRollBckFullIn		IN 		PLS_INTEGER DEFAULT NULL,		-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1449        																			-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1450        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,		-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1451        			WarningMsgOut			OUT		VARCHAR2,						-- Messaggio di warning (valorizzato solo se non c'è errore)
1452        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1453        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1454        			ErrMsgOut				OUT 		VARCHAR2					-- Messaggio d'errore
1455        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
1456        
1457        	/*** Funzione di eliminazione di un cliente dall'anagrafica clienti 							***/
1458        	/*** Si può specificare se l'eliminazione deve essere fisica o solo logica (annullamento)		***/
1459        	/*** Se non lo si specifica il sistema fa quella fisica se possibile, se no quella logica		***/
1460        	function DCliente(
1461        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1462        																				-- (obblig). Codice identificativo del token di connessione
1463        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1464        			IdClienteIn   			IN 		DMT_CLIENTI.ID_CLIENTE%TYPE,		-- (obblig.)Identificativo del cliente
1465        			FlgCancFisicaIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL): Se 1 si richiede la cancellazione fisica; se 0 l'annullamento logico; se non è valorizzato quella possibile delle 2.
1466        			MotiviIn				IN		DMT_RUBRICA_SOGGETTI.MOTIVI_ANN%type,	-- Motivi della cancellazione/annullamento
1467        			FlgIgnoreWarningIn 		IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 0 o NULL significa che in presenza di WARNING la stored si comporta come in caso di errore; se 1 gli WARNING vengono ignorati
1468        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,		-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1469        																				-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1470        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1471        			WarningMsgOut			OUT		VARCHAR2,							-- Messaggio di warning (valorizzato solo se non c'è errore)
1472        			ErrContextOut			OUT		VARCHAR2,							-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1473        			ErrCodeOut				OUT		PLS_INTEGER,						-- N.ro errore di uscita
1474        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
1475        			) return PLS_INTEGER;												-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
1476        
1477        	/**** Funzione per estrarre i dati di un cliente ****/
1478        	FUNCTION LoadDettCliente(
1479        			CodIdConnectionTokenIn	IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1480        																	-- (obblig). Codice identificativo del token di connessione
1481        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1482        			IdClienteIO				IN OUT	DMT_CLIENTI.ID_CLIENTE%type,			-- (obblig.) Id. del cliente di cui recuperare i dati
1483        			IdSoggRubrOut   		OUT	DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,	-- Identificativo del soggetto di rubrica che corrisponde al cliente
1484        			FlgPersonaFisicaOut		OUT		DMT_RUBRICA_SOGGETTI.FLG_PERSONA_FISICA%type,
1485        																	-- (valori 1/NULL) Se 1 il soggetto è una persona fisica, altrimenti giuridica
1486        			DenomCognomeOut			OUT		DMT_RUBRICA_SOGGETTI.DENOMINAZIONE%TYPE,  -- Denominazione (se persona giuridica) o cognome (se persona fisica)
1487        			NomeOut					OUT		DMT_RUBRICA_SOGGETTI.NOME%TYPE,		-- Nome (se persona fisica)
1488        			CFOut					OUT 		DMT_RUBRICA_SOGGETTI.CF%TYPE,			-- Codice fiscale del soggetto
1489          			PIVAOut					OUT 		DMT_RUBRICA_SOGGETTI.PIVA%TYPE,		-- Partita IVA del soggetto
1490        			CodTipoSottoTipoOut		OUT 		VARCHAR2,						-- Codice del tipo ed eventuale sottotipo di soggetto (se si indica il sottotipo il suo codice viene separato con ";" da quello del tipo)
1491        			CodCondGiuridicaOut		OUT		DMT_RUBRICA_SOGGETTI.COD_COND_GIURIDICA%type,
1492        																	-- Codice della condizione giuridica
1493        			DtNascitaOut			OUT		VARCHAR2,						-- Data di nascita/istituzione (nel formato dato dal parametro di conf. FMT_STD_DATA).
1494        			CodIstatComuneNascOut		OUT		DMT_RUBRICA_SOGGETTI.COD_ISTAT_COMUNE_NASC%type,
1495        																	-- Codice ISTAT del comune italiano di nascita/istituzione
1496        			NomeComuneNascOut			OUT		DMT_COMUNI_ITALIANI.NOME_COMUNE%type,	-- Nome del comune italiano o estero di nascita/istituzione
1497        			TargaProvNascOut			OUT		DMT_COMUNI_ITALIANI.TARGA_PROV%type,	-- Targa della provincia di nascita
1498        			CodIstatStatoNascOut		OUT		DMT_RUBRICA_SOGGETTI.COD_ISTAT_STATO_NASC%type,
1499        																	-- Codice ISTAT dello stato di nascita/istituzione
1500        			NomeStatoNascOut			OUT		DMT_STATI_NAZIONALI.NOME_STATO%type,	-- Nome dello stato di nascita/istituzione
1501        			DtCessazioneOut			OUT		VARCHAR2,						-- Data di cessazione/morte (nel formato dato dal parametro di conf. FMT_STD_DATA).
1502        			CodCausaleCessazioneOut		OUT		DMT_RUBRICA_SOGGETTI.COD_CAUS_CESSAZIONE%type,
1503        																	-- Codice della causa di cessazione/morte
1504        			FlgSexOut				OUT		DMT_RUBRICA_SOGGETTI.FLG_SEX%TYPE,		-- (valori M/F) Flag del sesso (per persona fisica)
1505        			CodIstatStatoCittOut		OUT		DMT_RUBRICA_SOGGETTI.COD_ISTAT_STATO_NASC%type,
1506        																	-- Codice ISTAT dello stato di cittadinanza (per persona fisica)
1507        			NomeStatoCittOut			OUT		DMT_STATI_NAZIONALI.NOME_STATO%type,	-- Nome dello stato di cittadinanza (per persona fisica)
1508        			TitoloOut				OUT		DMT_RUBRICA_SOGGETTI.TITOLO%type,		-- Titolo (per persona fisica)
1509        			CodIndPAOut				OUT		DMT_RUBRICA_SOGGETTI.COD_INDPA%type,	-- Codice con cui il soggetto (se PA, AOO o UO ) è registrato nell'indice PA
1510        			CodAmmIPAOut			OUT		DMT_RUBRICA_SOGGETTI.COD_AMM_IPA%type,
1511        																	-- Codice Amministrazione su Indice PA del soggetto (se PA) o dell'Amministrazione di appartenenza del soggetto (se AOO/UO)
1512        			CodAOOIPAOut			OUT		DMT_RUBRICA_SOGGETTI.COD_AOO_IPA%type,
1513        																	-- Codice AOO su Indice PA del soggetto (se Area Organizzativa Omogenea) o dell'AOO di appartenenza del soggetto (se UO)
1514        			IdSoggAppOut			OUT		DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,
1515        																	-- Identificativo del soggetto di rubrica cui appartiene il soggetto da creare/modificare (appartenenza diretta)
1516        			CIProvSoggOut			OUT 	DMT_RUBRICA_SOGGETTI.PROV_CI_SOGG%TYPE,	-- Codice identificativo del soggetto nel sistema di provenienza (ad esempio l'anagrafe residenti/ditte)
1517        			CIProvClienteOut		OUT		DMT_CLIENTI.PROV_CI_CLIENTE%TYPE,		-- Codice identificativo del cliente nel sistema di provenienza (ad esempio l'anagrafe clienti nel sistema contabile)
1518        			UsernameOut				OUT		DMT_RUBRICA_SOGGETTI.USERNAME%TYPE,		-- Username con cui il soggetto può accedere al sistema
1519        			CodRapidoOut			OUT		DMT_RUBRICA_SOGGETTI.COD_RAPIDO%TYPE,   -- Codice rapido che identifica il soggetto
1520        			FlgLockedOut			OUT		DMT_RUBRICA_SOGGETTI.FLG_LOCKED%type,	-- (valori 1/NULL) Indicatore di soggetto riservato dal sistema e non modificabile/cancellabile da GUI
1521        			RowidOut				OUT		VARCHAR2,						-- Rowid del record del soggetto
1522        			IndirizziOut		OUT		NOCOPY CLOB,						-- Lista degli indirizzi del soggetto (XML conforme a schema LISTA_STD.xsd)
1523        																			-- Ogni indirizzo è un tag Riga che può contenere le seguenti colonne:
1524        																			-- 1: Identificativo dell'indirizzo/luogo (rowid)
1525        																			-- 2: Codice del tipo di indirizzo/luogo
1526        																			-- 3: Tipo di indirizzo/luogo
1527        																			-- 4: Dettaglio del tipo
1528        																			-- 5: Cardinalità del tipo di indirizzo (basata sulla rilevanza del tipo: residenza /sede legale sono i primi)
1529        																			-- 6: Descrizione completa dell'indirizzo/luogo
1530        																			-- 7: Data di inzio validità dell'indirizzo/luogo (nel formato dato dal parametro di conf. FMT_STD_DATA)
1531        																			-- 8: Data di fine validità dell'indirizzo/luogo (nel formato dato dal parametro di conf. FMT_STD_DATA)
1532        																			-- 9: Codice identificativo toponomastico (se indirizzo censito nella toponomastica del sistema; viene considerato solo se è valorizzata anche la colonna successiva)
1533        																			-- 10: Indirizzo (senza civico) (alternativo o ridondante rispetto al campo precedente) e senza tipo toponimo se questo è separato in colonna 24 (che quindi è valorizzata)
1534        																			-- 11: N.° civico (senza eventuali appendici)
1535        																			-- 12: Interno
1536        																			-- 13: Scala
1537        																			-- 14: Piano
1538        																			-- 15: CAP
1539        																			-- 16: Frazione
1540        																			-- 17: Codice ISTAT del comune italiano (viene considerato solo se è valorizzata anche la colonna successiva)
1541        																			-- 18: Nome del comune italiano o della città (se estera)
1542        																			-- 19: Codice ISTAT dello stato (viene considerato solo se è valorizzata anche la colonna successiva)
1543        																			-- 20: Nome dello stato
1544        																			-- 21: Targa provincia
1545        																			-- 22: Zona dell'indirizzo
1546        																			-- 23: Complemento dell'indirizzo
1547        																			-- 24: Tipo toponimo (i.e. via, piazza ecc) dell'indirizzo
1548        																			-- 25: Appendici (esponente, bis/ter, colore ecc) del N.ro civico
1549        			XMLAltreDenominazioniOut	OUT		NOCOPY CLOB,		-- Lista con le denominazioni alternative, correlate ecc. del soggetto (XML conforme a schema LISTA_STD.xsd)
1550        																	-- Ogni denominazione è un tag "Riga" che contiene le seguenti colonne:
1551        																	-- 1: Identificativo (ROWID) con cui la denominazione è già stata registrata in banca dati
1552        																	-- 2: Tipo di denominazione (decodifica) (parallela, correlata, pseudonimo ecc.)
1553        																	-- 3: Denominazione
1554        			XMLContattiOut			OUT		NOCOPY CLOB,			-- Lista con i contatti (rif. telefonici, fax, e-mail) del soggetto (XML conforme a schema LISTA_STD.xsd)
1555        																	-- Ogni contatto è tag "Riga" che contiene le seguenti colonne:
1556        																	-- 1: Identificativo (ROWID preceduto da Tipo - T/F/E) con cui il contatto è già stata registrato in banca dati
1557        																	-- 2: Flag che indica il tipo di contatto. Valori possibili: T=Telefono; F=Fax; E=e-Mail
1558        																	-- 3: N.ro di telefono/fax o indirizzo e-mail
1559        																	-- 4: Tipo di numero di telefono (abitazione, ufficio, cell. ecc.) Valori da apposita dictionary entry
1560        																	-- 5: (valori 1/0) Flag di indirizzo e-mail di Posta Elettronica Certificata
1561        																	-- 6: (valori 1/0) Flag di indirizzo e-mail dichiarato all'Indice PA
1562        																	-- 7: (valori 1/0) Flag di indirizzo e-mail che è Casella Istituzionale di una PA
1563        																	-- 8: Estremi del gestore della casella se è di Posta Elettronica Certificata
1564        			XMLGruppiAppOut			OUT		NOCOPY CLOB,			-- Lista con i gruppi di appartenenza del soggetto (solo quelli visibili nel dominio cui si è loggati)(XML conforme a schema LISTA_STD.xsd)
1565        																	-- Ogni gruppo è un tag "Riga" che può contenere le seguenti colonne:
1566        																	-- 1: Identificativo del gruppo
1567        																	-- 2: Codice rapido del gruppo
1568        																	-- 3: Nome del gruppo
1569        			AttributiAddOut			OUT		NOCOPY CLOB,			-- Lista degli eventuali ulteriori attributi con cui è caratterizzato il cliente (memorizzati in DMT_CLIENTI.ALTRI_ATTRIBUTI)(XML conforme a schema LISTA_STD.xsd)
1570        																	-- Ogni attributo è un tag "Riga" che contiene le seguenti colonne:
1571        																	-- 1: N.ro (valori da 1 a n) del riquadro (fieldset) in cui mostrare l'attributo
1572        																	-- 2: Nome identificativo dell'attributo (ATTR_NAME)
1573        																	-- 3: Label del campo con cui rappresentare l'attributo
1574        																	-- 4: Tipo di attributo. Valori: DATE, DATETIME, TEXT, TEXT-AREA, CHECK, INTEGER, EURO, DECIMAL, COMBO-BOX, LISTA
1575        																	-- 5: N.ro massimo di caratteri/cifre
1576        																	-- 6: Larghezza del campo con cui rappresentare l'attributo (size)
1577        																	-- 7: Valore dell'attributo
1578        																	-- 8: Label del riquadro (fieldset) in cui mostrare l'attributo
1579        																	-- 9: (valori 1/0) 1 indica che l'attributo è obbligatorio, 0 che è facoltativo
1580        																	-- 10: Altezza (in nro righe) del campo con cui rappresentare l'attributo (se TEXT-AREA)
1581        																	-- 11:(valori 1/0) 1 indica se l'attributo è modificabile, 0 che è in sola visualizzazione
1582        			BAClientiOut			OUT	NOCOPY	CLOB,				-- Lista XML con i BA associati a cliente. Ogni BA è una riga le cui colonne sono i campi dei BA
1583        			FlgMostraAltriAttrOut		OUT		PLS_INTEGER,		-- (valori 1/0) Se 1 nella GUI vanno mostrati gli attributi addizionali (ce ne sono di visibile all'utente), se 0 no
1584        			ErrContextOut			OUT		VARCHAR2,				-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1585        			ErrCodeOut				OUT		PLS_INTEGER,			-- N.ro errore di uscita
1586        			ErrMsgOut				OUT 		VARCHAR2,			-- Messaggio d'errore
1587        			FlgAttivoOut			OUT		PLS_INTEGER				-- (valori 1/0) Indica se il soggetto è valido (1) o logicamente annullato (0)
1588        			)return PLS_INTEGER;									-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1589        
1590        	/***** Funzione per inserire o aggiornare un destinatario documenti (e il corrispondente soggetto in rubrica) *****/
1591        	function IUDestinatarioDoc(
1592        			CodIdConnectionTokenIn	IN	    DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1593        																	-- (obblig). Codice identificativo del token di connessione
1594        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,
1595        																	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1596        			IdDestinatarioIO		IN OUT	DMT_DESTINATARI_DOC.ID_DESTINATARIO%type,
1597        																	-- Id. del destinatario. Se null in input è un destinatario da registrare ex-novo
1598        																	-- In output è sempre valorizzato salvo in caso di errore
1599        			IdSoggRubrIO   			IN OUT  DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,
1600        																	-- Identificativo del soggetto di rubrica che corrisponde al destinatario
1601        																	-- In output, salvo in caso di errore, è sempre valorizzato
1602        			FlgPersonaFisicaIn		IN		NUMBER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1603        																	-- (valori 1/0/NULL) Se 1 il soggetto è una persona fisica, altrimenti giuridica
1604        			DenomCognomeIn			IN		DMT_RUBRICA_SOGGETTI.DENOMINAZIONE%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1605        																	-- (obblig.) Denominazione (se persona giuridica) o cognome (se persona fisica)
1606        			NomeIn					IN		DMT_RUBRICA_SOGGETTI.NOME%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1607        																	-- (obblig. se persona fisica) Nome
1608        			CFIn					IN 		DMT_RUBRICA_SOGGETTI.CF%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1609        																	-- Codice fiscale del soggetto
1610          			PIVAIn					IN 		DMT_RUBRICA_SOGGETTI.PIVA%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1611        																	-- Partita IVA del soggetto
1612        			CodTipoSottoTipoIn		IN 		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1613        																	-- Codice del tipo ed eventuale sottotipo di soggetto (se si indica il sottotipo il suo codice va separato con ";" da quello del tipo)
1614        			CodCondGiuridicaIn		IN		DMT_RUBRICA_SOGGETTI.COD_COND_GIURIDICA%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1615        																	-- Codice della condizione giuridica (valori da dizionario)
1616        			DtNascitaIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
1617        																	-- Data di nascita/istituzione (nel formato dato dal parametro di conf. FMT_STD_DATA).
1618        			CodIstatComuneNascIn	IN		DMT_RUBRICA_SOGGETTI.COD_ISTAT_COMUNE_NASC%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1619        																	-- Codice ISTAT del comune italiano di nascita/istituzione
1620        			NomeComuneNascIn		IN		DMT_COMUNI_ITALIANI.NOME_COMUNE%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1621        																	-- Nome del comune italiano o estero di nascita/istituzione
1622        			CodIstatStatoNascIn		IN		DMT_RUBRICA_SOGGETTI.COD_ISTAT_STATO_NASC%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1623        																	-- Codice ISTAT dello stato di nascita/istituzione
1624        			NomeStatoNascIn			IN		DMT_STATI_NAZIONALI.NOME_STATO%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1625        																	-- Nome dello stato di nascita/istituzione
1626        			DtCessazioneIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
1627        																	-- Data di cessazione/morte (nel formato dato dal parametro di conf. FMT_STD_DATA).
1628        			CodCausaleCessazioneIn	IN		DMT_RUBRICA_SOGGETTI.COD_CAUS_CESSAZIONE%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1629        																	-- Codice della causa di cessazione/morte (valori da dizionario)
1630        			FlgSexIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1631        																	-- (valori M/F) Flag del sesso (per persona fisica)
1632        			CodIstatStatoCittIn		IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1633        																	-- Codice ISTAT dello stato di cittadinanza (per persona fisica)
1634        			NomeStatoCittIn			IN		DMT_STATI_NAZIONALI.NOME_STATO%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1635        																	-- Nome dello stato di cittadinanza (per persona fisica)
1636        			TitoloIn				IN		DMT_RUBRICA_SOGGETTI.TITOLO%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1637        																	-- Titolo (per persona fisica)
1638        			CodIndPAIn				IN		DMT_RUBRICA_SOGGETTI.COD_INDPA%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1639        																	-- Codice con cui il soggetto (se PA, AOO o UO ) è registrato nell'indice PA
1640        			CodAmmIPAIn				IN		DMT_RUBRICA_SOGGETTI.COD_AMM_IPA%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1641        																	-- Codice Amministrazione su Indice PA del soggetto (se PA) o dell'Amministrazione di appartenenza del soggetto (se AOO/UO)
1642        			CodAOOIPAIn				IN		DMT_RUBRICA_SOGGETTI.COD_AOO_IPA%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1643        																	-- Codice AOO su Indice PA del soggetto (se Area Organizzativa Omogenea) o dell'AOO di appartenenza del soggetto (se UO)
1644        			IdSoggAppIn				IN		DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1645        																	-- Identificativo del soggetto di rubrica cui appartiene il soggetto da creare/modificare (appartenenza diretta)
1646        																	-- Se non specificato può essere comunque settato se ricavabile da CodAmmIPAIn e/o CodAOOIPAIn
1647        			CIProvSoggIn			IN 		DMT_RUBRICA_SOGGETTI.PROV_CI_SOGG%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1648        																	-- Codice identificativo del soggetto nel sistema di provenienza (ad esempio l'anagrafe residenti/ditte)
1649        			CIProvDestDocIn			IN 		DMT_DESTINATARI_DOC.PROV_CI_DEST_DOC%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1650        																	-- Codice identificativo del destinatario nel sistema di provenienza
1651        			UsernameIn				IN		DMT_RUBRICA_SOGGETTI.USERNAME%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1652        																	-- Username con cui il soggetto può accedere al sistema
1653        			PasswordIn				IN		DMT_RUBRICA_SOGGETTI.PASSWORD%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1654        																	-- Password con cui il soggetto può accedere al sistema
1655        			CodRapidoIn				IN		DMT_RUBRICA_SOGGETTI.COD_RAPIDO%TYPE DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
1656        																	-- Codice rapido che identifica il soggetto (univoco tra quelli dei soggetti visibili dallo stesso dominio)
1657        			FlgLockedIn				IN		NUMBER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
1658        																	-- (valori 1/0/NULL) Indicatore di soggetto riservato dal sistema e non modificabile/cancellabile da GUI
1659        			FlgModIndirizziIn		IN		VARCHAR2 DEFAULT 'I',	-- (valori I/C) Indica se gli indirizzi del soggetto indicate nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelle da inserire/modificare/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutti gli indirizzi NON storici già specificati in caso di soggetto da aggiornare
1660        			XMLIndirizziIn			IN		CLOB DEFAULT NULL,		-- Lista degli indirizzi (tranne quelli cessati) del soggetto (XML conforme a schema LISTA_STD.xsd)
1661        																			-- Ogni indirizzo è un tag Riga che può contenere le seguenti colonne:
1662        																			-- 1: Identificativo dell'indirizzo/luogo (rowid)
1663        																			-- 2: Codice del tipo di indirizzo/luogo
1664        																			-- 3: Tipo di indirizzo/luogo
1665        																			-- 4: Dettaglio del tipo
1666        																			-- 5: <non utilizzata>
1667        																			-- 6: <non utilizzata>
1668        																			-- 7: Data di inzio validità dell'indirizzo/luogo (nel formato dato dal parametro di conf. FMT_STD_DATA)
1669        																			-- 8: Data di fine validità dell'indirizzo/luogo (nel formato dato dal parametro di conf. FMT_STD_DATA)
1670        																			-- 9: Codice identificativo toponomastico (se indirizzo censito nella toponomastica del sistema; viene considerato solo se è valorizzata anche la colonna successiva)
1671        																			-- 10: Indirizzo (senza civico) (alternativo o ridondante rispetto al campo precedente) e senza tipo toponimo se questo è separato in colonna 24 (che quindi è valorizzata)
1672        																			-- 11: N.° civico (senza eventuali appendici)
1673        																			-- 12: Interno
1674        																			-- 13: Scala
1675        																			-- 14: Piano
1676        																			-- 15: CAP
1677        																			-- 16: Frazione
1678        																			-- 17: Codice ISTAT del comune italiano (viene considerato solo se è valorizzata anche la colonna successiva)
1679        																			-- 18: Nome del comune italiano o della città (se estera)
1680        																			-- 19: Codice ISTAT dello stato (viene considerato solo se è valorizzata anche la colonna successiva)
1681        																			-- 20: Nome dello stato
1682        																			-- 21: Targa provincia
1683        																			-- 22: Zona dell'indirizzo
1684        																			-- 23: Complemento dell'indirizzo
1685        																			-- 24: Tipo toponimo (i.e. via, piazza ecc) dell'indirizzo
1686        																			-- 25: Appendici (esponente, bis/ter, colore ecc) del N.ro civico
1687        																			-- 26: (valori 1/0/NULL) Flag di indirizzo da eliminare
1688        			FlgModAltreDenomIn		IN		VARCHAR2 DEFAULT 'I',	-- (valori I/C) Indica se le denominazioni alternative del soggetto indicate nell'argomento successivo sono fornite in modo incrementale (=I) (solo quelle da inserire/modificare/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutte quelle già specificate in caso di soggetto da aggiornare
1689        			XMLAltreDenominazioniIn	IN		CLOB DEFAULT NULL,		-- Lista con le denominazioni alternative, correlate ecc. del soggetto (XML conforme a schema LISTA_STD.xsd)
1690        																	-- Ogni denominazione è un tag "Riga" che può contenere le seguenti colonne:
1691        																	-- 1: Identificativo (ROWID) con cui la denominazione è già stata registrata in banca dati
1692        																	-- 2: Tipo di denominazione (parallela, correlata, pseudonimo)
1693        																	-- 3: Denominazione
1694        																	-- 4: (valori 1/0/NULL) Flag di denominazione da eliminare
1695        			FlgModContattiIn		IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se i contatti (rif. telefonici, fax, e-mail) del soggetto indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da inserire/modificare/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già specificati in caso di soggetto da aggiornare
1696        			XMLContattiIn			IN		CLOB DEFAULT NULL,				-- Lista con i contatti (rif. telefonici, fax, e-mail) del soggetto (XML conforme a schema LISTA_STD.xsd)
1697        																	-- Ogni contatto è tag "Riga" che può contenere le seguenti colonne:
1698        																	-- 1: Identificativo (ROWID preceduto da Tipo - T/F/E) con cui il contatto è già stata registrato in banca dati
1699        																	-- 2: (obblig.) Flag che indica il tipo di contatto. Valori possibili: T=Telefono; F=Fax; E=e-Mail
1700        																	-- 3: N.ro di telefono/fax o indirizzo e-mail
1701        																	-- 4: Tipo di numero di telefono (abitazione, ufficio, cell. ecc.) Valori da apposita dictionary entry
1702        																	-- 5: (valori 1/0/NULL) Flag di indirizzo e-mail di Posta Elettronica Certificata
1703        																	-- 6: (valori 1/0/NULL) Flag di indirizzo e-mail dichiarato all'Indice PA
1704        																	-- 7: (valori 1/0/NULL) Flag di indirizzo e-mail che è Casella Istituzionale di una PA
1705        																	-- 8: Estremi del gestore della casella se è di Posta Elettronica Certificata
1706        																	-- 9: (valori 1/0/NULL) Flag di contatto da eliminare
1707        			FlgModGruppiAppIn		IN		VARCHAR2 DEFAULT 'I',	-- (valori I/C) Indica se i gruppi di appartenenza indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da inserire/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già associati al modello da aggiornare
1708        			XMLGruppiAppIn			IN		CLOB DEFAULT NULL,		-- Lista con i gruppi di appartenenza del soggetto (solo quelli visibili nel dominio cui si è loggati)(XML conforme a schema LISTA_STD.xsd)
1709        																	-- Ogni gruppo è un tag "Riga" che può contenere le seguenti colonne:
1710        																	-- 1: Identificativo del gruppo
1711        																	-- 2: Codice rapido del gruppo
1712        																	-- 3: Nome del gruppo
1713        																	-- 4: (valori 1/0/NULL) Flag di gruppo da eliminare
1714        			FlgModUtenzeAssociateIn	IN		VARCHAR2 DEFAULT 'I',	-- (valori I/C) Indica se le utenze associate indicate nell'argomento successivo sono fornite in modo incrementale (=I) (solo quelli da inserire/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutte quelle già associate al destinatario da aggiornare
1715        			UtenzeAssociateIn		IN		CLOB DEFAULT NULL,		-- Utenze associate al destinatario
1716        																	-- E' una lista XML conforme allo schema ListaStd.xsd
1717        																	-- Ogni utenza è un tag riga con le colonne:
1718        																	-- 1: ID_USER dell'utenza
1719        																	-- 2: Cognome e Nome
1720        																	-- 3: Username
1721        																	-- 4: (valori 1/0/NULL) Flag di utenza da eliminare
1722        			AttributiAddIn			IN		CLOB DEFAULT NULL,		-- Attributi addizionali del cliente (memorizzati in DMT_DESTINATARI_DOC.ALTRI_ATTRIBUTI): XML contenente nomi e valori degli attributi dinamici da aggiornare (conforme allo schema SezioneCache.xsd)
1723        																	-- Gli attributi già presenti in DB e per i quali non c'è corrispondente nell'XML restano invariati
1724        																	-- Per tutti gli attributi vale quanto segue:
1725        																	-- Un attributo da settare è un tag "Variabile" dell'XML il cui tag "Nome" contiene il nome identificativo dell'attributo (ATTR_NAME di DMT_ATTRIBUTES_DEF)
1726        																	-- Un attributo da settare è una variabile con tag "ValoreSemplice" se è un attributo a singolo valore e non strutturato (cioè con tipo diverso da COMPLEX)
1727        																	-- altrimenti è una variabile con tag "Lista" che ha un'unica colonna con "Nro" pari a 1 se l'attributo non è strutturato, che ha invece tante colonne quanti gli attributi componenti (ordinate in base al loro NRO_ORD_IN_SUP) se l'attributo è complesso
1728        																	-- Nel caso di variabili con tag "Lista" i valori specificati nell'XML si aggiungono o sostituiscono quelli già presenti in DB a seconda che nell'XML sia presente o meno una variabile con tag "Nome" pari a #Append_<Nome attributo> e tag "ValoreSemplice" pari a 1
1729        																	-- In particolare se non sono specificati valori nell'XML (tag Lista vuoto) e se i valori non sono da aggiungere significa che tutti i valori dell'attributo già presenti in DB vanno rimossi
1730        			FlgIgnoreWarningIn 		IN 		PLS_INTEGER DEFAULT NULL,		-- (valori 1/0/NULL) Se 0 o NULL significa che in presenza di WARNING la stored si comporta come in caso di errore; se 1 gli WARNING vengono ignorati
1731        			FlgRollBckFullIn		IN 		PLS_INTEGER DEFAULT NULL,		-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1732        																			-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1733        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,		-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1734        			WarningMsgOut			OUT		VARCHAR2,						-- Messaggio di warning (valorizzato solo se non c'è errore)
1735        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1736        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1737        			ErrMsgOut				OUT 		VARCHAR2					-- Messaggio d'errore
1738        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
1739        
1740        	/*** Funzione di eliminazione di un destinatario documenti dall'anagrafica destiatari			***/
1741        	/*** Si può specificare se l'eliminazione deve essere fisica o solo logica (annullamento)		***/
1742        	/*** Se non lo si specifica il sistema fa quella fisica se possibile, se no quella logica		***/
1743        	function DDestinatarioDoc(
1744        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1745        																				-- (obblig). Codice identificativo del token di connessione
1746        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1747        			IdDestinatarioIn   		IN 		DMT_DESTINATARI_DOC.ID_DESTINATARIO%type,		-- (obblig.)Identificativo del destinatario
1748        			FlgCancFisicaIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL): Se 1 si richiede la cancellazione fisica; se 0 l'annullamento logico; se non è valorizzato quella possibile delle 2.
1749        			MotiviIn				IN		DMT_RUBRICA_SOGGETTI.MOTIVI_ANN%type,	-- Motivi della cancellazione/annullamento
1750        			FlgIgnoreWarningIn 		IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 0 o NULL significa che in presenza di WARNING la stored si comporta come in caso di errore; se 1 gli WARNING vengono ignorati
1751        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,		-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
1752        																				-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
1753        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
1754        			WarningMsgOut			OUT		VARCHAR2,							-- Messaggio di warning (valorizzato solo se non c'è errore)
1755        			ErrContextOut			OUT		VARCHAR2,							-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1756        			ErrCodeOut				OUT		PLS_INTEGER,						-- N.ro errore di uscita
1757        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
1758        			) return PLS_INTEGER;												-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
1759        
1760        	/**** Funzione per estrarre i dati di un destinatario di documenti ****/
1761        	FUNCTION LoadDettDestinatarioDoc(
1762        			CodIdConnectionTokenIn	IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1763        																	-- (obblig). Codice identificativo del token di connessione
1764        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1765        			IdDestinatarioIO		IN OUT	DMT_DESTINATARI_DOC.ID_DESTINATARIO%type,			-- (obblig.) Id. del destinatario di cui recuperare i dati
1766        			CodApplSocietaIn			IN		DMT_APPLICAZIONI_ESTERNE.CI_APPLICAZIONE%type DEFAULT NULL, 	-- Codice applicazione della società per cui estrarre i dati del destinatario i dati del destinatario specializzati per società
1767        			CodIstApplSocietaIn		IN		DMT_APPLICAZIONI_ESTERNE.CI_ISTANZA_APPLICAZIONE%type DEFAULT NULL, -- Codice istanza applicazione della società per cui estrarre i dati del destinatario specializzati per società
1768        			IdSoggRubrOut   		OUT	DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,	-- Identificativo del soggetto di rubrica che corrisponde al cliente
1769        			FlgPersonaFisicaOut		OUT		DMT_RUBRICA_SOGGETTI.FLG_PERSONA_FISICA%type,
1770        																	-- (valori 1/NULL) Se 1 il soggetto è una persona fisica, altrimenti giuridica
1771        			DenomCognomeOut			OUT		DMT_RUBRICA_SOGGETTI.DENOMINAZIONE%TYPE,  -- Denominazione (se persona giuridica) o cognome (se persona fisica)
1772        			NomeOut					OUT		DMT_RUBRICA_SOGGETTI.NOME%TYPE,		-- Nome (se persona fisica)
1773        			CFOut					OUT 		DMT_RUBRICA_SOGGETTI.CF%TYPE,			-- Codice fiscale del soggetto
1774          			PIVAOut					OUT 		DMT_RUBRICA_SOGGETTI.PIVA%TYPE,		-- Partita IVA del soggetto
1775        			CodTipoSottoTipoOut		OUT 		VARCHAR2,						-- Codice del tipo ed eventuale sottotipo di soggetto (se si indica il sottotipo il suo codice viene separato con ";" da quello del tipo)
1776        			CodCondGiuridicaOut		OUT		DMT_RUBRICA_SOGGETTI.COD_COND_GIURIDICA%type,
1777        																	-- Codice della condizione giuridica
1778        			DtNascitaOut			OUT		VARCHAR2,						-- Data di nascita/istituzione (nel formato dato dal parametro di conf. FMT_STD_DATA).
1779        			CodIstatComuneNascOut		OUT		DMT_RUBRICA_SOGGETTI.COD_ISTAT_COMUNE_NASC%type,
1780        																	-- Codice ISTAT del comune italiano di nascita/istituzione
1781        			NomeComuneNascOut			OUT		DMT_COMUNI_ITALIANI.NOME_COMUNE%type,	-- Nome del comune italiano o estero di nascita/istituzione
1782        			TargaProvNascOut			OUT		DMT_COMUNI_ITALIANI.TARGA_PROV%type,	-- Targa della provincia di nascita
1783        			CodIstatStatoNascOut		OUT		DMT_RUBRICA_SOGGETTI.COD_ISTAT_STATO_NASC%type,
1784        																	-- Codice ISTAT dello stato di nascita/istituzione
1785        			NomeStatoNascOut			OUT		DMT_STATI_NAZIONALI.NOME_STATO%type,	-- Nome dello stato di nascita/istituzione
1786        			DtCessazioneOut			OUT		VARCHAR2,						-- Data di cessazione/morte (nel formato dato dal parametro di conf. FMT_STD_DATA).
1787        			CodCausaleCessazioneOut		OUT		DMT_RUBRICA_SOGGETTI.COD_CAUS_CESSAZIONE%type,
1788        																	-- Codice della causa di cessazione/morte
1789        			FlgSexOut				OUT		DMT_RUBRICA_SOGGETTI.FLG_SEX%TYPE,		-- (valori M/F) Flag del sesso (per persona fisica)
1790        			CodIstatStatoCittOut		OUT		DMT_RUBRICA_SOGGETTI.COD_ISTAT_STATO_NASC%type,
1791        																	-- Codice ISTAT dello stato di cittadinanza (per persona fisica)
1792        			NomeStatoCittOut			OUT		DMT_STATI_NAZIONALI.NOME_STATO%type,	-- Nome dello stato di cittadinanza (per persona fisica)
1793        			TitoloOut				OUT		DMT_RUBRICA_SOGGETTI.TITOLO%type,		-- Titolo (per persona fisica)
1794        			CodIndPAOut				OUT		DMT_RUBRICA_SOGGETTI.COD_INDPA%type,	-- Codice con cui il soggetto (se PA, AOO o UO ) è registrato nell'indice PA
1795        			CodAmmIPAOut			OUT		DMT_RUBRICA_SOGGETTI.COD_AMM_IPA%type,
1796        																	-- Codice Amministrazione su Indice PA del soggetto (se PA) o dell'Amministrazione di appartenenza del soggetto (se AOO/UO)
1797        			CodAOOIPAOut			OUT		DMT_RUBRICA_SOGGETTI.COD_AOO_IPA%type,
1798        																	-- Codice AOO su Indice PA del soggetto (se Area Organizzativa Omogenea) o dell'AOO di appartenenza del soggetto (se UO)
1799        			IdSoggAppOut			OUT		DMT_RUBRICA_SOGGETTI.ID_SOGG_RUBRICA%TYPE,
1800        																	-- Identificativo del soggetto di rubrica cui appartiene il soggetto da creare/modificare (appartenenza diretta)
1801        			CIProvSoggOut			OUT 	DMT_RUBRICA_SOGGETTI.PROV_CI_SOGG%TYPE,	-- Codice identificativo del soggetto nel sistema di provenienza (ad esempio l'anagrafe residenti/ditte)
1802        			CIProvDestDocOut		OUT		DMT_DESTINATARI_DOC.PROV_CI_DEST_DOC%TYPE,		-- Codice identificativo del destinatario nel sistema di provenienza
1803        			UsernameOut				OUT		DMT_RUBRICA_SOGGETTI.USERNAME%TYPE,		-- Username con cui il soggetto può accedere al sistema
1804        			CodRapidoOut			OUT		DMT_RUBRICA_SOGGETTI.COD_RAPIDO%TYPE,   -- Codice rapido che identifica il soggetto
1805        			FlgLockedOut			OUT		DMT_RUBRICA_SOGGETTI.FLG_LOCKED%type,	-- (valori 1/NULL) Indicatore di soggetto riservato dal sistema e non modificabile/cancellabile da GUI
1806        			RowidOut				OUT		VARCHAR2,						-- Rowid del record del soggetto
1807        			IndirizziOut		OUT		NOCOPY CLOB,						-- Lista degli indirizzi del soggetto (XML conforme a schema LISTA_STD.xsd)
1808        																			-- Ogni indirizzo è un tag Riga che può contenere le seguenti colonne:
1809        																			-- 1: Identificativo dell'indirizzo/luogo (rowid)
1810        																			-- 2: Codice del tipo di indirizzo/luogo
1811        																			-- 3: Tipo di indirizzo/luogo
1812        																			-- 4: Dettaglio del tipo
1813        																			-- 5: Cardinalità del tipo di indirizzo (basata sulla rilevanza del tipo: residenza /sede legale sono i primi)
1814        																			-- 6: Descrizione completa dell'indirizzo/luogo
1815        																			-- 7: Data di inzio validità dell'indirizzo/luogo (nel formato dato dal parametro di conf. FMT_STD_DATA)
1816        																			-- 8: Data di fine validità dell'indirizzo/luogo (nel formato dato dal parametro di conf. FMT_STD_DATA)
1817        																			-- 9: Codice identificativo toponomastico (se indirizzo censito nella toponomastica del sistema; viene considerato solo se è valorizzata anche la colonna successiva)
1818        																			-- 10: Indirizzo (senza civico) (alternativo o ridondante rispetto al campo precedente) e senza tipo toponimo se questo è separato in colonna 24 (che quindi è valorizzata)
1819        																			-- 11: N.° civico (senza eventuali appendici)
1820        																			-- 12: Interno
1821        																			-- 13: Scala
1822        																			-- 14: Piano
1823        																			-- 15: CAP
1824        																			-- 16: Frazione
1825        																			-- 17: Codice ISTAT del comune italiano (viene considerato solo se è valorizzata anche la colonna successiva)
1826        																			-- 18: Nome del comune italiano o della città (se estera)
1827        																			-- 19: Codice ISTAT dello stato (viene considerato solo se è valorizzata anche la colonna successiva)
1828        																			-- 20: Nome dello stato
1829        																			-- 21: Targa provincia
1830        																			-- 22: Zona dell'indirizzo
1831        																			-- 23: Complemento dell'indirizzo
1832        																			-- 24: Tipo toponimo (i.e. via, piazza ecc) dell'indirizzo
1833        																			-- 25: Appendici (esponente, bis/ter, colore ecc) del N.ro civico
1834        			XMLAltreDenominazioniOut	OUT		NOCOPY CLOB,		-- Lista con le denominazioni alternative, correlate ecc. del soggetto (XML conforme a schema LISTA_STD.xsd)
1835        																	-- Ogni denominazione è un tag "Riga" che contiene le seguenti colonne:
1836        																	-- 1: Identificativo (ROWID) con cui la denominazione è già stata registrata in banca dati
1837        																	-- 2: Tipo di denominazione (decodifica) (parallela, correlata, pseudonimo ecc.)
1838        																	-- 3: Denominazione
1839        			XMLContattiOut			OUT		NOCOPY CLOB,			-- Lista con i contatti (rif. telefonici, fax, e-mail) del soggetto (XML conforme a schema LISTA_STD.xsd)
1840        																	-- Ogni contatto è tag "Riga" che contiene le seguenti colonne:
1841        																	-- 1: Identificativo (ROWID preceduto da Tipo - T/F/E) con cui il contatto è già stata registrato in banca dati
1842        																	-- 2: Flag che indica il tipo di contatto. Valori possibili: T=Telefono; F=Fax; E=e-Mail
1843        																	-- 3: N.ro di telefono/fax o indirizzo e-mail
1844        																	-- 4: Tipo di numero di telefono (abitazione, ufficio, cell. ecc.) Valori da apposita dictionary entry
1845        																	-- 5: (valori 1/0) Flag di indirizzo e-mail di Posta Elettronica Certificata
1846        																	-- 6: (valori 1/0) Flag di indirizzo e-mail dichiarato all'Indice PA
1847        																	-- 7: (valori 1/0) Flag di indirizzo e-mail che è Casella Istituzionale di una PA
1848        																	-- 8: Estremi del gestore della casella se è di Posta Elettronica Certificata
1849        			XMLGruppiAppOut			OUT		NOCOPY CLOB,			-- Lista con i gruppi di appartenenza del soggetto (solo quelli visibili nel dominio cui si è loggati)(XML conforme a schema LISTA_STD.xsd)
1850        																	-- Ogni gruppo è un tag "Riga" che può contenere le seguenti colonne:
1851        																	-- 1: Identificativo del gruppo
1852        																	-- 2: Codice rapido del gruppo
1853        																	-- 3: Nome del gruppo
1854        			AttributiAddOut			OUT		NOCOPY CLOB,			-- Lista degli eventuali ulteriori attributi con cui è caratterizzato il cliente (memorizzati in DMT_CLIENTI.ALTRI_ATTRIBUTI)(XML conforme a schema LISTA_STD.xsd)
1855        																	-- Ogni attributo è un tag "Riga" che contiene le seguenti colonne:
1856        																	-- 1: N.ro (valori da 1 a n) del riquadro (fieldset) in cui mostrare l'attributo
1857        																	-- 2: Nome identificativo dell'attributo (ATTR_NAME)
1858        																	-- 3: Label del campo con cui rappresentare l'attributo
1859        																	-- 4: Tipo di attributo. Valori: DATE, DATETIME, TEXT, TEXT-AREA, CHECK, INTEGER, EURO, DECIMAL, COMBO-BOX, LISTA
1860        																	-- 5: N.ro massimo di caratteri/cifre
1861        																	-- 6: Larghezza del campo con cui rappresentare l'attributo (size)
1862        																	-- 7: Valore dell'attributo
1863        																	-- 8: Label del riquadro (fieldset) in cui mostrare l'attributo
1864        																	-- 9: (valori 1/0) 1 indica che l'attributo è obbligatorio, 0 che è facoltativo
1865        																	-- 10: Altezza (in nro righe) del campo con cui rappresentare l'attributo (se TEXT-AREA)
1866        																	-- 11:(valori 1/0) 1 indica se l'attributo è modificabile, 0 che è in sola visualizzazione
1867        			FlgMostraAltriAttrOut		OUT		PLS_INTEGER,		-- (valori 1/0) Se 1 nella GUI vanno mostrati gli attributi addizionali (ce ne sono di visibile all'utente), se 0 no
1868        			IndirizzoEmailOut	  	OUT	VARCHAR2,					-- Indirizzo e-mail del destinatario (se 1 solo)
1869        			TelefonoOut				OUT	VARCHAR2,					-- N° di telefono del destinatario (se 1 solo)
1870        			CodClienteOut			OUT	VARCHAR2,					-- Codice cliente cui è associato il destinatario (se 1 solo, eventualmente nella società indicata in input)
1871        			CodCommittenteOut		OUT	VARCHAR2,					-- Cod. committente del cliente cui è associato il destinatario (se 1 solo, eventualmente nella società indicata in input)
1872        			DesClienteOut			OUT	VARCHAR2,					-- Denominazione cliente cui è associato il destinatario (se 1 solo, eventualmente nella società indicata in input)
1873        			CFPivaClienteOut		OUT	VARCHAR2,					-- Cod. fiscale / P. IVA cliente cui è associato il destinatario (se 1 solo, eventualmente nella società indicata in input)
1874        			IdClienteOut			OUT	INTEGER,					-- Id. cliente cui è associato il destinatario se centito in DMT_CLIENTI (e se 1 solo, eventualmente nella società indicata in input)
1875        			CanaleInvioOut			OUT	VARCHAR2,					-- Canale di invio (se 1 solo, eventualmente nella società indicata in input)
1876        			ModalitaRegOut			OUT	VARCHAR2,					-- Modalità di registrazione del destinatario
1877        			TsRegistrazioneOut		OUT	VARCHAR2,					-- Data e ora di registrazione del destinatario (nel formato dato dal parametro di config. FMT_STD_TIMESTAMP)
1878        			LinguaOut				OUT	VARCHAR2,					-- Lingua del destinatario
1879        			UtenzeAssociateOut		OUT	NOCOPY CLOB,				-- Utenze associate al destinatario
1880        																	-- E' una lista XML conforme allo schema ListaStd.xsd
1881        																	-- Ogni utenza è un tag riga con le colonne:
1882        																	-- 1: ID_USER dell'utenza
1883        																	-- 2: Cognome e nome
1884        																	-- 3: Username
1885        			ErrContextOut			OUT		VARCHAR2,				-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1886        			ErrCodeOut				OUT		PLS_INTEGER,			-- N.ro errore di uscita
1887        			ErrMsgOut				OUT 		VARCHAR2,			-- Messaggio d'errore
1888        			FlgAttivoOut			OUT		PLS_INTEGER,			-- (valori 1/0) Indica se il soggetto è valido (1) o logicamente annullato (0)
1889        			ListaDatiXSocietaOut	OUT	NOCOPY CLOB,				-- Lista XML (schema ListaStd.xsd) con i dati del destinatario specializzati per società
1890        			ListaDatiCanaliXClusterOut   OUT	NOCOPY CLOB			-- Lista XML (schema ListaStd.xsd) con i dati dei canali specializzati per il cluster
1891        																	-- Ogni riga corrisponde ad un cluster e contiene le colonne:
1892        																	-- 1)	ID_UO del cluster (suddivisione di Nestlè)
1893        																	-- 2)	Descrizione del cluster
1894        																	-- 3)	Cod. del canale (i valori possibili Otta senti o vedi tu quelli che sono già stati usati nei job e poi ce li mandi)
1895        																	-- 4)	Flag obsoleto (1/0/null)
1896        																	-- 5)	ID_CASELLA mail
1897        																	-- 6)	Indirizzo casella
1898        																	-- 7)	Alias casella da usare come mittente (solo per le caselle ordinarie)
1899        																	-- 8)	ID_USER utente accesso web
1900        																	-- 9)	Username utente accesso web
1901        																	-- 10)  Cognome e nome utente accesso web
1902        																	-- 11)  Se 1 indica che la relazione cluster-destinatario è modificabile, se 0 che non lo è
1903        			)return PLS_INTEGER;									-- Vale 1 se tutto è andato a buon fine, altrimenti 0
1904        
1905        	/********** serve a recuperare il canale di invio fatture a un cliente di cui sia noto il codice identificativo *****/
1906        	function GetCanaleInvioFatture(
1907        			CodIdConnectionTokenIn	IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1908        																	-- (obblig). Codice identificativo del token di connessione (connessione a applicazione esterna che corrisponde a una società)
1909        			CIDClienteIn		IN 		VARCHAR2,					-- (obblig.) Cod. identificativo del cliente di cui recuperare il canale di invio
1910        			CodCanaleInvioOut		OUT		VARCHAR2,				-- Codice che indica il canale di invio del destinatario (per la società cui si è loggati)
1911        			ErrContextOut			OUT		VARCHAR2,				-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1912        			ErrCodeOut				OUT		PLS_INTEGER,			-- N.ro errore di uscita
1913        			ErrMsgOut				OUT 	VARCHAR2				-- Messaggio d'errore
1914        			) return PLS_INTEGER; 									-- Vale 1 se il recupero è andato a buon fine, altrimenti 0
1915        
1916        END  DMPK_ANAGRAFICA;
