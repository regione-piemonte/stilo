/* * SPDX-License-Identifier: AGPL-3.0-or-later * * C Copyright 2023 Regione Piemonte * */
var ping = require('../ping.js')

function checkPing (cb) {
  var tracker = log.newItem('checkPing', 1)
  tracker.info('checkPing', 'Pinging registry')
  ping({}, true, (err, pong) => {
    if (err && err.code && err.code.match(/^E\d{3}$/)) {
      return cb(null, [err.code.substr(1)])
    } else {
      cb(null, [200, 'ok'])
    }
  })
}

module.exports = checkPing
