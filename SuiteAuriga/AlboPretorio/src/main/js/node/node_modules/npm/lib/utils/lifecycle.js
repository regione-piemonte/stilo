/* * SPDX-License-Identifier: AGPL-3.0-or-later * * C Copyright 2023 Regione Piemonte * */

const lifecycleOpts = require('../config/lifecycle')
const lifecycle = require('npm-lifecycle')

function runLifecycle (pkg, stage, wd, moreOpts, cb) {
  if (typeof moreOpts === 'function') {
    cb = moreOpts
    moreOpts = null
  }

  const opts = lifecycleOpts(moreOpts)
  lifecycle(pkg, stage, wd, opts).then(cb, cb)
}
